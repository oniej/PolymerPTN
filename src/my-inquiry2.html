<!--
@license
Copyright (c) 2016 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
-->
<link rel="import" href="../bower_components/polymer/polymer.html">
<link rel="import" href="../bower_components/iron-image/iron-image.html">
<link rel="import" href="../bower_components/paper-card/paper-card.html">
<link rel="import" href="../bower_components/iron-icon/iron-icon.html">
<link rel="import" href="../bower_components/paper-button/paper-button.html">
<link rel="import" href="../bower_components/paper-listbox/paper-listbox.html">
<link rel="import" href="../bower_components/neon-animation/web-animations.html">
<link rel="import" href="../bower_components/iron-list/iron-list.html">
<link rel="import" href="../bower_components/iron-scroll-threshold/iron-scroll-threshold.html">
<link rel="import" href="../bower_components/paper-fab/paper-fab.html">
<link rel="import" href="../bower_components/vaadin-dialog/vaadin-dialog.html">
<link rel="import" href="../bower_components/salte-dialog/salte-dialog.html">
<link rel="import" href="../bower_components/paper-dropdown-input/paper-dropdown-input.html">
<link rel="import" href="../bower_components/paper-dialog/paper-dialog.html">
<link rel="import" href="../bower_components/iron-ajax/iron-ajax.html">
<link rel="import" href="../bower_components/paper-input/paper-input.html">
<link rel="import" href="../bower_components/paper-input/paper-input-container.html">

<link rel="import" href="time-element.html">
<link rel="import" href="shared-styles.html">
<dom-module id="my-inquiry2">
    <template>
        <style include="shared-styles">
            :host {
                height: 100vh;
                margin: 0;
                display: flex;
                flex-direction: column;
            }

            @media (max-width: 768px) {
                div .availability {
                    margin: 16px;
                    display: flex;
                    flex-direction: column;
                    border-radius: 3px;
                }
                #dateandRoom {
                    display: flex;
                }
            }

            @media (min-width: 768px) {
                div .availability {
                    width: 765px;
                    margin: 16px auto;
                    border-radius: 3px;
                    box-shadow: 0 2px 2px 0 rgba(0, 0, 0, 0.14), 0 1px 5px 0 rgba(0, 0, 0, 0.12), 0 3px 1px -2px rgba(0, 0, 0, 0.2);
                }
            }

            #hotels {
                border-collapse: collapse;
                width: 100%;

            }

            #hotels td {
                height: 25px;
                border: 1px solid rgb(100, 100, 100);
            }

            #hotels th {
                /* padding-top: 12px; */
                height: 45px;
            }

            #hotels td,
            #hotels th {
                text-align: center;
                border: 1px solid #ddd;
                /* padding: 2px; */
                /* height: 40px; */
                /* outline: 1px solid black; */
                /* border: 1px solid black; */
                /* background-color: darkorange; */
                /* color: white; */
            }

            .avatar-container-profile {
                position: relative;
                border: 2px solid darkorange;
                border-radius: 50%;
                height: 90px;
                padding: 2px;
                width: 90px;
                margin: 20px auto;
            }

            app-header {
                color: rgb(255, 255, 255);
                background-color: darkorange;
            }

            hr {
                background-color: #eee;
                border: 0 none;
                color: #eee;
                height: 1px;
            }

            hr#alloc {
                height: 1px;
                border: 1px dashed black;
            }

            hr#alloc1 {
                height: 1px;
                border: 1px dashed black;
            }

            hr#block {
                height: 1px;
                border: 1px dashed black;

            }

            hr#block1 {
                height: 1px;
                border: 1px dashed black;

            }

            hr#bookingshr {
                height: 1px;
                border: 1px dashed black;
            }

            hr#availhr {
                height: 1px;
                border: 1px dashed black;
            }

            .dateclass {
                background-color: #1B5E20;
                color: white;
            }

            .table {
                width: auto;
                /* height: 400px; */
                margin-left: 27.8em;
                overflow: auto;
            }

            #hotels {
                height: 100%;
            }

            /* .hotelth {
                background-color: white;
                position: sticky;
                top: 0;
                width: 14.5em;
                min-width: 14.5em;
                border-bottom: 2px solid black;
            } */

            .hotel {
                position: absolute;
                width: 14.2em;
                /* height: 100%; */
                left: 2em;
                /* top: 2em; */
                /* border-bottom: 1px solid; */
                text-align: left;
                /* margin-left: 2px; */
                overflow: auto;
                padding-left: 5px;

            }

            /* .roomth {
                background-color: white;
                position: sticky;
                top: 0;
                width: 13.4em;
                min-width: 13.4em;
                border-bottom: 2px solid black;
            } */

            .room {
                position: absolute;
                width: 13.2em;
                /* height: 100%; */
                left: 16.6em;
                /* top: 2em; */
                /* border-bottom: 1px solid; */
                text-align: left;
                /* margin-left: 2px; */
                overflow: auto;
                padding-left: 5px;

            }

            .detail {
                /* position: sticky;
                top: 0;
                background-color: white; */
                text-align: center;
                /* border: 1px solid rgb(100, 100, 100);
                border-bottom: 2px solid black; */
            }

            .trdetail {
                overflow-x: hidden;
                overflow: auto
            }

            .trdetail:nth-child(even) {
                background-color: rgb(240, 240, 240);
            }


            #hotels td:hover {
                cursor: pointer;
                background-color: navajowhite;
            }

            .detailgreen:hover {
                opacity: 0.5;
                filter: alpha(opacity=100);
                /* For IE8 and earlier */
            }

            .detailred:hover {
                opacity: 0.5;
                filter: alpha(opacity=100);
                /* For IE8 and earlier */
            }

            detailyellow:hover {
                opacity: 0.5;
                filter: alpha(opacity=100);
                /* For IE8 and earlier */
            }

            .detailgreen {
                text-align: center;
                background: url(/images/colorgreen.png);
                opacity: 1.0;
                filter: alpha(opacity=50);
                background-repeat: no-repeat;
                background-size: 90% 90%;
                background-position: center;

                /* color: black; */
            }

            .detailred {
                text-align: center;
                background: url(/images/colorred.png);
                opacity: 1.0;
                filter: alpha(opacity=50);
                background-repeat: no-repeat;
                background-size: 90% 90%;
                background-position: center;

                /* color: white; */
            }

            .detailyellow {
                text-align: center;
                background: url(/images/coloryellow.png);
                opacity: 1.0;
                filter: alpha(opacity=50);
                background-repeat: no-repeat;
                background-size: 90% 90%;
                background-position: center;

                /* color: white; */
            }

            /* #table {
                overflow: auto;
            } */

            /* #moreDetails {
                width: 30%; */

            /* height: auto; */

            /* background-color: rgb(245, 245, 245);
                border-top-left-radius: 5px;
                border-top-right-radius: 5px;
                border-bottom-right-radius: 5px;
                border-bottom-left-radius: 5px;
                box-shadow: 0.5px; */

            /* } */

            #overlay {
                position: absolute;
                top: 0;
                left: 0;
                right: 0;
                bottom: 0;
                display: flex;
                flex-direction: column;
                align-items: center;
                justify-content: center;
                z-index: 2;
            }
        </style>
        <custom-style>
            <style is="custom-style">
                paper-input.inputnone {
                    --paper-input-container-input: {
                        font-size: 10px;
                    }
                }
            </style>
        </custom-style>
        <iron-ajax auto url="{{urluser}}" handle-as="json" method="GET" on-response="_userLoaded"></iron-ajax>

        <!-- group -->
        <iron-ajax auto url="{{urlGroup}}" handle-as="json" method="GET" on-response="_groupLoaded"></iron-ajax>
        <iron-ajax auto url="{{urlAgent}}" handle-as="json" method="GET" on-response="_agentLoaded"></iron-ajax>
        <!-- <iron-ajax auto url="{{urlJoin}}" params='{}' handle-as="json" method="GET" on-response="_joinLoaded" loading="{{loadingData}}" debounce-duration="300"></iron-ajax> -->
        <!-- allocation -->
        <iron-ajax id="workspace" url="{{urlFilterworkspace}}" handle-as="json" method="GET" on-response="_urlFilterworkspaceloaded"></iron-ajax>
        <iron-ajax id="startalloc" url="{{urlFilterStart}}" handle-as="json" method="GET" on-response="_urlFilterStartloaded"></iron-ajax>
        <iron-ajax id="endalloc" url="{{urlFilterend}}" handle-as="json" method="GET" on-response="_urlFilterend"></iron-ajax>
        <!-- availability -->
        <iron-ajax id="startavail" url="{{Startavail}}" handle-as="json" method="GET" on-response="_startavailloaded"></iron-ajax>
        <iron-ajax id="endavail" url="{{Endavail}}" handle-as="json" method="GET" on-response="_endavailloaded"></iron-ajax>
        <!-- blockings -->
        <iron-ajax id="startblock" url="{{Startblockings}}" handle-as="json" method="GET" on-response="_startblockloaded"></iron-ajax>
        <iron-ajax id="endblock" url="{{Endblockings}}" handle-as="json" method="GET" on-response="_endblockloaded"></iron-ajax>
        <iron-pages selected="[[route.path]]" attr-for-selected="name" fallback-selection="view404" role="main">
            <div name="">
                <app-header-layout fullbleed has-scrolling-region>
                    <app-header fixed slot="header">
                        <app-toolbar>
                            <paper-icon-button class="menu" icon="my-icons:menu" drawer-toggle on-tap="toggleDrawer"></paper-icon-button>
                            <div main-title>Agent Inquiry</div>
                        </app-toolbar>
                    </app-header>

                    <!-- <iron-ajax auto url="src/sampleData.json" on-response="_handleResponse"></iron-ajax> -->

                    <div class="card">
                        <div style="display: inline;" id="dateandRoom">
                            <div style="display: flex">
                                <div style="display: flex">
                                    <template is="dom-if" if="{{checkRole(role)}}">
                                        <paper-dropdown-input label="Select Group" items='[[groupItems]]' filter-property="group" value="{{group}}">
                                            <template>
                                                <template is="dom-repeat" items="[[items]]" as="item">
                                                    <paper-item>[[item.group]]</paper-item>
                                                </template>
                                            </template>
                                        </paper-dropdown-input>
                                        <paper-dropdown-input style="margin-left: 10px;" label="Select Agent" items='[[agentsload]]' filter-property="code" value="{{code}}">
                                            <template>
                                                <template is="dom-repeat" items="[[items]]" as="item">
                                                    <paper-item label="[[item.code]]">[[item.name]]</paper-item>
                                                </template>
                                            </template>
                                        </paper-dropdown-input>
                                    </template>
                                    <div style="display: flex; margin-left: 20px;">
                                        <paper-input label="Check in" type="date" value="{{checkin}}" max="{{checkout}}">
                                            <iron-icon icon="my-icons:date-range" slot="prefix"></iron-icon>
                                        </paper-input>
                                    </div>
                                    <div style="display: flex; margin-left: 20px;">
                                        <paper-input label="Check out" type="date" value="{{checkout}}" min="{{checkin}}">
                                            <iron-icon icon="my-icons:date-range" slot="prefix"></iron-icon>
                                        </paper-input>
                                    </div>
                                    <paper-button id="inquire" class="search" style="margin-top: 23px;" on-tap="_submitInquiry">
                                        <iron-icon icon="my-icons:search"></iron-icon>&nbsp;Find
                                    </paper-button>
                                </div>
                            </div>
                        </div>
                        <hr>
                        <div id="overlay">
                            <paper-spinner id="spinner" active></paper-spinner>
                        </div>
                        <div id="errorMsgDiv" style="display: none;">
                            <iron-icon icon="my-icons:error-outline"></iron-icon>
                            &nbsp;{{validationMessage}}
                            <iron-icon icon="my-icons:close" style="float: right;margin-right:10px;width: 20px;height: 20px;color:gray;cursor: pointer"
                                on-tap="closeerror"></iron-icon>
                        </div>
                        <!-- <div id="alltable"> -->
                        <div class="table" id="tables">
                            <table id="hotels" style="display: none">
                            </table>
                        </div>
                    </div>
                </app-header-layout>
        </iron-pages>
        <div id="moreDetails" class="card" horizontal-align="left" style="display: none;">
            <div>
                <div style="font-size: 12px;">
                    <paper-input class="inputnone" style="margin-bottom: -20px;margin-top: -15px;" always-float-label label="Hotel" value=" {{hotel}}">
                        <iron-icon icon="my-icons:location-city" slot="prefix" style="color: gray;width: 18px;height: 18px;"></iron-icon>
                    </paper-input>
                    <paper-input class="inputnone" style="margin-bottom: -20px;" always-float-label label="Room" value=" {{rooms}}">
                        <iron-icon icon="my-icons:hotel" slot="prefix" style="color: gray;width: 18px;height: 18px;"></iron-icon>
                    </paper-input>
                    <paper-input class="inputnone" style="margin-bottom: -20px;" always-float-label label="Date" value=" {{cdate}}">
                        <iron-icon icon="my-icons:date-range" slot="prefix" style="color: gray;width: 18px;height: 18px;"></iron-icon>
                    </paper-input>
                    <div id="peakseason">
                        <paper-input class="inputnone" style="margin-bottom: -20px;" always-float-label label="Season" value=" {{season}}">
                            <iron-icon icon="my-icons:today" slot="prefix" style="color: gray;width: 18px;height: 18px;"></iron-icon>
                        </paper-input>
                    </div>
                </div>
                <br>
                <div>
                    <div style="font-size: 14px;">
                        <b>AVAILABILITY</b>
                    </div>
                    <div>Status:
                        <span id="statuses">{{status}}</span>
                    </div>
                    <div> Last Updated:
                        <span style="margin-left: 45px">
                            <time-ago datetime$="{{_timeStampToDateTime(lastupdateavail)}}">{{_timeStampToDateTime(lastupdateavail)}}</time-ago>
                        </span>
                    </div>
                </div>
                <hr id="alloc">
                <div id="allocation">
                    <div style="font-size: 14px;">
                        <b>ALLOCATION</b>
                    </div>
                    <div id="tabikobo">
                        <b>Tabikobo</b>
                        <div>Room Qty:
                            <span style="margin-left: 65px">{{tballocation}}</span>
                        </div>
                        <div id="cutoff"> Cut-Off Date:
                            <span style="margin-left: 50px">{{tbcutoffdate}}</span>
                        </div>
                        <div> Last Updated:
                            <span style="margin-left: 45px">
                                <time-ago datetime$="{{_timeStampToDateTime(lastupdatealloctb)}}">{{_timeStampToDateTime(lastupdatealloctb)}}</time-ago>
                            </span>
                        </div>
                    </div>
                    <div id="ptn">
                        <b>PTN</b>
                        <div>Room Qty:
                            <span style="margin-left: 65px">{{allocation}}</span>
                        </div>
                        <div id="cutoff"> Cut-Off Date:
                            <span style="margin-left: 50px">{{cutoffdate}}</span>
                        </div>
                        <div> Last Updated:
                            <span style="margin-left: 45px">
                                <time-ago datetime$="{{_timeStampToDateTime(lastupdatealloc)}}">{{_timeStampToDateTime(lastupdatealloc)}}</time-ago>
                            </span>
                        </div>
                    </div>

                </div>
                <hr id="block">
                <div id="blocking">
                    <div style="font-size: 14px;">
                        <b>BLOCKING</b>
                    </div>
                    <div>Room Qty:
                        <span style="margin-left: 65px">{{blocking}}</span>
                    </div>
                    <div> Cancellation Date:
                        <span style="margin-left: 15px">{{cancel}}</span>
                    </div>
                    <div id=""> Last Updated:
                        <span style="margin-left: 45px">
                            <time-ago datetime$="{{_timeStampToDateTime(lastupdateblock)}}">{{_timeStampToDateTime(lastupdateblock)}}</time-ago>
                        </span>
                    </div>
                </div>
                <hr id="bookingshr" style="display: none;">
                <div id="bookings" style="display:none;">
                    <div style="font-size: 14px;">
                        <b>BOOKING</b>
                    </div>
                    <div>
                        <span>To Deduct from:</span>
                        <span style="margin-left: 30px;">{{source}}&nbsp;{{booking}}</span>
                    </div>
                    <div id=""> Last Updated:
                        <span style="margin-left: 45px">
                            <time-ago datetime$="{{_timeStampToDateTime(lastupdatebook)}}">{{_timeStampToDateTime(lastupdatebook)}}</time-ago>
                        </span>
                    </div>
                </div>
            </div>
        </div>
        <!-- <div class="card" id="loading" style="display: none">
            <span style="font-size: 18px;">
                <b>Loading Data.......</b>
            </span>
        </div> -->
    </template>

    <script>
        Polymer({
            is: 'my-inquiry2',
            properties: {
                code: String,
                checkin: { type: String, observer: 'checkinChange' },
                checkout: String,
                checkoutMax: String,
                stardate: String,
                enddate: String,
                hotelId: String,
                groupworkspace: Object,
                accountKey: String,
                status: String,
                from: String,
                group: String,
                ptngroup: String,
                tabigroup: String

            },
            observers: [
                '_endCheckout(checkout)',
                '_tappedChanged(tapped)',
                '_tappedChangedC(opened)',
                '_createTable(checkin,checkout,data,ptngroup,tabigroup)',
                '_groupChanged(group)',
                '_codeChanged(code)'
            ],
            ready() {
                this.urlGroup = 'group/read';
                this.urluser = '/user/getkey/' + this.accountKey;
                this.urlAgent = '/agent/read';
                Polymer.dom(this.root).querySelector("#overlay").style.display = 'none';
                Polymer.dom(this.root).querySelector("#spinner").active = false;
                Polymer.dom(this.root).querySelector("#inquire").disabled = false;

            },
            _groupChanged(e) {
                if (e) {
                    Polymer.dom(this.root).querySelector("#inquire").disabled = false;
                    Polymer.dom(this.root).querySelector("#tables").setAttribute("style", "display:none");
                }
            },
            _codeChanged(f) {
                if (f) {
                    Polymer.dom(this.root).querySelector("#inquire").disabled = false;
                    Polymer.dom(this.root).querySelector("#tables").setAttribute("style", "display:none");
                }
            },

            _agentLoaded(data) {
                if (data.detail.response.data) {
                    this.agentsload = data.detail.response.data;
                    // Polymer.dom(this.root).querySelector("#tables").setAttribute("style", "display:none");
                }
            },
            checkRole(c) {
                if (c) {
                    if (c === "Admin" || c === "Staff") return true;
                    else { }
                }
            },
            checkinChange(e) {
                if (e) {
                    Polymer.dom(this.root).querySelector("#tables").setAttribute("style", "display:none");
                    this.from = e;
                    var _maxDate = new Date(e);
                    _maxDate.setMonth(_maxDate.getMonth() + 1);
                    this.checkoutMax = _maxDate.getFullYear() + "-" + ("0" + (_maxDate.getMonth() + 1)).slice(-2) + "-" + ("0" + (_maxDate.getDate() - 1)).slice(-2)
                    Polymer.dom(this.root).querySelector("#inquire").disabled = false;
                }
            },
            _tappedChangedC(f) {
                Polymer.dom(this.root).querySelector("#moreDetails").setAttribute("style", "display:none");
                // if (this.$.moreDetails.opened == true) {
                //     this.$.moreDetails.opened = false;
                // }
            },
            _tappedChanged(e) {
                if (e) {
                    Polymer.dom(this.root).querySelector("#moreDetails").setAttribute("style", "display:block;position:fixed;top:50px;width:300px;font-size:small");
                    var [hotel, rooms, stat, avlastupd, nonpeak, peak, high, seasondates, allolastupd, blocking, cancel, bloclastupd, booking, booksource, booklastupd, pdayscutoff, nonpdayscutoff, highcutoff, currentdate, ispeak, tbnonpeak, tbpeak, tbhigh, tballolastupd, tbpdayscutoff, tbnonpdayscutoff, tbhighcutoff] = e.split("~");

                    var newdate = new Date(currentdate);
                    newdate.setDate(newdate.getDate() - parseInt(nonpdayscutoff));
                    var _cutoffnpeak = newdate.getFullYear() + "-" + ("0" + (newdate.getMonth() + 1)).slice(-2) + "-" + ("0" + newdate.getDate()).slice(-2);
                    var dates = new Date(currentdate);
                    dates.setDate(dates.getDate() - parseInt(pdayscutoff));
                    var _cutoffpeak = dates.getFullYear() + "-" + ("0" + (dates.getMonth() + 1)).slice(-2) + "-" + ("0" + dates.getDate()).slice(-2);

                    var highdates = new Date(currentdate);
                    highdates.setDate(highdates.getDate() - parseInt(highcutoff));
                    var _cutoffhigh = highdates.getFullYear() + "-" + ("0" + (highdates.getMonth() + 1)).slice(-2) + "-" + ("0" + highdates.getDate()).slice(-2);

                    var tbnewdate = new Date(currentdate);
                    tbnewdate.setDate(tbnewdate.getDate() - parseInt(tbnonpdayscutoff));
                    var tb_cutoffnpeak = tbnewdate.getFullYear() + "-" + ("0" + (tbnewdate.getMonth() + 1)).slice(-2) + "-" + ("0" + tbnewdate.getDate()).slice(-2);

                    var tbdates = new Date(currentdate);
                    tbdates.setDate(tbdates.getDate() - parseInt(tbpdayscutoff));
                    var tb_cutoffpeak = tbdates.getFullYear() + "-" + ("0" + (tbdates.getMonth() + 1)).slice(-2) + "-" + ("0" + tbdates.getDate()).slice(-2);

                    var tbhighdates = new Date(currentdate);
                    tbhighdates.setDate(tbhighdates.getDate() - parseInt(tbhighcutoff));
                    var tb_cutoffhigh = tbhighdates.getFullYear() + "-" + ("0" + (tbhighdates.getMonth() + 1)).slice(-2) + "-" + ("0" + tbhighdates.getDate()).slice(-2);

                    var currentdates = new Date(currentdate);
                    var _currentDates = currentdates.getFullYear() + "-" + ("0" + (currentdates.getMonth() + 1)).slice(-2) + "-" + ("0" + currentdates.getDate()).slice(-2);
                    if (seasondates == "") { Polymer.dom(this.root).querySelector("#peakseason").setAttribute("style", "display:none"); }
                    else { Polymer.dom(this.root).querySelector("#peakseason").setAttribute("style", "display:block"); }
                    if ((nonpeak && peak && high) == 0) {
                        Polymer.dom(this.root).querySelector("#allocation").setAttribute("style", "display:none");
                        Polymer.dom(this.root).querySelector("#alloc").setAttribute("style", "display:none");
                    }
                    else {
                        Polymer.dom(this.root).querySelector("#allocation").setAttribute("style", "display:block");
                        Polymer.dom(this.root).querySelector("#alloc").setAttribute("style", "display:block");
                    }

                    if (this.ptngroup && this.tabigroup) {
                        Polymer.dom(this.root).querySelector("#allocation").setAttribute("style", "display:block");
                        Polymer.dom(this.root).querySelector("#alloc").setAttribute("style", "display:block");
                        Polymer.dom(this.root).querySelector("#tabikobo").setAttribute("style", "display:block");
                        Polymer.dom(this.root).querySelector("#ptn").setAttribute("style", "display:block");
                    }
                    else if (!this.ptngroup && this.tabigroup) {
                        Polymer.dom(this.root).querySelector("#allocation").setAttribute("style", "display:block");
                        Polymer.dom(this.root).querySelector("#alloc").setAttribute("style", "display:block");
                        Polymer.dom(this.root).querySelector("#tabikobo").setAttribute("style", "display:block");
                        Polymer.dom(this.root).querySelector("#ptn").setAttribute("style", "display:none");
                    }
                    else if (this.ptngroup && !this.tabigroup) {
                        Polymer.dom(this.root).querySelector("#allocation").setAttribute("style", "display:block");
                        Polymer.dom(this.root).querySelector("#alloc").setAttribute("style", "display:block");
                        Polymer.dom(this.root).querySelector("#tabikobo").setAttribute("style", "display:none");
                        Polymer.dom(this.root).querySelector("#ptn").setAttribute("style", "display:block");
                    }
                    else {
                        Polymer.dom(this.root).querySelector("#tabikobo").setAttribute("style", "display:none");
                        Polymer.dom(this.root).querySelector("#ptn").setAttribute("style", "display:none");
                    }

                    if (stat === "open") { Polymer.dom(this.root).querySelector("#statuses").setAttribute("style", "color: green; margin-left: 85px"); }
                    else if (stat === "limited") { Polymer.dom(this.root).querySelector("#statuses").setAttribute("style", "color:yellow; margin-left: 85px"); }
                    else if (stat === "closed") { Polymer.dom(this.root).querySelector("#statuses").setAttribute("style", "color:red; margin-left: 85px"); }
                    else { Polymer.dom(this.root).querySelector("#statuses").setAttribute("style", "color:black; margin-left: 85px"); }

                    this.lastupdateavail = avlastupd;
                    this.lastupdatealloc = allolastupd;
                    this.lastupdatealloctb = tballolastupd;
                    this.lastupdateblock = bloclastupd;
                    this.lastupdatebook = booklastupd;
                    this.season = seasondates;
                    this.cdate = _currentDates;
                    this.hotel = hotel;
                    this.rooms = rooms;
                    this.status = stat;
                    if (seasondates === "Peak Season") {
                        if (blocking != 0) {
                            if (booking != 0) {
                                this.allocationleft = parseInt(peak) - parseInt(booking);
                                this.allocation = parseInt(peak);
                                this.tballocationleft = parseInt(tbpeak) - parseInt(booking);
                                this.tballocation = parseInt(tbpeak);
                                this.source = booksource;
                                this.booking = booking;
                                this.cancel = cancel;
                                this.blocking = blocking;
                                this.cutoffdate = _cutoffpeak;
                                this.tbcutoffdate = tb_cutoffpeak;
                                this.$.moreDetails.opened = true;
                                Polymer.dom(this.root).querySelector("#bookingshr").setAttribute("style", "display:block");
                                Polymer.dom(this.root).querySelector("#bookings").setAttribute("style", "display:block");
                            } else {
                                this.allocation = parseInt(peak);
                                this.tballocation = parseInt(tbpeak);
                                this.cancel = cancel;
                                this.blocking = blocking;
                                this.cutoffdate = _cutoffpeak;
                                this.tbcutoffdate = tb_cutoffpeak;
                                this.$.moreDetails.opened = true;
                                Polymer.dom(this.root).querySelector("#bookingshr").setAttribute("style", "display:none");
                                Polymer.dom(this.root).querySelector("#bookings").setAttribute("style", "display:none");
                            }
                            Polymer.dom(this.root).querySelector("#block").setAttribute("style", "display:block");
                            Polymer.dom(this.root).querySelector("#blocking").setAttribute("style", "display:block");
                        } else {
                            if (booking != 0) {
                                this.allocationleft = parseInt(peak) - parseInt(booking);
                                this.allocation = parseInt(peak);
                                this.tballocationleft = parseInt(tbpeak) - parseInt(booking);
                                this.tballocation = parseInt(tbpeak);
                                this.source = booksource;
                                // this.allocation = parseInt(peak) - parseInt(booking);
                                this.booking = booking;
                                this.cutoffdate = _cutoffpeak;
                                this.tbcutoffdate = tb_cutoffpeak;
                                this.$.moreDetails.opened = true;
                                Polymer.dom(this.root).querySelector("#bookingshr").setAttribute("style", "display:block");
                                Polymer.dom(this.root).querySelector("#bookings").setAttribute("style", "display:block");
                            } else {
                                this.allocation = parseInt(peak);
                                this.tballocation = parseInt(tbpeak);
                                this.cutoffdate = _cutoffpeak;
                                this.tbcutoffdate = tb_cutoffpeak;
                                this.$.moreDetails.opened = true;
                                Polymer.dom(this.root).querySelector("#bookingshr").setAttribute("style", "display:none");
                                Polymer.dom(this.root).querySelector("#bookings").setAttribute("style", "display:none");
                            }
                            Polymer.dom(this.root).querySelector("#block").setAttribute("style", "display:none");
                            Polymer.dom(this.root).querySelector("#blocking").setAttribute("style", "display:none");
                        }
                    } else if (seasondates === "High Season") {
                        if (blocking != 0) {
                            if (booking != 0) {
                                this.allocationleft = parseInt(high) - parseInt(booking);
                                this.allocation = parseInt(high);
                                this.tballocationleft = parseInt(tbhigh) - parseInt(booking);
                                this.tballocation = parseInt(tbhigh);
                                this.source = booksource;
                                // this.allocation = parseInt(high) - parseInt(booking);
                                this.booking = booking;
                                this.cancel = cancel;
                                this.blocking = blocking;
                                this.cutoffdate = _cutoffhigh;
                                this.tbcutoffdate = tb_cutoffhigh;
                                this.$.moreDetails.opened = true;
                                Polymer.dom(this.root).querySelector("#bookingshr").setAttribute("style", "display:block");
                                Polymer.dom(this.root).querySelector("#bookings").setAttribute("style", "display:block");
                            } else {
                                this.allocation = parseInt(high);
                                this.tballocation = parseInt(tbhigh);
                                this.cancel = cancel;
                                this.blocking = blocking;
                                this.cutoffdate = _cutoffhigh;
                                this.tbcutoffdate = tb_cutoffhigh;
                                this.$.moreDetails.opened = true;
                                Polymer.dom(this.root).querySelector("#bookingshr").setAttribute("style", "display:none");
                                Polymer.dom(this.root).querySelector("#bookings").setAttribute("style", "display:none");
                            }
                            Polymer.dom(this.root).querySelector("#block").setAttribute("style", "display:block");
                            Polymer.dom(this.root).querySelector("#blocking").setAttribute("style", "display:block");
                        } else {
                            if (booking != 0) {
                                this.allocationleft = parseInt(high) - parseInt(booking);
                                this.allocation = parseInt(high);
                                this.tballocationleft = parseInt(tbhigh) - parseInt(booking);
                                this.tballocation = parseInt(tbhigh);
                                this.source = booksource;
                                // this.allocation = parseInt(high) - parseInt(booking);
                                this.booking = booking;
                                this.cutoffdate = _cutoffhigh;
                                this.tbcutoffdate = tb_cutoffhigh;
                                this.$.moreDetails.opened = true;
                                Polymer.dom(this.root).querySelector("#bookingshr").setAttribute("style", "display:block");
                                Polymer.dom(this.root).querySelector("#bookings").setAttribute("style", "display:block");
                            } else {
                                this.allocation = parseInt(high);
                                this.tballocation = parseInt(tbhigh);
                                this.cutoffdate = _cutoffhigh;
                                this.tbcutoffdate = tb_cutoffhigh;
                                this.$.moreDetails.opened = true;
                                Polymer.dom(this.root).querySelector("#bookingshr").setAttribute("style", "display:none");
                                Polymer.dom(this.root).querySelector("#bookings").setAttribute("style", "display:none");
                            }
                            Polymer.dom(this.root).querySelector("#block").setAttribute("style", "display:none");
                            Polymer.dom(this.root).querySelector("#blocking").setAttribute("style", "display:none");
                        }
                    } else {
                        if (blocking != 0) {
                            if (booking != 0) {
                                this.allocationleft = parseInt(nonpeak) - parseInt(booking);
                                this.allocation = parseInt(nonpeak);
                                this.tballocationleft = parseInt(tbnonpeak) - parseInt(booking);
                                this.tballocation = parseInt(tbnonpeak);
                                this.source = booksource;
                                // this.allocation = parseInt(nonpeak) - parseInt(booking);
                                this.booking = booking;
                                this.cancel = cancel;
                                this.blocking = blocking;
                                this.cutoffdate = _cutoffnpeak;
                                this.tbcutoffdate = tb_cutoffnpeak;
                                this.$.moreDetails.opened = true;
                                Polymer.dom(this.root).querySelector("#bookingshr").setAttribute("style", "display:block");
                                Polymer.dom(this.root).querySelector("#bookings").setAttribute("style", "display:block");
                            } else {
                                this.allocation = parseInt(nonpeak);
                                this.tballocation = parseInt(tbnonpeak);
                                this.cancel = cancel;
                                this.blocking = blocking;
                                this.cutoffdate = _cutoffnpeak;
                                this.tbcutoffdate = tb_cutoffnpeak;
                                this.$.moreDetails.opened = true;
                                Polymer.dom(this.root).querySelector("#bookingshr").setAttribute("style", "display:none");
                                Polymer.dom(this.root).querySelector("#bookings").setAttribute("style", "display:none");
                            }
                            Polymer.dom(this.root).querySelector("#block").setAttribute("style", "display:block");
                            Polymer.dom(this.root).querySelector("#blocking").setAttribute("style", "display:block");
                        } else {
                            if (booking != 0) {
                                this.allocationleft = parseInt(nonpeak) - parseInt(booking);
                                this.allocation = parseInt(nonpeak);
                                this.tballocationleft = parseInt(tbnonpeak) - parseInt(booking);
                                this.tballocation = parseInt(tbnonpeak);
                                this.source = booksource;
                                // this.allocation = parseInt(nonpeak) - parseInt(booking);
                                this.booking = booking;
                                this.cutoffdate = _cutoffnpeak;
                                this.tbcutoffdate = tb_cutoffnpeak;
                                this.$.moreDetails.opened = true;
                                Polymer.dom(this.root).querySelector("#bookingshr").setAttribute("style", "display:block");
                                Polymer.dom(this.root).querySelector("#bookings").setAttribute("style", "display:block");
                            } else {
                                this.allocation = parseInt(nonpeak);
                                this.tballocation = parseInt(tbnonpeak);
                                this.cutoffdate = _cutoffnpeak;
                                this.tbcutoffdate = tb_cutoffnpeak;
                                this.$.moreDetails.opened = true;
                                Polymer.dom(this.root).querySelector("#bookingshr").setAttribute("style", "display:none");
                                Polymer.dom(this.root).querySelector("#bookings").setAttribute("style", "display:none");
                            }
                            Polymer.dom(this.root).querySelector("#block").setAttribute("style", "display:none");
                            Polymer.dom(this.root).querySelector("#blocking").setAttribute("style", "display:none");
                        }
                    }
                }
            },
            _hotelIdChanged(j) {
                this.stardate = this.checkin;
                this.roomSelected = j;
                this.urlFilterworkspace = '/group/filter/' + j;
                this.$.workspace.handleAs = "json";
                this.$.workspace.generateRequest();
                Polymer.dom(this.root).querySelector("#tables").setAttribute("style", "display:none");
            },
            _urlFilterworkspaceloaded(data) {
                if (data.detail.response.data) {
                    this.groupworkspace = data.detail.response.data;
                    Polymer.dom(this.root).querySelector("#inquire").disabled = false;
                }
            },
            _monthFormat(e) {
                var monthNames = ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"]
                return monthNames[e];
            },
            _endCheckout(f) {
                if (f) {
                    // var x = new Date(f).getMonth();
                    // var y = new Date(f).getFullYear();
                    // var z = new Date(f).getDate();
                    // this.checkout = y + "/" + this._monthFormat(x) + "/" + z;
                    Polymer.dom(this.root).querySelector("#tables").setAttribute("style", "display:none");
                    this.to = f;
                    // var table = Polymer.dom(this.root).querySelector('#hotels');
                    // while (table.hasChildNodes()) {
                    //     table.removeChild(table.lastChild);
                    // }
                    Polymer.dom(this.root).querySelector("#inquire").disabled = false;
                }
            },
            _userLoaded(data) {
                if (data.detail.response.data) {
                    this.group = data.detail.response.data.group;
                    this.agent = data.detail.response.data.agent;
                    this.role = data.detail.response.data.role;
                    this.ptngroup = data.detail.response.data.access.PTN;
                    this.tabigroup = data.detail.response.data.access.Tabikobo;
                }
            },
            _submitInquiry() {
                Polymer.dom(this.root).querySelector("#overlay").style.display = 'flex';
                Polymer.dom(this.root).querySelector("#spinner").active = true;
                Polymer.dom(this.root).querySelector("#inquire").disabled = true;
                // Polymer.dom(this.root).querySelector("#loading").setAttribute("style", "display:block;margin-top:20%");
                if (this.role === "Admin" || this.role === "Staff") {
                    if (this.to && this.from && this.group && this.code) {
                        // Polymer.dom(this.root).querySelector("#tables").setAttribute("style", "display:block");
                        this.urlFilterend = '/allocation/inquirySource2/' + this.from + "_" + this.to + "_" + this.group + "_" + this.code;
                        this.$.endalloc.generateRequest();
                        Polymer.dom(this.root).querySelector("#inquire").disabled = true;
                    } else {
                        var errormsg = Polymer.dom(this.root).querySelector("#errorMsgDiv");
                        errormsg.setAttribute("style", "font-size:12px; display: block; background-color:red; color:white; text-align:center; border-radius: 5px; opacity:0.5; padding:5px");
                        this.validationMessage = 'Oops!! dont leave empty fields above';
                        Polymer.dom(this.root).querySelector("#overlay").style.display = 'none';
                        Polymer.dom(this.root).querySelector("#spinner").active = false;
                        Polymer.dom(this.root).querySelector("#inquire").disabled = false;
                    }
                }
                else {
                    if (this.to && this.from) {
                        // Polymer.dom(this.root).querySelector("#tables").setAttribute("style", "display:block");
                        this.urlFilterend = '/allocation/inquirySource2/' + this.from + "_" + this.to + "_" + this.group + "_" + this.agent;
                        this.$.endalloc.generateRequest();
                        Polymer.dom(this.root).querySelector("#inquire").disabled = true;
                    } else {
                        var errormsg = Polymer.dom(this.root).querySelector("#errorMsgDiv");
                        errormsg.setAttribute("style", "font-size:12px; display: block; background-color:red; color:white; text-align:center; border-radius: 5px; opacity:0.5; padding:5px");
                        this.validationMessage = 'Oops!! dont leave empty fields above';
                        Polymer.dom(this.root).querySelector("#overlay").style.display = 'none';
                        Polymer.dom(this.root).querySelector("#spinner").active = false;
                        Polymer.dom(this.root).querySelector("#inquire").disabled = false;
                    }
                }
            },
            closeerror() {
                Polymer.dom(this.root).querySelector("#errorMsgDiv").setAttribute("style", "display:none");
            },
            _urlFilterend(data) {
                if (data.detail.response.data) {
                    this.data = data.detail.response.data;
                    console.log(this.data);
                    // Polymer.dom(this.root).querySelector("#loading").setAttribute("style", "display:none");
                    Polymer.dom(this.root).querySelector("#tables").setAttribute("style", "display:block");
                    Polymer.dom(this.root).querySelector("#overlay").style.display = 'none';
                    Polymer.dom(this.root).querySelector("#spinner").active = false;
                    Polymer.dom(this.root).querySelector("#hotels").setAttribute("style", " border-collapse: collapse;width: 100 %;transition-delay: 2s");
                }
            },
            _createTable(checkin, checkout, data, ptngroup, tabigroup) {
                var startDate = new Date(checkin); //YYYY-MM-DD
                var endDate = new Date(checkout); //YYYY-MM-DD
                var dateArr = getDateArray(startDate, endDate);
                function getDateArray(start, end) {
                    var arr = new Array();
                    var dt = new Date(start);
                    while (dt <= end) {
                        arr.push(new Date(dt));
                        dt.setDate(dt.getDate() + 1);
                    }
                    return arr;
                }
                var myDates = [];
                var myDates2 = [];
                for (var i = 0; i < dateArr.length; i++) {
                    var dates = formatDate(dateArr[i]);
                    myDates.push(dates);
                    myDates2.push(_monthFormat(dates));
                }
                function _monthFormat(e) {
                    var [y, m, d] = e.split("-");
                    if (m < 10) {
                        var finalMonth = m.substring(1, 2) - 1;
                    } else {
                        var finalMonth = m - 1;
                    }
                    var monthNames = ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"]
                    return monthNames[finalMonth] + "-" + d;
                }
                function formatDate(date) {
                    var d = new Date(date),
                        month = '' + (d.getMonth() + 1),
                        day = '' + d.getDate(),
                        year = d.getFullYear();
                    if (month.length < 2) month = '0' + month;
                    if (day.length < 2) day = '0' + day;
                    return [year, month, day].join('-');
                }

                if (data) {
                    // if (ptngroup && tabigroup) {
                    var table = Polymer.dom(this.root).querySelector('#hotels');
                    while (table.hasChildNodes()) {
                        table.removeChild(table.lastChild);
                    }

                    table.setAttribute("style", "table-layout: fixed;");

                    //table header
                    // var div1 = document.createElement('div');
                    var tr1 = document.createElement('tr');
                    var thHotel = document.createElement('th');
                    var hotelName = document.createTextNode("Hotels");
                    thHotel.appendChild(hotelName);
                    thHotel.setAttribute("class", "hotel");
                    thHotel.setAttribute("style", "text-align:center;padding-top:10px;height: 38px;");
                    // thHotel.style.textAlign = "center";
                    tr1.appendChild(thHotel);
                    var thRoom = document.createElement('th');
                    var roomName = document.createTextNode("Rooms");
                    thRoom.appendChild(roomName);
                    thRoom.setAttribute("class", "room");
                    thRoom.setAttribute("style", "text-align:center;padding-top:10px;height: 38px;");
                    // thRoom.style.textAlign = "center";
                    tr1.appendChild(thRoom);
                    for (var y = 0; y < myDates.length; y++) {
                        var thDates = document.createElement('th');
                        var dateHeader = document.createTextNode(myDates2[y]);
                        thDates.appendChild(dateHeader);
                        thDates.setAttribute("class", "detail");
                        thDates.style.textAlign = "center";
                        tr1.appendChild(thDates);
                    }
                    table.appendChild(tr1);
                    // div1.appendChild(table);

                    //table header
                    //table td / data
                    data.forEach(element => {
                        // console.log(element);
                        var tr2 = document.createElement('tr');
                        tr2.setAttribute("class", "trdetail");
                        var tdHotel = document.createElement('td');
                        var hotel = document.createTextNode(element.hotelname);
                        tdHotel.appendChild(hotel);
                        tdHotel.setAttribute("class", "hotel");
                        tdHotel.style.textAlign = "left";
                        // tdHotel.style.paddingLeft = "5px";
                        tr2.appendChild(tdHotel);
                        var tdRoom = document.createElement('td');
                        var room = document.createTextNode(element.roomname);
                        tdRoom.appendChild(room);
                        tdRoom.setAttribute("class", "room");
                        tdRoom.style.textAlign = "left";
                        // tdRoom.style.paddingLeft = "8px";
                        tr2.appendChild(tdRoom);
                        element.dates.forEach(cdate => {
                            if (this.ptngroup && this.tabigroup) {
                                if (cdate.details.availability.length > 0) {
                                    var tdDateData = document.createElement('td');
                                    if (cdate.details.allocation.length > 0) {
                                        if (cdate.details.seasondetails.length > 0) {
                                            // if ((cdate.details.seasondetails.length > 0 ? cdate.details.seasondetails[0].season : "") || (cdate.details.seasondetails.length > 0 ? cdate.details.seasondetails[1].season : "") == "Peak Season") {
                                            if ((cdate.details.seasondetails.length > 0 ? cdate.details.seasondetails[0].season : "") == "Peak Season") {
                                                if ((cdate.details.availability.length > 0 ? cdate.details.availability[0].classColor : "") === "green") {
                                                    if (cdate.details.blocking.length > 0) {
                                                        if (cdate.details.booking.length > 0) {
                                                            if (cdate.details.booking[0].deduction === "Blocking") {
                                                                var alloc = document.createTextNode((parseInt((cdate.details.allocation.length > 0 ? cdate.details.allocation[0].pk_qty : 0)) + parseInt((cdate.details.allocation.length > 1 ? cdate.details.allocation[1].pk_qty : 0)) + (parseInt((cdate.details.blocking.length > 0 ? cdate.details.blocking[0].block : 0)) - parseInt((cdate.details.booking.length > 0 ? cdate.details.booking[0].numrooms : 0)))));
                                                                tdDateData.appendChild(alloc);
                                                                tdDateData.style.textAlign = "center";
                                                                tdDateData.setAttribute("class", "detailgreen");
                                                                tdDateData.style.color = "black";
                                                                tr2.appendChild(tdDateData);
                                                            } else if (cdate.details.booking[0].deduction === "Allocation" && cdate.details.booking[0].group === "PTN") {
                                                                var alloc = document.createTextNode((((parseInt((cdate.details.allocation.length > 0 ? cdate.details.allocation[0].pk_qty : 0)) - parseInt((cdate.details.booking.length > 0 ? cdate.details.booking[0].numrooms : 0))) + parseInt((cdate.details.allocation.length > 1 ? cdate.details.allocation[1].pk_qty : 0))) + (parseInt((cdate.details.blocking.length > 0 ? cdate.details.blocking[0].block : 0)))));
                                                                tdDateData.appendChild(alloc);
                                                                tdDateData.style.textAlign = "center";
                                                                tdDateData.setAttribute("class", "detailgreen");
                                                                tdDateData.style.color = "black";
                                                                tr2.appendChild(tdDateData);
                                                            } else if (cdate.details.booking[0].deduction === "Allocation" && cdate.details.booking[0].group === "Tabikobo") {
                                                                var alloc = document.createTextNode(((parseInt((cdate.details.allocation.length > 0 ? cdate.details.allocation[0].pk_qty : 0))+ (parseInt((cdate.details.allocation.length > 1 ? cdate.details.allocation[1].pk_qty : 0))- parseInt((cdate.details.booking.length > 0 ? cdate.details.booking[0].numrooms : 0)))) + (parseInt((cdate.details.blocking.length > 0 ? cdate.details.blocking[0].block : 0)))));
                                                                tdDateData.appendChild(alloc);
                                                                tdDateData.style.textAlign = "center";
                                                                tdDateData.setAttribute("class", "detailgreen");
                                                                tdDateData.style.color = "black";
                                                                tr2.appendChild(tdDateData);
                                                            }
                                                        } else {
                                                            var alloc = document.createTextNode(parseInt((cdate.details.allocation.length > 0 ? cdate.details.allocation[0].pk_qty : 0)) + parseInt((cdate.details.allocation.length > 1 ? cdate.details.allocation[1].pk_qty : 0)) + parseInt((cdate.details.blocking.length > 0 ? cdate.details.blocking[0].block : 0)));
                                                            tdDateData.appendChild(alloc);
                                                            tdDateData.style.textAlign = "center";
                                                            tdDateData.setAttribute("class", "detailgreen");
                                                            tdDateData.style.color = "black";
                                                            tr2.appendChild(tdDateData);
                                                        }
                                                    }
                                                    else {
                                                        if (cdate.details.booking.length > 0) {
                                                            if (cdate.details.booking[0].deduction === "Allocation" && cdate.details.booking[0].group === "PTN") {
                                                                var alloc = document.createTextNode(((parseInt((cdate.details.allocation.length > 0 ? cdate.details.allocation[0].pk_qty : 0)) - parseInt((cdate.details.booking.length > 0 ? cdate.details.booking[0].numrooms : 0))) + parseInt((cdate.details.allocation.length > 1 ? cdate.details.allocation[1].pk_qty : 0))));
                                                                tdDateData.appendChild(alloc);
                                                                tdDateData.style.textAlign = "center";
                                                                tdDateData.setAttribute("class", "detailgreen");
                                                                tdDateData.style.color = "black";
                                                                tr2.appendChild(tdDateData);
                                                            }
                                                            else if (cdate.details.booking[0].deduction === "Allocation" && cdate.details.booking[0].group === "Tabikobo") {
                                                                var alloc = document.createTextNode((parseInt((cdate.details.allocation.length > 0 ? cdate.details.allocation[0].pk_qty : 0)) + (parseInt((cdate.details.allocation.length > 1 ? cdate.details.allocation[1].pk_qty : 0)) - parseInt((cdate.details.booking.length > 0 ? cdate.details.booking[0].numrooms : 0)))));
                                                                tdDateData.appendChild(alloc);
                                                                tdDateData.style.textAlign = "center";
                                                                tdDateData.setAttribute("class", "detailgreen");
                                                                tdDateData.style.color = "black";
                                                                tr2.appendChild(tdDateData);
                                                            }
                                                            else {
                                                                var alloc = document.createTextNode(parseInt((cdate.details.allocation.length > 0 ? cdate.details.allocation[0].pk_qty : 0)) + parseInt((cdate.details.allocation.length > 1 ? cdate.details.allocation[1].pk_qty : 0)));
                                                                tdDateData.appendChild(alloc);
                                                                tdDateData.style.textAlign = "center";
                                                                tdDateData.setAttribute("class", "detailgreen");
                                                                tdDateData.style.color = "black";
                                                                tr2.appendChild(tdDateData);
                                                            }
                                                        }
                                                        else {
                                                            var allocs = document.createTextNode(parseInt((cdate.details.allocation.length > 0 ? cdate.details.allocation[0].pk_qty : 0)) + parseInt((cdate.details.allocation.length > 1 ? cdate.details.allocation[1].pk_qty : 0)));
                                                            tdDateData.appendChild(allocs);
                                                            tdDateData.style.textAlign = "center";
                                                            tdDateData.setAttribute("class", "detailgreen");
                                                            tdDateData.style.color = "black";
                                                            tr2.appendChild(tdDateData);
                                                        }
                                                    }
                                                }
                                                if ((cdate.details.availability.length > 0 ? cdate.details.availability[0].classColor : "") === "yellow") {
                                                    if (cdate.details.blocking.length > 0) {
                                                        if (cdate.details.booking.length > 0) {
                                                            if (cdate.details.booking[0].deduction === "Blocking") {
                                                                var alloc = document.createTextNode((parseInt((cdate.details.allocation.length > 0 ? cdate.details.allocation[0].pk_qty : 0)) + parseInt((cdate.details.allocation.length > 1 ? cdate.details.allocation[1].pk_qty : 0)) + (parseInt((cdate.details.blocking.length > 0 ? cdate.details.blocking[0].block : 0)) - parseInt((cdate.details.booking.length > 0 ? cdate.details.booking[0].numrooms : 0)))));
                                                                tdDateData.appendChild(alloc);
                                                                tdDateData.style.textAlign = "center";
                                                                tdDateData.setAttribute("class", "detailyellow");
                                                                tdDateData.style.color = "black";
                                                                tr2.appendChild(tdDateData);
                                                            } else if (cdate.details.booking[0].deduction === "Allocation" && cdate.details.booking[0].group === "PTN") {
                                                                var alloc = document.createTextNode(((parseInt((cdate.details.allocation.length > 0 ? cdate.details.allocation[0].pk_qty : 0)) - parseInt((cdate.details.booking.length > 0 ? cdate.details.booking[0].numrooms : 0))) + parseInt((cdate.details.allocation.length > 1 ? cdate.details.allocation[1].pk_qty : 0)) + (parseInt((cdate.details.blocking.length > 0 ? cdate.details.blocking[0].block : 0)))));
                                                                tdDateData.appendChild(alloc);
                                                                tdDateData.style.textAlign = "center";
                                                                tdDateData.setAttribute("class", "detailyellow");
                                                                tdDateData.style.color = "black";
                                                                tr2.appendChild(tdDateData);
                                                            }
                                                            else if (cdate.details.booking[0].deduction === "Allocation" && cdate.details.booking[0].group === "Tabikobo") {
                                                                var alloc = document.createTextNode((parseInt((cdate.details.allocation.length > 0 ? cdate.details.allocation[0].pk_qty : 0)) + (parseInt((cdate.details.allocation.length > 1 ? cdate.details.allocation[1].pk_qty : 0)) - parseInt((cdate.details.booking.length > 0 ? cdate.details.booking[0].numrooms : 0))) + (parseInt((cdate.details.blocking.length > 0 ? cdate.details.blocking[0].block : 0)))));
                                                                tdDateData.appendChild(alloc);
                                                                tdDateData.style.textAlign = "center";
                                                                tdDateData.setAttribute("class", "detailyellow");
                                                                tdDateData.style.color = "black";
                                                                tr2.appendChild(tdDateData);
                                                            }
                                                        } else {
                                                            var alloc = document.createTextNode(parseInt((cdate.details.allocation.length > 0 ? cdate.details.allocation[0].pk_qty : 0)) + parseInt((cdate.details.allocation.length > 1 ? cdate.details.allocation[1].pk_qty : 0)) + parseInt((cdate.details.blocking.length > 0 ? cdate.details.blocking[0].block : 0)));
                                                            tdDateData.appendChild(alloc);
                                                            tdDateData.style.textAlign = "center";
                                                            tdDateData.setAttribute("class", "detailyellow");
                                                            tdDateData.style.color = "black";
                                                            tr2.appendChild(tdDateData);
                                                        }
                                                    }
                                                    else {
                                                        if (cdate.details.booking.length > 0) {
                                                            if (cdate.details.booking[0].deduction === "Allocation" && cdate.details.booking[0].group === "PTN") {
                                                                var alloc = document.createTextNode((parseInt((cdate.details.allocation.length > 0 ? cdate.details.allocation[0].pk_qty : 0)) - parseInt((cdate.details.booking.length > 0 ? cdate.details.booking[0].numrooms : 0))) + parseInt((cdate.details.allocation.length > 1 ? cdate.details.allocation[1].pk_qty : 0)));
                                                                tdDateData.appendChild(alloc);
                                                                tdDateData.style.textAlign = "center";
                                                                tdDateData.setAttribute("class", "detailyellow");
                                                                tdDateData.style.color = "black";
                                                                tr2.appendChild(tdDateData);
                                                            } 
                                                            else if (cdate.details.booking[0].deduction === "Allocation" && cdate.details.booking[0].group === "Tabikobo") {
                                                                var alloc = document.createTextNode(parseInt((cdate.details.allocation.length > 0 ? cdate.details.allocation[0].pk_qty : 0))  + (parseInt((cdate.details.allocation.length > 1 ? cdate.details.allocation[1].pk_qty : 0)) - parseInt((cdate.details.booking.length > 0 ? cdate.details.booking[0].numrooms : 0))));
                                                                tdDateData.appendChild(alloc);
                                                                tdDateData.style.textAlign = "center";
                                                                tdDateData.setAttribute("class", "detailyellow");
                                                                tdDateData.style.color = "black";
                                                                tr2.appendChild(tdDateData);
                                                            }
                                                            else {
                                                                var alloc = document.createTextNode(parseInt((cdate.details.allocation.length > 0 ? cdate.details.allocation[0].pk_qty : 0)) + parseInt((cdate.details.allocation.length > 1 ? cdate.details.allocation[1].pk_qty : 0)));
                                                                tdDateData.appendChild(alloc);
                                                                tdDateData.style.textAlign = "center";
                                                                tdDateData.setAttribute("class", "detailyellow");
                                                                tdDateData.style.color = "black";
                                                                tr2.appendChild(tdDateData);
                                                            }
                                                        } else {
                                                            var allocs = document.createTextNode(parseInt((cdate.details.allocation.length > 0 ? cdate.details.allocation[0].pk_qty : 0)) + parseInt((cdate.details.allocation.length > 1 ? cdate.details.allocation[1].pk_qty : 0)));
                                                            tdDateData.appendChild(allocs);
                                                            tdDateData.style.textAlign = "center";
                                                            tdDateData.setAttribute("class", "detailyellow");
                                                            tdDateData.style.color = "black";
                                                            tr2.appendChild(tdDateData);
                                                        }
                                                    }
                                                }
                                                if ((cdate.details.availability.length > 0 ? cdate.details.availability[0].classColor : "") === "red") {
                                                    if (cdate.details.blocking.length > 0) {
                                                        if (cdate.details.booking.length > 0) {
                                                            if (cdate.details.booking[0].deduction === "Blocking") {
                                                                var alloc = document.createTextNode((parseInt((cdate.details.allocation.length > 0 ? cdate.details.allocation[0].pk_qty : 0)) + parseInt((cdate.details.allocation.length > 1 ? cdate.details.allocation[1].pk_qty : 0)) + (parseInt((cdate.details.blocking.length > 0 ? cdate.details.blocking[0].block : 0)) - parseInt((cdate.details.booking.length > 0 ? cdate.details.booking[0].numrooms : 0)))));
                                                                tdDateData.appendChild(alloc);
                                                                tdDateData.style.textAlign = "center";
                                                                tdDateData.setAttribute("class", "detailred");
                                                                tdDateData.style.color = "black";
                                                                tr2.appendChild(tdDateData);
                                                            }  else if (cdate.details.booking[0].deduction === "Allocation" && cdate.details.booking[0].group === "PTN") {
                                                                var alloc = document.createTextNode(((parseInt((cdate.details.allocation.length > 0 ? cdate.details.allocation[0].pk_qty : 0))  - parseInt((cdate.details.booking.length > 0 ? cdate.details.booking[0].numrooms : 0))) + parseInt((cdate.details.allocation.length > 1 ? cdate.details.allocation[1].pk_qty : 0)) + (parseInt((cdate.details.blocking.length > 0 ? cdate.details.blocking[0].block : 0)))));
                                                                tdDateData.appendChild(alloc);
                                                                tdDateData.style.textAlign = "center";
                                                                tdDateData.setAttribute("class", "detailred");
                                                                tdDateData.style.color = "black";
                                                                tr2.appendChild(tdDateData);
                                                            }
                                                            else if (cdate.details.booking[0].deduction === "Allocation" && cdate.details.booking[0].group === "Tabikobo") {
                                                                var alloc = document.createTextNode((parseInt((cdate.details.allocation.length > 0 ? cdate.details.allocation[0].pk_qty : 0)) + (parseInt((cdate.details.allocation.length > 1 ? cdate.details.allocation[1].pk_qty : 0)) - parseInt((cdate.details.booking.length > 0 ? cdate.details.booking[0].numrooms : 0))) + (parseInt((cdate.details.blocking.length > 0 ? cdate.details.blocking[0].block : 0)))));
                                                                tdDateData.appendChild(alloc);
                                                                tdDateData.style.textAlign = "center";
                                                                tdDateData.setAttribute("class", "detailred");
                                                                tdDateData.style.color = "black";
                                                                tr2.appendChild(tdDateData);
                                                            }
                                                        } else {
                                                            var alloc = document.createTextNode(parseInt((cdate.details.allocation.length > 0 ? cdate.details.allocation[0].pk_qty : 0)) + parseInt((cdate.details.allocation.length > 1 ? cdate.details.allocation[1].pk_qty : 0)) + parseInt((cdate.details.blocking.length > 0 ? cdate.details.blocking[0].block : 0)));
                                                            tdDateData.appendChild(alloc);
                                                            tdDateData.style.textAlign = "center";
                                                            tdDateData.setAttribute("class", "detailred");
                                                            tdDateData.style.color = "black";
                                                            tr2.appendChild(tdDateData);
                                                        }
                                                    }
                                                    else {
                                                        if (cdate.details.booking.length > 0) {
                                                            if (cdate.details.booking[0].deduction === "Allocation" && cdate.details.booking[0].group === "PTN") {
                                                                var alloc = document.createTextNode((parseInt((cdate.details.allocation.length > 0 ? cdate.details.allocation[0].pk_qty : 0)) - parseInt((cdate.details.booking.length > 0 ? cdate.details.booking[0].numrooms : 0))) + parseInt((cdate.details.allocation.length > 1 ? cdate.details.allocation[1].pk_qty : 0)));
                                                                tdDateData.appendChild(alloc);
                                                                tdDateData.style.textAlign = "center";
                                                                tdDateData.setAttribute("class", "detailred");
                                                                tdDateData.style.color = "black";
                                                                tr2.appendChild(tdDateData);
                                                            }
                                                            else if (cdate.details.booking[0].deduction === "Allocation" && cdate.details.booking[0].group === "Tabikobo") {
                                                                var alloc = document.createTextNode(parseInt((cdate.details.allocation.length > 0 ? cdate.details.allocation[0].pk_qty : 0)) + (parseInt((cdate.details.allocation.length > 1 ? cdate.details.allocation[1].pk_qty : 0)) - parseInt((cdate.details.booking.length > 0 ? cdate.details.booking[0].numrooms : 0))));
                                                                tdDateData.appendChild(alloc);
                                                                tdDateData.style.textAlign = "center";
                                                                tdDateData.setAttribute("class", "detailred");
                                                                tdDateData.style.color = "black";
                                                                tr2.appendChild(tdDateData);
                                                            }
                                                             else {
                                                                var alloc = document.createTextNode(parseInt((cdate.details.allocation.length > 0 ? cdate.details.allocation[0].pk_qty : 0)) + parseInt((cdate.details.allocation.length > 1 ? cdate.details.allocation[1].pk_qty : 0)));
                                                                tdDateData.appendChild(alloc);
                                                                tdDateData.style.textAlign = "center";
                                                                tdDateData.setAttribute("class", "detailred");
                                                                tdDateData.style.color = "black";
                                                                tr2.appendChild(tdDateData);
                                                            }
                                                        } else {
                                                            var allocs = document.createTextNode(parseInt((cdate.details.allocation.length > 0 ? cdate.details.allocation[0].pk_qty : 0)) + parseInt((cdate.details.allocation.length > 1 ? cdate.details.allocation[1].pk_qty : 0)));
                                                            tdDateData.appendChild(allocs);
                                                            tdDateData.style.textAlign = "center";
                                                            tdDateData.setAttribute("class", "detailred");
                                                            tdDateData.style.color = "black";
                                                            tr2.appendChild(tdDateData);
                                                        }
                                                    }
                                                }
                                            }
                                            else {
                                                if ((cdate.details.availability.length > 0 ? cdate.details.availability[0].classColor : "") === "green") {
                                                    if (cdate.details.blocking.length > 0) {
                                                        if (cdate.details.booking.length > 0) {
                                                            if (cdate.details.booking[0].deduction === "Blocking") {
                                                                var alloca = document.createTextNode((parseInt((cdate.details.allocation.length > 0 ? cdate.details.allocation[0].high_qty : 0)) + (parseInt((cdate.details.blocking.length > 0 ? cdate.details.blocking[0].block : 0)) - parseInt((cdate.details.booking.length > 0 ? cdate.details.booking[0].numrooms : 0)))) + parseInt((cdate.details.allocation.length > 1 ? cdate.details.allocation[1].high_qty : 0)));
                                                                tdDateData.appendChild(alloca);
                                                                tdDateData.style.textAlign = "center";
                                                                tdDateData.setAttribute("class", "detailgreen");
                                                                tdDateData.style.color = "black";
                                                                tr2.appendChild(tdDateData);
                                                            } else if (cdate.details.booking[0].deduction === "Allocation" && cdate.details.booking[0].group === "PTN") {
                                                                var alloca = document.createTextNode(((parseInt((cdate.details.allocation.length > 0 ? cdate.details.allocation[0].high_qty : 0)) - parseInt((cdate.details.booking.length > 0 ? cdate.details.booking[0].numrooms : 0))) + parseInt((cdate.details.blocking.length > 0 ? cdate.details.blocking[0].block : 0))) + parseInt((cdate.details.allocation.length > 1 ? cdate.details.allocation[1].high_qty : 0)));
                                                                tdDateData.appendChild(alloca);
                                                                tdDateData.style.textAlign = "center";
                                                                tdDateData.setAttribute("class", "detailgreen");
                                                                tdDateData.style.color = "black";
                                                                tr2.appendChild(tdDateData);
                                                            }
                                                            else if (cdate.details.booking[0].deduction === "Allocation" && cdate.details.booking[0].group === "Tabikobo") {
                                                                var alloca = document.createTextNode((parseInt((cdate.details.allocation.length > 0 ? cdate.details.allocation[0].high_qty : 0)) + parseInt((cdate.details.blocking.length > 0 ? cdate.details.blocking[0].block : 0))) + (parseInt((cdate.details.allocation.length > 1 ? cdate.details.allocation[1].high_qty : 0)) - parseInt((cdate.details.booking.length > 0 ? cdate.details.booking[0].numrooms : 0))));
                                                                tdDateData.appendChild(alloca);
                                                                tdDateData.style.textAlign = "center";
                                                                tdDateData.setAttribute("class", "detailgreen");
                                                                tdDateData.style.color = "black";
                                                                tr2.appendChild(tdDateData);
                                                            }
                                                        } else {
                                                            var alloca = document.createTextNode(parseInt((cdate.details.allocation.length > 0 ? cdate.details.allocation[0].high_qty : 0)) + parseInt((cdate.details.allocation.length > 1 ? cdate.details.allocation[1].high_qty : 0)) + parseInt((cdate.details.blocking.length > 0 ? cdate.details.blocking[0].block : 0)));
                                                            tdDateData.appendChild(alloca);
                                                            tdDateData.style.textAlign = "center";
                                                            tdDateData.setAttribute("class", "detailgreen");
                                                            tdDateData.style.color = "black";
                                                            tr2.appendChild(tdDateData);
                                                        }
                                                    } else {
                                                        if (cdate.details.booking.length > 0) {
                                                            if (cdate.details.booking[0].deduction === "Allocation" && cdate.details.booking[0].group === "PTN") {
                                                                var allocas = document.createTextNode((parseInt(cdate.details.allocation.length > 0 ? cdate.details.allocation[0].high_qty : 0) - parseInt((cdate.details.booking.length > 0 ? cdate.details.booking[0].numrooms : 0))) + parseInt((cdate.details.allocation.length > 1 ? cdate.details.allocation[1].high_qty : 0)));
                                                                tdDateData.appendChild(allocas);
                                                                tdDateData.style.textAlign = "center";
                                                                tdDateData.setAttribute("class", "detailgreen");
                                                                tdDateData.style.color = "black";
                                                                tr2.appendChild(tdDateData);
                                                            }
                                                            else if (cdate.details.booking[0].deduction === "Allocation" && cdate.details.booking[0].group === "Tabikobo") {
                                                                var allocas = document.createTextNode(parseInt(cdate.details.allocation.length > 0 ? cdate.details.allocation[0].high_qty : 0)  +(parseInt((cdate.details.allocation.length > 1 ? cdate.details.allocation[1].high_qty : 0)) - parseInt((cdate.details.booking.length > 0 ? cdate.details.booking[0].numrooms : 0))));
                                                                tdDateData.appendChild(allocas);
                                                                tdDateData.style.textAlign = "center";
                                                                tdDateData.setAttribute("class", "detailgreen");
                                                                tdDateData.style.color = "black";
                                                                tr2.appendChild(tdDateData);
                                                            }
                                                            else {
                                                                var allocas = document.createTextNode(parseInt((cdate.details.allocation.length > 0 ? cdate.details.allocation[0].high_qty : 0)) + parseInt((cdate.details.allocation.length > 1 ? cdate.details.allocation[1].high_qty : 0)));
                                                                tdDateData.appendChild(allocas);
                                                                tdDateData.style.textAlign = "center";
                                                                tdDateData.setAttribute("class", "detailgreen");
                                                                tdDateData.style.color = "black";
                                                                tr2.appendChild(tdDateData);
                                                            }
                                                        } else {
                                                            var allocas = document.createTextNode(parseInt((cdate.details.allocation.length > 0 ? cdate.details.allocation[0].high_qty : 0)) + parseInt((cdate.details.allocation.length > 1 ? cdate.details.allocation[1].high_qty : 0)));
                                                            tdDateData.appendChild(allocas);
                                                            tdDateData.style.textAlign = "center";
                                                            tdDateData.setAttribute("class", "detailgreen");
                                                            tdDateData.style.color = "black";
                                                            tr2.appendChild(tdDateData);
                                                        }
                                                    }
                                                }
                                                if ((cdate.details.availability.length > 0 ? cdate.details.availability[0].classColor : "") === "yellow") {
                                                    if (cdate.details.blocking.length > 0) {
                                                        if (cdate.details.booking.length > 0) {
                                                            if (cdate.details.booking[0].deduction === "Blocking") {
                                                                var alloca = document.createTextNode((parseInt((cdate.details.allocation.length > 0 ? cdate.details.allocation[0].high_qty : 0)) + (parseInt((cdate.details.blocking.length > 0 ? cdate.details.blocking[0].block : 0)) - parseInt((cdate.details.booking.length > 0 ? cdate.details.booking[0].numrooms : 0)))) + parseInt((cdate.details.allocation.length > 1 ? cdate.details.allocation[1].high_qty : 0)));
                                                                tdDateData.appendChild(alloca);
                                                                tdDateData.style.textAlign = "center";
                                                                tdDateData.setAttribute("class", "detailyellow");
                                                                tdDateData.style.color = "black";
                                                                tr2.appendChild(tdDateData);
                                                            } else if (cdate.details.booking[0].deduction === "Allocation" && cdate.details.booking[0].group === "PTN"){
                                                                var alloca = document.createTextNode(((parseInt((cdate.details.allocation.length > 0 ? cdate.details.allocation[0].high_qty : 0)) - parseInt((cdate.details.booking.length > 0 ? cdate.details.booking[0].numrooms : 0))) + parseInt((cdate.details.blocking.length > 0 ? cdate.details.blocking[0].block : 0))) + parseInt((cdate.details.allocation.length > 1 ? cdate.details.allocation[1].high_qty : 0)));
                                                                tdDateData.appendChild(alloca);
                                                                tdDateData.style.textAlign = "center";
                                                                tdDateData.setAttribute("class", "detailyellow");
                                                                tdDateData.style.color = "black";
                                                                tr2.appendChild(tdDateData);
                                                            }
                                                            else if (cdate.details.booking[0].deduction === "Allocation" && cdate.details.booking[0].group === "Tabikobo"){
                                                                var alloca = document.createTextNode((parseInt((cdate.details.allocation.length > 0 ? cdate.details.allocation[0].high_qty : 0)) + parseInt((cdate.details.blocking.length > 0 ? cdate.details.blocking[0].block : 0))) + (parseInt((cdate.details.allocation.length > 1 ? cdate.details.allocation[1].high_qty : 0)) - parseInt((cdate.details.booking.length > 0 ? cdate.details.booking[0].numrooms : 0))));
                                                                tdDateData.appendChild(alloca);
                                                                tdDateData.style.textAlign = "center";
                                                                tdDateData.setAttribute("class", "detailyellow");
                                                                tdDateData.style.color = "black";
                                                                tr2.appendChild(tdDateData);
                                                            }
                                                        } else {
                                                            var alloca = document.createTextNode(parseInt((cdate.details.allocation.length > 0 ? cdate.details.allocation[0].high_qty : 0)) + parseInt((cdate.details.allocation.length > 1 ? cdate.details.allocation[1].high_qty : 0)) + parseInt((cdate.details.blocking.length > 0 ? cdate.details.blocking[0].block : 0)));
                                                            tdDateData.appendChild(alloca);
                                                            tdDateData.style.textAlign = "center";
                                                            tdDateData.setAttribute("class", "detailyellow");
                                                            tdDateData.style.color = "black";
                                                            tr2.appendChild(tdDateData);
                                                        }
                                                    } else {
                                                        if (cdate.details.booking.length > 0) {
                                                            if (cdate.details.booking[0].deduction === "Allocation" && cdate.details.booking[0].group === "PTN") {
                                                                var allocas = document.createTextNode((parseInt(cdate.details.allocation.length > 0 ? cdate.details.allocation[0].high_qty : 0) - parseInt((cdate.details.booking.length > 0 ? cdate.details.booking[0].numrooms : 0))) + parseInt((cdate.details.allocation.length > 1 ? cdate.details.allocation[1].high_qty : 0)));
                                                                tdDateData.appendChild(allocas);
                                                                tdDateData.style.textAlign = "center";
                                                                tdDateData.setAttribute("class", "detailyellow");
                                                                tdDateData.style.color = "black";
                                                                tr2.appendChild(tdDateData);
                                                            }
                                                            else if (cdate.details.booking[0].deduction === "Allocation" && cdate.details.booking[0].group === "Tabikobo") {
                                                                var allocas = document.createTextNode(parseInt(cdate.details.allocation.length > 0 ? cdate.details.allocation[0].high_qty : 0) +( parseInt((cdate.details.allocation.length > 1 ? cdate.details.allocation[1].high_qty : 0)) - parseInt((cdate.details.booking.length > 0 ? cdate.details.booking[0].numrooms : 0))));
                                                                tdDateData.appendChild(allocas);
                                                                tdDateData.style.textAlign = "center";
                                                                tdDateData.setAttribute("class", "detailyellow");
                                                                tdDateData.style.color = "black";
                                                                tr2.appendChild(tdDateData);
                                                            }
                                                            else {
                                                                var allocas = document.createTextNode(parseInt((cdate.details.allocation.length > 0 ? cdate.details.allocation[0].high_qty : 0)) + parseInt((cdate.details.allocation.length > 1 ? cdate.details.allocation[1].high_qty : 0)));
                                                                tdDateData.appendChild(allocas);
                                                                tdDateData.style.textAlign = "center";
                                                                tdDateData.setAttribute("class", "detailyellow");
                                                                tdDateData.style.color = "black";
                                                                tr2.appendChild(tdDateData);
                                                            }
                                                        } else {
                                                            var allocas = document.createTextNode(parseInt((cdate.details.allocation.length > 0 ? cdate.details.allocation[0].high_qty : 0)) + parseInt((cdate.details.allocation.length > 1 ? cdate.details.allocation[1].high_qty : 0)));
                                                            tdDateData.appendChild(allocas);
                                                            tdDateData.style.textAlign = "center";
                                                            tdDateData.setAttribute("class", "detailyellow");
                                                            tdDateData.style.color = "black";
                                                            tr2.appendChild(tdDateData);
                                                        }
                                                    }
                                                }
                                                if ((cdate.details.availability.length > 0 ? cdate.details.availability[0].classColor : "") === "red") {
                                                    if (cdate.details.blocking.length > 0) {
                                                        if (cdate.details.booking.length > 0) {
                                                            if (cdate.details.booking[0].deduction === "Blocking") {
                                                                var alloca = document.createTextNode((parseInt((cdate.details.allocation.length > 0 ? cdate.details.allocation[0].high_qty : 0)) + (parseInt((cdate.details.blocking.length > 0 ? cdate.details.blocking[0].block : 0)) - parseInt((cdate.details.booking.length > 0 ? cdate.details.booking[0].numrooms : 0)))) + parseInt((cdate.details.allocation.length > 1 ? cdate.details.allocation[1].high_qty : 0)));
                                                                tdDateData.appendChild(alloca);
                                                                tdDateData.style.textAlign = "center";
                                                                tdDateData.setAttribute("class", "detailred");
                                                                tdDateData.style.color = "black";
                                                                tr2.appendChild(tdDateData);
                                                            } else if (cdate.details.booking[0].deduction === "Allocation" && cdate.details.booking[0].group === "PTN"){
                                                                var alloca = document.createTextNode(((parseInt((cdate.details.allocation.length > 0 ? cdate.details.allocation[0].high_qty : 0)) - parseInt((cdate.details.booking.length > 0 ? cdate.details.booking[0].numrooms : 0))) + parseInt((cdate.details.blocking.length > 0 ? cdate.details.blocking[0].block : 0))) + parseInt((cdate.details.allocation.length > 1 ? cdate.details.allocation[1].high_qty : 0)));
                                                                tdDateData.appendChild(alloca);
                                                                tdDateData.style.textAlign = "center";
                                                                tdDateData.setAttribute("class", "detailred");
                                                                tdDateData.style.color = "black";
                                                                tr2.appendChild(tdDateData);
                                                            }
                                                            else if (cdate.details.booking[0].deduction === "Allocation" && cdate.details.booking[0].group === "Tabikobo"){
                                                                var alloca = document.createTextNode((parseInt((cdate.details.allocation.length > 0 ? cdate.details.allocation[0].high_qty : 0)) + parseInt((cdate.details.blocking.length > 0 ? cdate.details.blocking[0].block : 0))) + (parseInt((cdate.details.allocation.length > 1 ? cdate.details.allocation[1].high_qty : 0)) - parseInt((cdate.details.booking.length > 0 ? cdate.details.booking[0].numrooms : 0))));
                                                                tdDateData.appendChild(alloca);
                                                                tdDateData.style.textAlign = "center";
                                                                tdDateData.setAttribute("class", "detailred");
                                                                tdDateData.style.color = "black";
                                                                tr2.appendChild(tdDateData);
                                                            }
                                                        } else {
                                                            var alloca = document.createTextNode(parseInt((cdate.details.allocation.length > 0 ? cdate.details.allocation[0].high_qty : 0)) + parseInt((cdate.details.allocation.length > 1 ? cdate.details.allocation[1].high_qty : 0)) + parseInt((cdate.details.blocking.length > 0 ? cdate.details.blocking[0].block : 0)));
                                                            tdDateData.appendChild(alloca);
                                                            tdDateData.style.textAlign = "center";
                                                            tdDateData.setAttribute("class", "detailred");
                                                            tdDateData.style.color = "black";
                                                            tr2.appendChild(tdDateData);
                                                        }
                                                    } else {
                                                        if (cdate.details.booking.length > 0) {
                                                            if (cdate.details.booking[0].deduction === "Allocation" && cdate.details.booking[0].group === "PTN") {
                                                                var allocas = document.createTextNode((parseInt(cdate.details.allocation.length > 0 ? cdate.details.allocation[0].high_qty : 0) - parseInt((cdate.details.booking.length > 0 ? cdate.details.booking[0].numrooms : 0))) + parseInt((cdate.details.allocation.length > 1 ? cdate.details.allocation[1].high_qty : 0)));
                                                                tdDateData.appendChild(allocas);
                                                                tdDateData.style.textAlign = "center";
                                                                tdDateData.setAttribute("class", "detailred");
                                                                tdDateData.style.color = "black";
                                                                tr2.appendChild(tdDateData);
                                                            }
                                                            else if (cdate.details.booking[0].deduction === "Allocation" && cdate.details.booking[0].group === "Tabikobo") {
                                                                var allocas = document.createTextNode(parseInt(cdate.details.allocation.length > 0 ? cdate.details.allocation[0].high_qty : 0) + (parseInt((cdate.details.allocation.length > 1 ? cdate.details.allocation[1].high_qty : 0)) - parseInt((cdate.details.booking.length > 0 ? cdate.details.booking[0].numrooms : 0))));
                                                                tdDateData.appendChild(allocas);
                                                                tdDateData.style.textAlign = "center";
                                                                tdDateData.setAttribute("class", "detailred");
                                                                tdDateData.style.color = "black";
                                                                tr2.appendChild(tdDateData);
                                                            }
                                                            else {
                                                                var allocas = document.createTextNode(parseInt((cdate.details.allocation.length > 0 ? cdate.details.allocation[0].high_qty : 0)) + parseInt((cdate.details.allocation.length > 1 ? cdate.details.allocation[1].high_qty : 0)));
                                                                tdDateData.appendChild(allocas);
                                                                tdDateData.style.textAlign = "center";
                                                                tdDateData.setAttribute("class", "detailred");
                                                                tdDateData.style.color = "black";
                                                                tr2.appendChild(tdDateData);
                                                            }
                                                        } else {
                                                            var allocas = document.createTextNode(parseInt((cdate.details.allocation.length > 0 ? cdate.details.allocation[0].high_qty : 0)) + parseInt((cdate.details.allocation.length > 1 ? cdate.details.allocation[1].high_qty : 0)));
                                                            tdDateData.appendChild(allocas);
                                                            tdDateData.style.textAlign = "center";
                                                            tdDateData.setAttribute("class", "detailred");
                                                            tdDateData.style.color = "black";
                                                            tr2.appendChild(tdDateData);
                                                        }
                                                    }

                                                }
                                            }
                                        }
                                        else {
                                            if ((cdate.details.availability.length > 0 ? cdate.details.availability[0].classColor : "") === "green") {
                                                if (cdate.details.blocking.length > 0) {
                                                    if (cdate.details.booking.length > 0) {
                                                        if (cdate.details.booking[0].deduction === "Blocking") {
                                                            var alloc = document.createTextNode((parseInt((cdate.details.allocation.length > 0 ? cdate.details.allocation[0].npk_qty : 0)) + parseInt((cdate.details.allocation.length > 1 ? cdate.details.allocation[1].npk_qty : 0)) + (parseInt((cdate.details.blocking.length > 0 ? cdate.details.blocking[0].block : 0)) - parseInt((cdate.details.booking.length > 0 ? cdate.details.booking[0].numrooms : 0)))));
                                                            tdDateData.appendChild(alloc);
                                                            tdDateData.style.textAlign = "center";
                                                            tdDateData.setAttribute("class", "detailgreen");
                                                            tdDateData.style.color = "black";
                                                            tr2.appendChild(tdDateData);
                                                        } else if (cdate.details.booking[0].deduction === "Allocation" && cdate.details.booking[0].group === "PTN"){
                                                            var alloc = document.createTextNode(((parseInt((cdate.details.allocation.length > 0 ? cdate.details.allocation[0].npk_qty : 0)) - parseInt((cdate.details.booking.length > 0 ? cdate.details.booking[0].numrooms : 0))) + parseInt((cdate.details.allocation.length > 1 ? cdate.details.allocation[1].npk_qty : 0)) + (parseInt((cdate.details.blocking.length > 0 ? cdate.details.blocking[0].block : 0)))));
                                                            tdDateData.appendChild(alloc);
                                                            tdDateData.style.textAlign = "center";
                                                            tdDateData.setAttribute("class", "detailgreen");
                                                            tdDateData.style.color = "black";
                                                            tr2.appendChild(tdDateData);
                                                        }
                                                        else if (cdate.details.booking[0].deduction === "Allocation" && cdate.details.booking[0].group === "Tabikobo"){
                                                            var alloc = document.createTextNode((parseInt((cdate.details.allocation.length > 0 ? cdate.details.allocation[0].npk_qty : 0)) + (parseInt((cdate.details.allocation.length > 1 ? cdate.details.allocation[1].npk_qty : 0)) - parseInt((cdate.details.booking.length > 0 ? cdate.details.booking[0].numrooms : 0))) + (parseInt((cdate.details.blocking.length > 0 ? cdate.details.blocking[0].block : 0)))));
                                                            tdDateData.appendChild(alloc);
                                                            tdDateData.style.textAlign = "center";
                                                            tdDateData.setAttribute("class", "detailgreen");
                                                            tdDateData.style.color = "black";
                                                            tr2.appendChild(tdDateData);
                                                        }
                                                    } else {
                                                        var alloc = document.createTextNode(parseInt((cdate.details.allocation.length > 0 ? cdate.details.allocation[0].npk_qty : 0)) + parseInt((cdate.details.allocation.length > 1 ? cdate.details.allocation[1].npk_qty : 0)) + parseInt((cdate.details.blocking.length > 0 ? cdate.details.blocking[0].block : 0)));
                                                        tdDateData.appendChild(alloc);
                                                        tdDateData.style.textAlign = "center";
                                                        tdDateData.setAttribute("class", "detailgreen");
                                                        tdDateData.style.color = "black";
                                                        tr2.appendChild(tdDateData);
                                                    }
                                                }
                                                else {
                                                    if (cdate.details.booking.length > 0) {
                                                        if (cdate.details.booking[0].deduction === "Allocation" && cdate.details.booking[0].group === "PTN") {
                                                            var alloc = document.createTextNode((parseInt((cdate.details.allocation.length > 0 ? cdate.details.allocation[0].npk_qty : 0)) - parseInt((cdate.details.booking.length > 0 ? cdate.details.booking[0].numrooms : 0))) + parseInt((cdate.details.allocation.length > 1 ? cdate.details.allocation[1].npk_qty : 0)));
                                                            tdDateData.appendChild(alloc);
                                                            tdDateData.style.textAlign = "center";
                                                            tdDateData.setAttribute("class", "detailgreen");
                                                            tdDateData.style.color = "black";
                                                            tr2.appendChild(tdDateData);
                                                        }
                                                        else if (cdate.details.booking[0].deduction === "Allocation" && cdate.details.booking[0].group === "Tabikobo") {
                                                            var alloc = document.createTextNode(parseInt((cdate.details.allocation.length > 0 ? cdate.details.allocation[0].npk_qty : 0)) + (parseInt((cdate.details.allocation.length > 1 ? cdate.details.allocation[1].npk_qty : 0)) - parseInt((cdate.details.booking.length > 0 ? cdate.details.booking[0].numrooms : 0))));
                                                            tdDateData.appendChild(alloc);
                                                            tdDateData.style.textAlign = "center";
                                                            tdDateData.setAttribute("class", "detailgreen");
                                                            tdDateData.style.color = "black";
                                                            tr2.appendChild(tdDateData);
                                                        } else {
                                                            var alloc = document.createTextNode(parseInt((cdate.details.allocation.length > 0 ? cdate.details.allocation[0].npk_qty : 0)) + parseInt((cdate.details.allocation.length > 1 ? cdate.details.allocation[1].npk_qty : 0)));
                                                            tdDateData.appendChild(alloc);
                                                            tdDateData.style.textAlign = "center";
                                                            tdDateData.setAttribute("class", "detailgreen");
                                                            tdDateData.style.color = "black";
                                                            tr2.appendChild(tdDateData);
                                                        }
                                                    } else {
                                                        var allocs = document.createTextNode(parseInt((cdate.details.allocation.length > 0 ? cdate.details.allocation[0].npk_qty : 0)) + parseInt((cdate.details.allocation.length > 1 ? cdate.details.allocation[1].npk_qty : 0)));
                                                        tdDateData.appendChild(allocs);
                                                        tdDateData.style.textAlign = "center";
                                                        tdDateData.setAttribute("class", "detailgreen");
                                                        tdDateData.style.color = "black";
                                                        tr2.appendChild(tdDateData);
                                                    }
                                                }
                                            }
                                            if ((cdate.details.availability.length > 0 ? cdate.details.availability[0].classColor : "") === "yellow") {
                                                if (cdate.details.blocking.length > 0) {
                                                    if (cdate.details.booking.length > 0) {
                                                        if (cdate.details.booking[0].deduction === "Blocking") {
                                                            var alloc = document.createTextNode((parseInt((cdate.details.allocation.length > 0 ? cdate.details.allocation[0].npk_qty : 0)) + parseInt((cdate.details.allocation.length > 1 ? cdate.details.allocation[1].npk_qty : 0)) + (parseInt((cdate.details.blocking.length > 0 ? cdate.details.blocking[0].block : 0)) - parseInt((cdate.details.booking.length > 0 ? cdate.details.booking[0].numrooms : 0)))));
                                                            tdDateData.appendChild(alloc);
                                                            tdDateData.style.textAlign = "center";
                                                            tdDateData.setAttribute("class", "detailyellow");
                                                            tdDateData.style.color = "black";
                                                            tr2.appendChild(tdDateData);
                                                        } else if (cdate.details.booking[0].deduction === "Allocation" && cdate.details.booking[0].group === "PTN"){
                                                            var alloc = document.createTextNode(((parseInt((cdate.details.allocation.length > 0 ? cdate.details.allocation[0].npk_qty : 0)) - parseInt((cdate.details.booking.length > 0 ? cdate.details.booking[0].numrooms : 0))) + parseInt((cdate.details.allocation.length > 1 ? cdate.details.allocation[1].npk_qty : 0)) + (parseInt((cdate.details.blocking.length > 0 ? cdate.details.blocking[0].block : 0)))));
                                                            tdDateData.appendChild(alloc);
                                                            tdDateData.style.textAlign = "center";
                                                            tdDateData.setAttribute("class", "detailyellow");
                                                            tdDateData.style.color = "black";
                                                            tr2.appendChild(tdDateData);
                                                        }
                                                        else if (cdate.details.booking[0].deduction === "Allocation" && cdate.details.booking[0].group === "Tabikobo"){
                                                            var alloc = document.createTextNode((parseInt((cdate.details.allocation.length > 0 ? cdate.details.allocation[0].npk_qty : 0)) + (parseInt((cdate.details.allocation.length > 1 ? cdate.details.allocation[1].npk_qty : 0)) - parseInt((cdate.details.booking.length > 0 ? cdate.details.booking[0].numrooms : 0))) + (parseInt((cdate.details.blocking.length > 0 ? cdate.details.blocking[0].block : 0)))));
                                                            tdDateData.appendChild(alloc);
                                                            tdDateData.style.textAlign = "center";
                                                            tdDateData.setAttribute("class", "detailyellow");
                                                            tdDateData.style.color = "black";
                                                            tr2.appendChild(tdDateData);
                                                        }
                                                    } else {
                                                        var alloc = document.createTextNode(parseInt((cdate.details.allocation.length > 0 ? cdate.details.allocation[0].npk_qty : 0)) + parseInt((cdate.details.allocation.length > 1 ? cdate.details.allocation[1].npk_qty : 0)) + parseInt((cdate.details.blocking.length > 0 ? cdate.details.blocking[0].block : 0)));
                                                        tdDateData.appendChild(alloc);
                                                        tdDateData.style.textAlign = "center";
                                                        tdDateData.setAttribute("class", "detailyellow");
                                                        tdDateData.style.color = "black";
                                                        tr2.appendChild(tdDateData);
                                                    }
                                                }
                                                else {
                                                    if (cdate.details.booking.length > 0) {
                                                        if (cdate.details.booking[0].deduction === "Allocation" && cdate.details.booking[0].group === "PTN") {
                                                            var alloc = document.createTextNode((parseInt((cdate.details.allocation.length > 0 ? cdate.details.allocation[0].npk_qty : 0)) - parseInt((cdate.details.booking.length > 0 ? cdate.details.booking[0].numrooms : 0))) + parseInt((cdate.details.allocation.length > 1 ? cdate.details.allocation[1].npk_qty : 0)));
                                                            tdDateData.appendChild(alloc);
                                                            tdDateData.style.textAlign = "center";
                                                            tdDateData.setAttribute("class", "detailyellow");
                                                            tdDateData.style.color = "black";
                                                            tr2.appendChild(tdDateData);
                                                        }
                                                        if (cdate.details.booking[0].deduction === "Allocation" && cdate.details.booking[0].group === "Tabikobo") {
                                                            var alloc = document.createTextNode(parseInt((cdate.details.allocation.length > 0 ? cdate.details.allocation[0].npk_qty : 0)) + (parseInt((cdate.details.allocation.length > 1 ? cdate.details.allocation[1].npk_qty : 0)) - parseInt((cdate.details.booking.length > 0 ? cdate.details.booking[0].numrooms : 0))));
                                                            tdDateData.appendChild(alloc);
                                                            tdDateData.style.textAlign = "center";
                                                            tdDateData.setAttribute("class", "detailyellow");
                                                            tdDateData.style.color = "black";
                                                            tr2.appendChild(tdDateData);
                                                        } else {
                                                            var alloc = document.createTextNode(parseInt((cdate.details.allocation.length > 0 ? cdate.details.allocation[0].npk_qty : 0)) + parseInt((cdate.details.allocation.length > 1 ? cdate.details.allocation[1].npk_qty : 0)));
                                                            tdDateData.appendChild(alloc);
                                                            tdDateData.style.textAlign = "center";
                                                            tdDateData.setAttribute("class", "detailyellow");
                                                            tdDateData.style.color = "black";
                                                            tr2.appendChild(tdDateData);
                                                        }
                                                    } else {
                                                        var allocs = document.createTextNode(parseInt((cdate.details.allocation.length > 0 ? cdate.details.allocation[0].npk_qty : 0)) + parseInt((cdate.details.allocation.length > 1 ? cdate.details.allocation[1].npk_qty : 0)));
                                                        tdDateData.appendChild(allocs);
                                                        tdDateData.style.textAlign = "center";
                                                        tdDateData.setAttribute("class", "detailyellow");
                                                        tdDateData.style.color = "black";
                                                        tr2.appendChild(tdDateData);
                                                    }
                                                }
                                            }
                                            if ((cdate.details.availability.length > 0 ? cdate.details.availability[0].classColor : "") === "red") {
                                                if (cdate.details.blocking.length > 0) {
                                                    if (cdate.details.booking.length > 0) {
                                                        if (cdate.details.booking[0].deduction === "Blocking") {
                                                            var alloc = document.createTextNode((parseInt((cdate.details.allocation.length > 0 ? cdate.details.allocation[0].npk_qty : 0)) + parseInt((cdate.details.allocation.length > 1 ? cdate.details.allocation[1].npk_qty : 0)) + (parseInt((cdate.details.blocking.length > 0 ? cdate.details.blocking[0].block : 0)) - parseInt((cdate.details.booking.length > 0 ? cdate.details.booking[0].numrooms : 0)))));
                                                            tdDateData.appendChild(alloc);
                                                            tdDateData.style.textAlign = "center";
                                                            tdDateData.setAttribute("class", "detailred");
                                                            tdDateData.style.color = "black";
                                                            tr2.appendChild(tdDateData);
                                                        } else if (cdate.details.booking[0].deduction === "Allocation" && cdate.details.booking[0].group === "PTN"){
                                                            var alloc = document.createTextNode(((parseInt((cdate.details.allocation.length > 0 ? cdate.details.allocation[0].npk_qty : 0)) - parseInt((cdate.details.booking.length > 0 ? cdate.details.booking[0].numrooms : 0)))  + parseInt((cdate.details.allocation.length > 1 ? cdate.details.allocation[1].npk_qty : 0))  + (parseInt((cdate.details.blocking.length > 0 ? cdate.details.blocking[0].block : 0)))));
                                                            tdDateData.appendChild(alloc);
                                                            tdDateData.style.textAlign = "center";
                                                            tdDateData.setAttribute("class", "detailred");
                                                            tdDateData.style.color = "black";
                                                            tr2.appendChild(tdDateData);
                                                        }
                                                        else if (cdate.details.booking[0].deduction === "Allocation" && cdate.details.booking[0].group === "Tabikobo"){
                                                            var alloc = document.createTextNode((parseInt((cdate.details.allocation.length > 0 ? cdate.details.allocation[0].npk_qty : 0)) + (parseInt((cdate.details.allocation.length > 1 ? cdate.details.allocation[1].npk_qty : 0)) - parseInt((cdate.details.booking.length > 0 ? cdate.details.booking[0].numrooms : 0))) + (parseInt((cdate.details.blocking.length > 0 ? cdate.details.blocking[0].block : 0)))));
                                                            tdDateData.appendChild(alloc);
                                                            tdDateData.style.textAlign = "center";
                                                            tdDateData.setAttribute("class", "detailred");
                                                            tdDateData.style.color = "black";
                                                            tr2.appendChild(tdDateData);
                                                        }
                                                    } else {
                                                        var alloc = document.createTextNode(parseInt((cdate.details.allocation.length > 0 ? cdate.details.allocation[0].npk_qty : 0)) + parseInt((cdate.details.allocation.length > 1 ? cdate.details.allocation[1].npk_qty : 0)) + parseInt((cdate.details.blocking.length > 0 ? cdate.details.blocking[0].block : 0)));
                                                        tdDateData.appendChild(alloc);
                                                        tdDateData.style.textAlign = "center";
                                                        tdDateData.setAttribute("class", "detailred");
                                                        tdDateData.style.color = "black";
                                                        tr2.appendChild(tdDateData);
                                                    }
                                                }
                                                else {
                                                    if (cdate.details.booking.length > 0) {
                                                        if (cdate.details.booking[0].deduction === "Allocation" && cdate.details.booking[0].group === "PTN") {
                                                            var alloc = document.createTextNode((parseInt((cdate.details.allocation.length > 0 ? cdate.details.allocation[0].npk_qty : 0)) - parseInt((cdate.details.booking.length > 0 ? cdate.details.booking[0].numrooms : 0))) + parseInt((cdate.details.allocation.length > 1 ? cdate.details.allocation[1].npk_qty : 0)));
                                                            tdDateData.appendChild(alloc);
                                                            tdDateData.style.textAlign = "center";
                                                            tdDateData.setAttribute("class", "detailred");
                                                            tdDateData.style.color = "black";
                                                            tr2.appendChild(tdDateData);
                                                        }
                                                        if (cdate.details.booking[0].deduction === "Allocation" && cdate.details.booking[0].group === "Tabikobo") {
                                                            var alloc = document.createTextNode(parseInt((cdate.details.allocation.length > 0 ? cdate.details.allocation[0].npk_qty : 0)) + (parseInt((cdate.details.allocation.length > 1 ? cdate.details.allocation[1].npk_qty : 0)) - parseInt((cdate.details.booking.length > 0 ? cdate.details.booking[0].numrooms : 0))));
                                                            tdDateData.appendChild(alloc);
                                                            tdDateData.style.textAlign = "center";
                                                            tdDateData.setAttribute("class", "detailred");
                                                            tdDateData.style.color = "black";
                                                            tr2.appendChild(tdDateData);
                                                        } else {
                                                            var alloc = document.createTextNode(parseInt((cdate.details.allocation.length > 0 ? cdate.details.allocation[0].npk_qty : 0)) + parseInt((cdate.details.allocation.length > 1 ? cdate.details.allocation[1].npk_qty : 0)));
                                                            tdDateData.appendChild(alloc);
                                                            tdDateData.style.textAlign = "center";
                                                            tdDateData.setAttribute("class", "detailred");
                                                            tdDateData.style.color = "black";
                                                            tr2.appendChild(tdDateData);
                                                        }
                                                    } else {
                                                        var allocs = document.createTextNode(parseInt((cdate.details.allocation.length > 0 ? cdate.details.allocation[0].npk_qty : 0)) + parseInt((cdate.details.allocation.length > 1 ? cdate.details.allocation[1].npk_qty : 0)));
                                                        tdDateData.appendChild(allocs);
                                                        tdDateData.style.textAlign = "center";
                                                        tdDateData.setAttribute("class", "detailred");
                                                        tdDateData.style.color = "black";
                                                        tr2.appendChild(tdDateData);
                                                    }
                                                }
                                            }
                                        }
                                    }
                                    else {
                                        if ((cdate.details.availability.length > 0 ? cdate.details.availability[0].classColor : "") === "green") {
                                            if (cdate.details.blocking.length > 0) {
                                                if (cdate.details.booking.length > 0) {
                                                    if (cdate.details.booking[0].deduction === "Blocking") {
                                                        var alloc = document.createTextNode(parseInt((cdate.details.blocking.length > 0 ? cdate.details.blocking[0].block : 0)) - parseInt((cdate.details.booking.length > 0 ? cdate.details.booking[0].numrooms : 0)));
                                                        tdDateData.appendChild(alloc);
                                                        tdDateData.style.textAlign = "center";
                                                        tdDateData.setAttribute("class", "detailgreen");
                                                        tdDateData.style.color = "black";
                                                        tr2.appendChild(tdDateData);
                                                    }
                                                } else {
                                                    var alloc = document.createTextNode(parseInt((cdate.details.blocking.length > 0 ? cdate.details.blocking[0].block : 0)));
                                                    tdDateData.appendChild(alloc);
                                                    tdDateData.style.textAlign = "center";
                                                    tdDateData.setAttribute("class", "detailgreen");
                                                    tdDateData.style.color = "black";
                                                    tr2.appendChild(tdDateData);

                                                }
                                            } else {
                                                var allocs = document.createTextNode(0);
                                                tdDateData.appendChild(allocs);
                                                tdDateData.style.textAlign = "center";
                                                tdDateData.setAttribute("class", "detailgreen");
                                                tdDateData.style.color = "black";
                                                tr2.appendChild(tdDateData);
                                            }
                                        }
                                        if ((cdate.details.availability.length > 0 ? cdate.details.availability[0].classColor : "") === "red") {
                                            if (cdate.details.blocking.length > 0) {
                                                if (cdate.details.booking.length > 0) {
                                                    if (cdate.details.booking[0].deduction === "Blocking") {
                                                        var alloc = document.createTextNode(parseInt((cdate.details.blocking.length > 0 ? cdate.details.blocking[0].block : 0)) - parseInt((cdate.details.booking.length > 0 ? cdate.details.booking[0].numrooms : 0)));
                                                        tdDateData.appendChild(alloc);
                                                        tdDateData.style.textAlign = "center";
                                                        tdDateData.setAttribute("class", "detailred");
                                                        tdDateData.style.color = "black";
                                                        tr2.appendChild(tdDateData);
                                                    } else {
                                                        var alloc = document.createTextNode(parseInt((cdate.details.blocking.length > 0 ? cdate.details.blocking[0].block : 0)));
                                                        tdDateData.appendChild(alloc);
                                                        tdDateData.style.textAlign = "center";
                                                        tdDateData.setAttribute("class", "detailred");
                                                        tdDateData.style.color = "black";
                                                        tr2.appendChild(tdDateData);
                                                    }
                                                } else {
                                                    var alloc = document.createTextNode(parseInt((cdate.details.blocking.length > 0 ? cdate.details.blocking[0].block : 0)));
                                                    tdDateData.appendChild(alloc);
                                                    tdDateData.style.textAlign = "center";
                                                    tdDateData.setAttribute("class", "detailred");
                                                    tdDateData.style.color = "black";
                                                    tr2.appendChild(tdDateData);

                                                }
                                            } else {
                                                var allocs = document.createTextNode(0);
                                                tdDateData.appendChild(allocs);
                                                tdDateData.style.textAlign = "center";
                                                tdDateData.setAttribute("class", "detailred");
                                                tdDateData.style.color = "black";
                                                tr2.appendChild(tdDateData);
                                            }
                                        }
                                        if ((cdate.details.availability.length > 0 ? cdate.details.availability[0].classColor : "") === "yellow") {
                                            if (cdate.details.blocking.length > 0) {
                                                if (cdate.details.booking.length > 0) {
                                                    if (cdate.details.booking[0].deduction === "Blocking") {
                                                        var alloc = document.createTextNode(parseInt((cdate.details.blocking.length > 0 ? cdate.details.blocking[0].block : 0)) - parseInt((cdate.details.booking.length > 0 ? cdate.details.booking[0].numrooms : 0)));
                                                        tdDateData.appendChild(alloc);
                                                        tdDateData.style.textAlign = "center";
                                                        tdDateData.setAttribute("class", "detailyellow");
                                                        tdDateData.style.color = "black";
                                                        tr2.appendChild(tdDateData);
                                                    } else {
                                                        var alloc = document.createTextNode(parseInt((cdate.details.blocking.length > 0 ? cdate.details.blocking[0].block : 0)));
                                                        tdDateData.appendChild(alloc);
                                                        tdDateData.style.textAlign = "center";
                                                        tdDateData.setAttribute("class", "detailyellow");
                                                        tdDateData.style.color = "black";
                                                        tr2.appendChild(tdDateData);
                                                    }
                                                } else {
                                                    var alloc = document.createTextNode(parseInt((cdate.details.blocking.length > 0 ? cdate.details.blocking[0].block : 0)));
                                                    tdDateData.appendChild(alloc);
                                                    tdDateData.style.textAlign = "center";
                                                    tdDateData.setAttribute("class", "detailyellow");
                                                    tdDateData.style.color = "black";
                                                    tr2.appendChild(tdDateData);

                                                }
                                            } else {
                                                var allocs = document.createTextNode(0);
                                                tdDateData.appendChild(allocs);
                                                tdDateData.style.textAlign = "center";
                                                tdDateData.setAttribute("class", "detailyellow");
                                                tdDateData.style.color = "black";
                                                tr2.appendChild(tdDateData);
                                            }
                                        }
                                    }
                                    tdDateData.setAttribute('id',
                                        element.hotelname + "~"
                                        + element.roomname + "~"
                                        + (cdate.details.availability.length > 0 ? cdate.details.availability[0].status : "No Update") + "~"
                                        + (cdate.details.availability.length > 0 ? cdate.details.availability[0].updatedAt : "") + "~"
                                        + (cdate.details.allocation.length > 0 ? cdate.details.allocation[0].npk_qty : 0) + "~"
                                        + (cdate.details.allocation.length > 0 ? cdate.details.allocation[0].pk_qty : 0) + "~"
                                        + (cdate.details.allocation.length > 0 ? cdate.details.allocation[0].high_qty : 0) + "~"
                                        + (cdate.details.seasondetails.length > 0 ? cdate.details.seasondetails[0].season : "") + "~"
                                        + (cdate.details.allocation.length > 0 ? cdate.details.allocation[0].updatedAt : 0) + "~"
                                        + (cdate.details.blocking.length > 0 ? cdate.details.blocking[0].block : 0) + "~"
                                        + (cdate.details.blocking.length > 0 ? cdate.details.blocking[0].cancel : "none") + "~"
                                        + (cdate.details.blocking.length > 0 ? cdate.details.blocking[0].updatedAt : "") + "~"
                                        + (cdate.details.booking.length > 0 ? cdate.details.booking[0].numrooms : 0) + "~"
                                        + (cdate.details.booking.length > 0 ? cdate.details.booking[0].deduction : "") + "~"
                                        + (cdate.details.booking.length > 0 ? cdate.details.booking[0].updatedAt : "") + "~"
                                        + (cdate.details.allocation.length > 0 ? cdate.details.allocation[0].pk_coff : 0) + "~"
                                        + (cdate.details.allocation.length > 0 ? cdate.details.allocation[0].npk_coff : 0) + "~"
                                        + (cdate.details.allocation.length > 0 ? cdate.details.allocation[0].high_coff : 0) + "~"
                                        + cdate.date + "~"
                                        + (cdate.details.seasondetails.length > 0 ? true : false) + "~"
                                        + (cdate.details.allocation.length > 1 ? cdate.details.allocation[1].npk_qty : 0) + "~"
                                        + (cdate.details.allocation.length > 1 ? cdate.details.allocation[1].pk_qty : 0) + "~"
                                        + (cdate.details.allocation.length > 1 ? cdate.details.allocation[1].high_qty : 0) + "~"
                                        + (cdate.details.allocation.length > 1 ? cdate.details.allocation[1].updatedAt : 0) + "~"
                                        + (cdate.details.allocation.length > 1 ? cdate.details.allocation[1].pk_coff : 0) + "~"
                                        + (cdate.details.allocation.length > 1 ? cdate.details.allocation[1].npk_coff : 0) + "~"
                                        + (cdate.details.allocation.length > 1 ? cdate.details.allocation[1].high_coff : 0));
                                    var self = this;
                                    tdDateData.addEventListener('mouseover', function (e) {
                                        self.tapped = e.target.id;
                                    });
                                    tdDateData.addEventListener('mouseout', function (f) {
                                        self.opened = f.target.id;
                                    });
                                }
                                else {
                                    var tdDateData = document.createElement('td');
                                    if (cdate.details.allocation.length > 0) {
                                        if (cdate.details.seasondetails.length > 0) {
                                            if ((cdate.details.seasondetails.length > 0 ? cdate.details.seasondetails[0].season : "") === "Peak Season") {
                                                    if (cdate.details.blocking.length > 0) {
                                                        if (cdate.details.booking.length > 0) {
                                                            if (cdate.details.booking[0].deduction === "Blocking") {
                                                                var alloc = document.createTextNode((parseInt((cdate.details.allocation.length > 0 ? cdate.details.allocation[0].pk_qty : 0)) + parseInt((cdate.details.allocation.length > 1 ? cdate.details.allocation[1].pk_qty : 0)) + (parseInt((cdate.details.blocking.length > 0 ? cdate.details.blocking[0].block : 0)) - parseInt((cdate.details.booking.length > 0 ? cdate.details.booking[0].numrooms : 0)))));
                                                                tdDateData.appendChild(alloc);
                                                                tdDateData.style.textAlign = "center";
                                                                tdDateData.style.color = "black";
                                                                tr2.appendChild(tdDateData);
                                                            } else if (cdate.details.booking[0].deduction === "Allocation" && cdate.details.booking[0].group === "PTN") {
                                                                var alloc = document.createTextNode((((parseInt((cdate.details.allocation.length > 0 ? cdate.details.allocation[0].pk_qty : 0)) - parseInt((cdate.details.booking.length > 0 ? cdate.details.booking[0].numrooms : 0))) + parseInt((cdate.details.allocation.length > 1 ? cdate.details.allocation[1].pk_qty : 0))) + (parseInt((cdate.details.blocking.length > 0 ? cdate.details.blocking[0].block : 0)))));
                                                                tdDateData.appendChild(alloc);
                                                                tdDateData.style.textAlign = "center";
                                                                tdDateData.style.color = "black";
                                                                tr2.appendChild(tdDateData);
                                                            } else if (cdate.details.booking[0].deduction === "Allocation" && cdate.details.booking[0].group === "Tabikobo") {
                                                                var alloc = document.createTextNode(((parseInt((cdate.details.allocation.length > 0 ? cdate.details.allocation[0].pk_qty : 0))+ (parseInt((cdate.details.allocation.length > 1 ? cdate.details.allocation[1].pk_qty : 0))- parseInt((cdate.details.booking.length > 0 ? cdate.details.booking[0].numrooms : 0)))) + (parseInt((cdate.details.blocking.length > 0 ? cdate.details.blocking[0].block : 0)))));
                                                                tdDateData.appendChild(alloc);
                                                                tdDateData.style.textAlign = "center";
                                                                tdDateData.style.color = "black";
                                                                tr2.appendChild(tdDateData);
                                                            }
                                                        } else {
                                                            var alloc = document.createTextNode(parseInt((cdate.details.allocation.length > 0 ? cdate.details.allocation[0].pk_qty : 0)) + parseInt((cdate.details.allocation.length > 1 ? cdate.details.allocation[1].pk_qty : 0)) + parseInt((cdate.details.blocking.length > 0 ? cdate.details.blocking[0].block : 0)));
                                                            tdDateData.appendChild(alloc);
                                                            tdDateData.style.textAlign = "center";
                                                            tdDateData.style.color = "black";
                                                            tr2.appendChild(tdDateData);
                                                        }
                                                    }
                                                    else {
                                                        if (cdate.details.booking.length > 0) {
                                                            if (cdate.details.booking[0].deduction === "Allocation" && cdate.details.booking[0].group === "PTN") {
                                                                var alloc = document.createTextNode(((parseInt((cdate.details.allocation.length > 0 ? cdate.details.allocation[0].pk_qty : 0)) - parseInt((cdate.details.booking.length > 0 ? cdate.details.booking[0].numrooms : 0))) + parseInt((cdate.details.allocation.length > 1 ? cdate.details.allocation[1].pk_qty : 0))));
                                                                tdDateData.appendChild(alloc);
                                                                tdDateData.style.textAlign = "center";
                                                                tdDateData.style.color = "black";
                                                                tr2.appendChild(tdDateData);
                                                            }
                                                            else if (cdate.details.booking[0].deduction === "Allocation" && cdate.details.booking[0].group === "Tabikobo") {
                                                                var alloc = document.createTextNode((parseInt((cdate.details.allocation.length > 0 ? cdate.details.allocation[0].pk_qty : 0)) + (parseInt((cdate.details.allocation.length > 1 ? cdate.details.allocation[1].pk_qty : 0)) - parseInt((cdate.details.booking.length > 0 ? cdate.details.booking[0].numrooms : 0)))));
                                                                tdDateData.appendChild(alloc);
                                                                tdDateData.style.textAlign = "center";
                                                                tdDateData.style.color = "black";
                                                                tr2.appendChild(tdDateData);
                                                            }
                                                            else {
                                                                var alloc = document.createTextNode(parseInt((cdate.details.allocation.length > 0 ? cdate.details.allocation[0].pk_qty : 0)) + parseInt((cdate.details.allocation.length > 1 ? cdate.details.allocation[1].pk_qty : 0)));
                                                                tdDateData.appendChild(alloc);
                                                                tdDateData.style.textAlign = "center";
                                                                tdDateData.style.color = "black";
                                                                tr2.appendChild(tdDateData);
                                                            }
                                                        }
                                                        else {
                                                            var allocs = document.createTextNode(parseInt((cdate.details.allocation.length > 0 ? cdate.details.allocation[0].pk_qty : 0)) + parseInt((cdate.details.allocation.length > 1 ? cdate.details.allocation[1].pk_qty : 0)));
                                                            tdDateData.appendChild(allocs);
                                                            tdDateData.style.textAlign = "center";
                                                            tdDateData.style.color = "black";
                                                            tr2.appendChild(tdDateData);
                                                        }
                                                    }
                                                }
                                            else {
                                                    if (cdate.details.blocking.length > 0) {
                                                        if (cdate.details.booking.length > 0) {
                                                            if (cdate.details.booking[0].deduction === "Blocking") {
                                                                var alloca = document.createTextNode((parseInt((cdate.details.allocation.length > 0 ? cdate.details.allocation[0].high_qty : 0)) + (parseInt((cdate.details.blocking.length > 0 ? cdate.details.blocking[0].block : 0)) - parseInt((cdate.details.booking.length > 0 ? cdate.details.booking[0].numrooms : 0)))) + parseInt((cdate.details.allocation.length > 1 ? cdate.details.allocation[1].high_qty : 0)));
                                                                tdDateData.appendChild(alloca);
                                                                tdDateData.style.textAlign = "center";
                                                                tdDateData.style.color = "black";
                                                                tr2.appendChild(tdDateData);
                                                            } else if (cdate.details.booking[0].deduction === "Allocation" && cdate.details.booking[0].group === "PTN") {
                                                                var alloca = document.createTextNode(((parseInt((cdate.details.allocation.length > 0 ? cdate.details.allocation[0].high_qty : 0)) - parseInt((cdate.details.booking.length > 0 ? cdate.details.booking[0].numrooms : 0))) + parseInt((cdate.details.blocking.length > 0 ? cdate.details.blocking[0].block : 0))) + parseInt((cdate.details.allocation.length > 1 ? cdate.details.allocation[1].high_qty : 0)));
                                                                tdDateData.appendChild(alloca);
                                                                tdDateData.style.textAlign = "center";
                                                                tdDateData.style.color = "black";
                                                                tr2.appendChild(tdDateData);
                                                            }
                                                            else if (cdate.details.booking[0].deduction === "Allocation" && cdate.details.booking[0].group === "Tabikobo") {
                                                                var alloca = document.createTextNode((parseInt((cdate.details.allocation.length > 0 ? cdate.details.allocation[0].high_qty : 0)) + parseInt((cdate.details.blocking.length > 0 ? cdate.details.blocking[0].block : 0))) + (parseInt((cdate.details.allocation.length > 1 ? cdate.details.allocation[1].high_qty : 0)) - parseInt((cdate.details.booking.length > 0 ? cdate.details.booking[0].numrooms : 0))));
                                                                tdDateData.appendChild(alloca);
                                                                tdDateData.style.textAlign = "center";
                                                                tdDateData.style.color = "black";
                                                                tr2.appendChild(tdDateData);
                                                            }
                                                        } else {
                                                            var alloca = document.createTextNode(parseInt((cdate.details.allocation.length > 0 ? cdate.details.allocation[0].high_qty : 0)) + parseInt((cdate.details.allocation.length > 1 ? cdate.details.allocation[1].high_qty : 0)) + parseInt((cdate.details.blocking.length > 0 ? cdate.details.blocking[0].block : 0)));
                                                            tdDateData.appendChild(alloca);
                                                            tdDateData.style.textAlign = "center";
                                                            tdDateData.style.color = "black";
                                                            tr2.appendChild(tdDateData);
                                                        }
                                                    } else {
                                                        if (cdate.details.booking.length > 0) {
                                                            if (cdate.details.booking[0].deduction === "Allocation" && cdate.details.booking[0].group === "PTN") {
                                                                var allocas = document.createTextNode((parseInt(cdate.details.allocation.length > 0 ? cdate.details.allocation[0].high_qty : 0) - parseInt((cdate.details.booking.length > 0 ? cdate.details.booking[0].numrooms : 0))) + parseInt((cdate.details.allocation.length > 1 ? cdate.details.allocation[1].high_qty : 0)));
                                                                tdDateData.appendChild(allocas);
                                                                tdDateData.style.textAlign = "center";
                                                                tdDateData.style.color = "black";
                                                                tr2.appendChild(tdDateData);
                                                            }
                                                            else if (cdate.details.booking[0].deduction === "Allocation" && cdate.details.booking[0].group === "Tabikobo") {
                                                                var allocas = document.createTextNode(parseInt(cdate.details.allocation.length > 0 ? cdate.details.allocation[0].high_qty : 0)  +(parseInt((cdate.details.allocation.length > 1 ? cdate.details.allocation[1].high_qty : 0)) - parseInt((cdate.details.booking.length > 0 ? cdate.details.booking[0].numrooms : 0))));
                                                                tdDateData.appendChild(allocas);
                                                                tdDateData.style.textAlign = "center";
                                                                tdDateData.style.color = "black";
                                                                tr2.appendChild(tdDateData);
                                                            }
                                                            else {
                                                                var allocas = document.createTextNode(parseInt((cdate.details.allocation.length > 0 ? cdate.details.allocation[0].high_qty : 0)) + parseInt((cdate.details.allocation.length > 1 ? cdate.details.allocation[1].high_qty : 0)));
                                                                tdDateData.appendChild(allocas);
                                                                tdDateData.style.textAlign = "center";
                                                                tdDateData.style.color = "black";
                                                                tr2.appendChild(tdDateData);
                                                            }
                                                        } else {
                                                            var allocas = document.createTextNode(parseInt((cdate.details.allocation.length > 0 ? cdate.details.allocation[0].high_qty : 0)) + parseInt((cdate.details.allocation.length > 1 ? cdate.details.allocation[1].high_qty : 0)));
                                                            tdDateData.appendChild(allocas);
                                                            tdDateData.style.textAlign = "center";
                                                            tdDateData.style.color = "black";
                                                            tr2.appendChild(tdDateData);
                                                        }
                                                    }
                                                 }
                                        }
                                        else {
                                                if (cdate.details.blocking.length > 0) {
                                                    if (cdate.details.booking.length > 0) {
                                                        if (cdate.details.booking[0].deduction === "Blocking") {
                                                            var alloc = document.createTextNode((parseInt((cdate.details.allocation.length > 0 ? cdate.details.allocation[0].npk_qty : 0)) + parseInt((cdate.details.allocation.length > 1 ? cdate.details.allocation[1].npk_qty : 0)) + (parseInt((cdate.details.blocking.length > 0 ? cdate.details.blocking[0].block : 0)) - parseInt((cdate.details.booking.length > 0 ? cdate.details.booking[0].numrooms : 0)))));
                                                            tdDateData.appendChild(alloc);
                                                            tdDateData.style.textAlign = "center";
                                                            tdDateData.style.color = "black";
                                                            tr2.appendChild(tdDateData);
                                                        } else if (cdate.details.booking[0].deduction === "Allocation" && cdate.details.booking[0].group === "PTN"){
                                                            var alloc = document.createTextNode(((parseInt((cdate.details.allocation.length > 0 ? cdate.details.allocation[0].npk_qty : 0)) - parseInt((cdate.details.booking.length > 0 ? cdate.details.booking[0].numrooms : 0))) + parseInt((cdate.details.allocation.length > 1 ? cdate.details.allocation[1].npk_qty : 0)) + (parseInt((cdate.details.blocking.length > 0 ? cdate.details.blocking[0].block : 0)))));
                                                            tdDateData.appendChild(alloc);
                                                            tdDateData.style.textAlign = "center";
                                                            tdDateData.style.color = "black";
                                                            tr2.appendChild(tdDateData);
                                                        }
                                                        else if (cdate.details.booking[0].deduction === "Allocation" && cdate.details.booking[0].group === "Tabikobo"){
                                                            var alloc = document.createTextNode((parseInt((cdate.details.allocation.length > 0 ? cdate.details.allocation[0].npk_qty : 0)) + (parseInt((cdate.details.allocation.length > 1 ? cdate.details.allocation[1].npk_qty : 0)) - parseInt((cdate.details.booking.length > 0 ? cdate.details.booking[0].numrooms : 0))) + (parseInt((cdate.details.blocking.length > 0 ? cdate.details.blocking[0].block : 0)))));
                                                            tdDateData.appendChild(alloc);
                                                            tdDateData.style.textAlign = "center";
                                                            tdDateData.style.color = "black";
                                                            tr2.appendChild(tdDateData);
                                                        }
                                                    } else {
                                                        var alloc = document.createTextNode(parseInt((cdate.details.allocation.length > 0 ? cdate.details.allocation[0].npk_qty : 0)) + parseInt((cdate.details.allocation.length > 1 ? cdate.details.allocation[1].npk_qty : 0)) + parseInt((cdate.details.blocking.length > 0 ? cdate.details.blocking[0].block : 0)));
                                                        console.log(alloc);
                                                        tdDateData.appendChild(alloc);
                                                        tdDateData.style.textAlign = "center";
                                                        tdDateData.style.color = "black";
                                                        tr2.appendChild(tdDateData);
                                                    }
                                                }
                                                else {
                                                    if (cdate.details.booking.length > 0) {
                                                        if (cdate.details.booking[0].deduction === "Allocation" && cdate.details.booking[0].group === "PTN") {
                                                            var alloc = document.createTextNode((parseInt((cdate.details.allocation.length > 0 ? cdate.details.allocation[0].npk_qty : 0)) - parseInt((cdate.details.booking.length > 0 ? cdate.details.booking[0].numrooms : 0))) + parseInt((cdate.details.allocation.length > 1 ? cdate.details.allocation[1].npk_qty : 0)));
                                                            tdDateData.appendChild(alloc);
                                                            tdDateData.style.textAlign = "center";
                                                            tdDateData.style.color = "black";
                                                            tr2.appendChild(tdDateData);
                                                        }
                                                        else if (cdate.details.booking[0].deduction === "Allocation" && cdate.details.booking[0].group === "Tabikobo") {
                                                            var alloc = document.createTextNode(parseInt((cdate.details.allocation.length > 0 ? cdate.details.allocation[0].npk_qty : 0)) + (parseInt((cdate.details.allocation.length > 1 ? cdate.details.allocation[1].npk_qty : 0)) - parseInt((cdate.details.booking.length > 0 ? cdate.details.booking[0].numrooms : 0))));
                                                            tdDateData.appendChild(alloc);
                                                            tdDateData.style.textAlign = "center";
                                                            tdDateData.style.color = "black";
                                                            tr2.appendChild(tdDateData);
                                                        } else {
                                                            var alloc = document.createTextNode(parseInt((cdate.details.allocation.length > 0 ? cdate.details.allocation[0].npk_qty : 0)) + parseInt((cdate.details.allocation.length > 1 ? cdate.details.allocation[1].npk_qty : 0)));
                                                            tdDateData.appendChild(alloc);
                                                            tdDateData.style.textAlign = "center";
                                                            tdDateData.style.color = "black";
                                                            tr2.appendChild(tdDateData);
                                                        }
                                                    } else {
                                                        var allocs = document.createTextNode(parseInt((cdate.details.allocation.length > 0 ? cdate.details.allocation[0].npk_qty : 0)) + parseInt((cdate.details.allocation.length > 1 ? cdate.details.allocation[1].npk_qty : 0)));
                                                        tdDateData.appendChild(allocs);
                                                        tdDateData.style.textAlign = "center";
                                                        tdDateData.style.color = "black";
                                                        tr2.appendChild(tdDateData);
                                                    }
                                                }
                                            }
                                    }
                                    else {
                                        if (cdate.details.blocking.length > 0) {
                                            if (cdate.details.booking.length > 0) {
                                                if (cdate.details.booking[0].deduction === "Blocking") {
                                                    var alloca = document.createTextNode(parseInt((cdate.details.blocking.length > 0 ? cdate.details.blocking[0].block : 0)) - parseInt((cdate.details.booking.length > 0 ? cdate.details.booking[0].numrooms : 0)));
                                                    tdDateData.appendChild(alloca);
                                                    tdDateData.style.textAlign = "center";
                                                    tdDateData.style.color = "black";
                                                    tr2.appendChild(tdDateData);
                                                } else {
                                                    var alloca = document.createTextNode(parseInt((cdate.details.blocking.length > 0 ? cdate.details.blocking[0].block : 0)));
                                                    tdDateData.appendChild(alloca);
                                                    tdDateData.style.textAlign = "center";
                                                    tdDateData.style.color = "black";
                                                    tr2.appendChild(tdDateData);
                                                }
                                            } else {
                                                var alloca = document.createTextNode(parseInt((cdate.details.blocking.length > 0 ? cdate.details.blocking[0].block : 0)));
                                                tdDateData.appendChild(alloca);
                                                tdDateData.style.textAlign = "center";
                                                tdDateData.style.color = "black";
                                                tr2.appendChild(tdDateData);
                                            }
                                        } else {
                                            var allocas = document.createTextNode(0);
                                            tdDateData.appendChild(allocas);
                                            tdDateData.style.textAlign = "center";
                                            tdDateData.style.color = "black";
                                            tr2.appendChild(tdDateData);
                                        }
                                    }
                                    tdDateData.setAttribute('id',
                                        element.hotelname + "~"
                                        + element.roomname + "~"
                                        + (cdate.details.availability.length > 0 ? cdate.details.availability[0].status : "No Update") + "~"
                                        + (cdate.details.availability.length > 0 ? cdate.details.availability[0].updatedAt : "") + "~"
                                        + (cdate.details.allocation.length > 0 ? cdate.details.allocation[0].npk_qty : 0) + "~"
                                        + (cdate.details.allocation.length > 0 ? cdate.details.allocation[0].pk_qty : 0) + "~"
                                        + (cdate.details.allocation.length > 0 ? cdate.details.allocation[0].high_qty : 0) + "~"
                                        + (cdate.details.seasondetails.length > 0 ? cdate.details.seasondetails[0].season : "") + "~"
                                        + (cdate.details.allocation.length > 0 ? cdate.details.allocation[0].updatedAt : 0) + "~"
                                        + (cdate.details.blocking.length > 0 ? cdate.details.blocking[0].block : 0) + "~"
                                        + (cdate.details.blocking.length > 0 ? cdate.details.blocking[0].cancel : "none") + "~"
                                        + (cdate.details.blocking.length > 0 ? cdate.details.blocking[0].updatedAt : "") + "~"
                                        + (cdate.details.booking.length > 0 ? cdate.details.booking[0].numrooms : 0) + "~"
                                        + (cdate.details.booking.length > 0 ? cdate.details.booking[0].deduction : "") + "~"
                                        + (cdate.details.booking.length > 0 ? cdate.details.booking[0].updatedAt : "") + "~"
                                        + (cdate.details.allocation.length > 0 ? cdate.details.allocation[0].pk_coff : 0) + "~"
                                        + (cdate.details.allocation.length > 0 ? cdate.details.allocation[0].npk_coff : 0) + "~"
                                        + (cdate.details.allocation.length > 0 ? cdate.details.allocation[0].high_coff : 0) + "~"
                                        + cdate.date + "~"
                                        + (cdate.details.seasondetails.length > 0 ? true : false) + "~"
                                        + (cdate.details.allocation.length > 1 ? cdate.details.allocation[1].npk_qty : 0) + "~"
                                        + (cdate.details.allocation.length > 1 ? cdate.details.allocation[1].pk_qty : 0) + "~"
                                        + (cdate.details.allocation.length > 1 ? cdate.details.allocation[1].high_qty : 0) + "~"
                                        + (cdate.details.allocation.length > 1 ? cdate.details.allocation[1].updatedAt : 0) + "~"
                                        + (cdate.details.allocation.length > 1 ? cdate.details.allocation[1].pk_coff : 0) + "~"
                                        + (cdate.details.allocation.length > 1 ? cdate.details.allocation[1].npk_coff : 0) + "~"
                                        + (cdate.details.allocation.length > 1 ? cdate.details.allocation[1].high_coff : 0));
                                    var self = this;
                                    tdDateData.addEventListener('mouseover', function (e) {
                                        self.tapped = e.target.id;
                                    });
                                    tdDateData.addEventListener('mouseout', function (f) {
                                        self.opened = f.target.id;
                                    });
                                }

                            }
                            else if (ptngroup && !tabigroup) {
                                if (cdate.details.availability.length > 0) {
                                    var tdDateData = document.createElement('td');
                                    if (cdate.details.allocation.length > 0) {
                                        if (cdate.details.seasondetails.length > 0) {
                                            // if ((cdate.details.seasondetails.length > 0 ? cdate.details.seasondetails[0].season : "") || (cdate.details.seasondetails.length > 0 ? cdate.details.seasondetails[1].season : "") === "Peak Season") {
                                            if ((cdate.details.seasondetails.length > 0 ? cdate.details.seasondetails[0].season : "") == "Peak Season") {
                                                if ((cdate.details.availability.length > 0 ? cdate.details.availability[0].classColor : "") === "green") {
                                                    if (cdate.details.blocking.length > 0) {
                                                        if (cdate.details.booking.length > 0) {
                                                            if (cdate.details.booking[0].deduction === "Blocking") {
                                                                var alloc = document.createTextNode((parseInt((cdate.details.allocation.length > 0 ? cdate.details.allocation[0].pk_qty : 0)) + (parseInt((cdate.details.blocking.length > 0 ? cdate.details.blocking[0].block : 0)) - parseInt((cdate.details.booking.length > 0 ? cdate.details.booking[0].numrooms : 0)))));
                                                                tdDateData.appendChild(alloc);
                                                                tdDateData.style.textAlign = "center";
                                                                tdDateData.setAttribute("class", "detailgreen");
                                                                tdDateData.style.color = "black";
                                                                tr2.appendChild(tdDateData);
                                                            } else if (cdate.details.booking[0].deduction === "Allocation" && cdate.details.booking[0].group === "PTN") {
                                                                var alloc = document.createTextNode(((parseInt((cdate.details.allocation.length > 0 ? cdate.details.allocation[0].pk_qty : 0)) - parseInt((cdate.details.booking.length > 0 ? cdate.details.booking[0].numrooms : 0))) + (parseInt((cdate.details.blocking.length > 0 ? cdate.details.blocking[0].block : 0)))));
                                                                tdDateData.appendChild(alloc);
                                                                tdDateData.style.textAlign = "center";
                                                                tdDateData.setAttribute("class", "detailgreen");
                                                                tdDateData.style.color = "black";
                                                                tr2.appendChild(tdDateData);
                                                            }
                                                        } else {
                                                            var alloc = document.createTextNode(parseInt((cdate.details.allocation.length > 0 ? cdate.details.allocation[0].pk_qty : 0)) + parseInt((cdate.details.blocking.length > 0 ? cdate.details.blocking[0].block : 0)));
                                                            tdDateData.appendChild(alloc);
                                                            tdDateData.style.textAlign = "center";
                                                            tdDateData.setAttribute("class", "detailgreen");
                                                            tdDateData.style.color = "black";
                                                            tr2.appendChild(tdDateData);
                                                        }
                                                    }
                                                    else {
                                                        if (cdate.details.booking.length > 0) {
                                                            if (cdate.details.booking[0].deduction === "Allocation" && cdate.details.booking[0].group === "PTN") {
                                                                var alloc = document.createTextNode((parseInt((cdate.details.allocation.length > 0 ? cdate.details.allocation[0].pk_qty : 0)) - parseInt((cdate.details.booking.length > 0 ? cdate.details.booking[0].numrooms : 0))));
                                                                tdDateData.appendChild(alloc);
                                                                tdDateData.style.textAlign = "center";
                                                                tdDateData.setAttribute("class", "detailgreen");
                                                                tdDateData.style.color = "black";
                                                                tr2.appendChild(tdDateData);
                                                            } else {
                                                                var alloc = document.createTextNode(parseInt((cdate.details.allocation.length > 0 ? cdate.details.allocation[0].pk_qty : 0)));
                                                                tdDateData.appendChild(alloc);
                                                                tdDateData.style.textAlign = "center";
                                                                tdDateData.setAttribute("class", "detailgreen");
                                                                tdDateData.style.color = "black";
                                                                tr2.appendChild(tdDateData);
                                                            }
                                                        } else {
                                                            var allocs = document.createTextNode(parseInt((cdate.details.allocation.length > 0 ? cdate.details.allocation[0].pk_qty : 0)));
                                                            tdDateData.appendChild(allocs);
                                                            tdDateData.style.textAlign = "center";
                                                            tdDateData.setAttribute("class", "detailgreen");
                                                            tdDateData.style.color = "black";
                                                            tr2.appendChild(tdDateData);
                                                        }
                                                    }
                                                }
                                                if ((cdate.details.availability.length > 0 ? cdate.details.availability[0].classColor : "") === "yellow") {
                                                    if (cdate.details.blocking.length > 0) {
                                                        if (cdate.details.booking.length > 0) {
                                                            if (cdate.details.booking[0].deduction === "Blocking") {
                                                                var alloc = document.createTextNode((parseInt((cdate.details.allocation.length > 0 ? cdate.details.allocation[0].pk_qty : 0)) + (parseInt((cdate.details.blocking.length > 0 ? cdate.details.blocking[0].block : 0)) - parseInt((cdate.details.booking.length > 0 ? cdate.details.booking[0].numrooms : 0)))));
                                                                tdDateData.appendChild(alloc);
                                                                tdDateData.style.textAlign = "center";
                                                                tdDateData.setAttribute("class", "detailyellow");
                                                                tdDateData.style.color = "black";
                                                                tr2.appendChild(tdDateData);
                                                            } else if (cdate.details.booking[0].deduction === "Allocation" && cdate.details.booking[0].group === "PTN") {
                                                                var alloc = document.createTextNode(((parseInt((cdate.details.allocation.length > 0 ? cdate.details.allocation[0].pk_qty : 0)) - parseInt((cdate.details.booking.length > 0 ? cdate.details.booking[0].numrooms : 0))) + (parseInt((cdate.details.blocking.length > 0 ? cdate.details.blocking[0].block : 0)))));
                                                                tdDateData.appendChild(alloc);
                                                                tdDateData.style.textAlign = "center";
                                                                tdDateData.setAttribute("class", "detailyellow");
                                                                tdDateData.style.color = "black";
                                                                tr2.appendChild(tdDateData);
                                                            }
                                                        } else {
                                                            var alloc = document.createTextNode(parseInt((cdate.details.allocation.length > 0 ? cdate.details.allocation[0].pk_qty : 0)) + parseInt((cdate.details.blocking.length > 0 ? cdate.details.blocking[0].block : 0)));
                                                            tdDateData.appendChild(alloc);
                                                            tdDateData.style.textAlign = "center";
                                                            tdDateData.setAttribute("class", "detailyellow");
                                                            tdDateData.style.color = "black";
                                                            tr2.appendChild(tdDateData);
                                                        }
                                                    }
                                                    else {
                                                        if (cdate.details.booking.length > 0) {
                                                            if (cdate.details.booking[0].deduction === "Allocation" && cdate.details.booking[0].group === "PTN") {
                                                                var alloc = document.createTextNode(parseInt((cdate.details.allocation.length > 0 ? cdate.details.allocation[0].pk_qty : 0)) - parseInt((cdate.details.booking.length > 0 ? cdate.details.booking[0].numrooms : 0)));
                                                                tdDateData.appendChild(alloc);
                                                                tdDateData.style.textAlign = "center";
                                                                tdDateData.setAttribute("class", "detailyellow");
                                                                tdDateData.style.color = "black";
                                                                tr2.appendChild(tdDateData);
                                                            } else {
                                                                var alloc = document.createTextNode(parseInt((cdate.details.allocation.length > 0 ? cdate.details.allocation[0].pk_qty : 0)));
                                                                tdDateData.appendChild(alloc);
                                                                tdDateData.style.textAlign = "center";
                                                                tdDateData.setAttribute("class", "detailyellow");
                                                                tdDateData.style.color = "black";
                                                                tr2.appendChild(tdDateData);
                                                            }
                                                        } else {
                                                            var allocs = document.createTextNode(parseInt((cdate.details.allocation.length > 0 ? cdate.details.allocation[0].pk_qty : 0)));
                                                            tdDateData.appendChild(allocs);
                                                            tdDateData.style.textAlign = "center";
                                                            tdDateData.setAttribute("class", "detailyellow");
                                                            tdDateData.style.color = "black";
                                                            tr2.appendChild(tdDateData);
                                                        }
                                                    }
                                                }
                                                if ((cdate.details.availability.length > 0 ? cdate.details.availability[0].classColor : "") === "red") {
                                                    if (cdate.details.blocking.length > 0) {
                                                        if (cdate.details.booking.length > 0) {
                                                            if (cdate.details.booking[0].deduction === "Blocking") {
                                                                var alloc = document.createTextNode((parseInt((cdate.details.allocation.length > 0 ? cdate.details.allocation[0].pk_qty : 0)) + (parseInt((cdate.details.blocking.length > 0 ? cdate.details.blocking[0].block : 0)) - parseInt((cdate.details.booking.length > 0 ? cdate.details.booking[0].numrooms : 0)))));
                                                                tdDateData.appendChild(alloc);
                                                                tdDateData.style.textAlign = "center";
                                                                tdDateData.setAttribute("class", "detailred");
                                                                tdDateData.style.color = "black";
                                                                tr2.appendChild(tdDateData);
                                                            } else if (cdate.details.booking[0].deduction === "Allocation" && cdate.details.booking[0].group === "PTN") {
                                                                var alloc = document.createTextNode(((parseInt((cdate.details.allocation.length > 0 ? cdate.details.allocation[0].pk_qty : 0)) - parseInt((cdate.details.booking.length > 0 ? cdate.details.booking[0].numrooms : 0))) + (parseInt((cdate.details.blocking.length > 0 ? cdate.details.blocking[0].block : 0)))));
                                                                tdDateData.appendChild(alloc);
                                                                tdDateData.style.textAlign = "center";
                                                                tdDateData.setAttribute("class", "detailred");
                                                                tdDateData.style.color = "black";
                                                                tr2.appendChild(tdDateData);
                                                            }
                                                        } else {
                                                            var alloc = document.createTextNode(parseInt((cdate.details.allocation.length > 0 ? cdate.details.allocation[0].pk_qty : 0)) + parseInt((cdate.details.blocking.length > 0 ? cdate.details.blocking[0].block : 0)));
                                                            tdDateData.appendChild(alloc);
                                                            tdDateData.style.textAlign = "center";
                                                            tdDateData.setAttribute("class", "detailred");
                                                            tdDateData.style.color = "black";
                                                            tr2.appendChild(tdDateData);
                                                        }
                                                    }
                                                    else {
                                                        if (cdate.details.booking.length > 0) {
                                                            if (cdate.details.booking[0].deduction === "Allocation" && cdate.details.booking[0].group === "PTN") {
                                                                var alloc = document.createTextNode(parseInt((cdate.details.allocation.length > 0 ? cdate.details.allocation[0].pk_qty : 0)) - parseInt((cdate.details.booking.length > 0 ? cdate.details.booking[0].numrooms : 0)));
                                                                tdDateData.appendChild(alloc);
                                                                tdDateData.style.textAlign = "center";
                                                                tdDateData.setAttribute("class", "detailred");
                                                                tdDateData.style.color = "black";
                                                                tr2.appendChild(tdDateData);
                                                            } else {
                                                                var alloc = document.createTextNode(parseInt((cdate.details.allocation.length > 0 ? cdate.details.allocation[0].pk_qty : 0)));
                                                                tdDateData.appendChild(alloc);
                                                                tdDateData.style.textAlign = "center";
                                                                tdDateData.setAttribute("class", "detailred");
                                                                tdDateData.style.color = "black";
                                                                tr2.appendChild(tdDateData);
                                                            }
                                                        } else {
                                                            var allocs = document.createTextNode(parseInt((cdate.details.allocation.length > 0 ? cdate.details.allocation[0].pk_qty : 0)));
                                                            tdDateData.appendChild(allocs);
                                                            tdDateData.style.textAlign = "center";
                                                            tdDateData.setAttribute("class", "detailred");
                                                            tdDateData.style.color = "black";
                                                            tr2.appendChild(tdDateData);
                                                        }
                                                    }
                                                }
                                            }

                                            else {
                                                if ((cdate.details.availability.length > 0 ? cdate.details.availability[0].classColor : "") === "green") {
                                                    if (cdate.details.blocking.length > 0) {
                                                        if (cdate.details.booking.length > 0) {
                                                            if (cdate.details.booking[0].deduction === "Blocking") {
                                                                var alloc = document.createTextNode((parseInt((cdate.details.allocation.length > 0 ? cdate.details.allocation[0].high_qty : 0)) + (parseInt((cdate.details.blocking.length > 0 ? cdate.details.blocking[0].block : 0)) - parseInt((cdate.details.booking.length > 0 ? cdate.details.booking[0].numrooms : 0)))));
                                                                tdDateData.appendChild(alloc);
                                                                tdDateData.style.textAlign = "center";
                                                                tdDateData.setAttribute("class", "detailgreen");
                                                                tdDateData.style.color = "black";
                                                                tr2.appendChild(tdDateData);
                                                            } else if (cdate.details.booking[0].deduction === "Allocation" && cdate.details.booking[0].group === "PTN") {
                                                                var alloc = document.createTextNode(((parseInt((cdate.details.allocation.length > 0 ? cdate.details.allocation[0].high_qty : 0)) - parseInt((cdate.details.booking.length > 0 ? cdate.details.booking[0].numrooms : 0))) + (parseInt((cdate.details.blocking.length > 0 ? cdate.details.blocking[0].block : 0)))));
                                                                tdDateData.appendChild(alloc);
                                                                tdDateData.style.textAlign = "center";
                                                                tdDateData.setAttribute("class", "detailgreen");
                                                                tdDateData.style.color = "black";
                                                                tr2.appendChild(tdDateData);
                                                            }
                                                        } else {
                                                            var alloc = document.createTextNode(parseInt((cdate.details.allocation.length > 0 ? cdate.details.allocation[0].high_qty : 0)) + parseInt((cdate.details.blocking.length > 0 ? cdate.details.blocking[0].block : 0)));
                                                            tdDateData.appendChild(alloc);
                                                            tdDateData.style.textAlign = "center";
                                                            tdDateData.setAttribute("class", "detailgreen");
                                                            tdDateData.style.color = "black";
                                                            tr2.appendChild(tdDateData);
                                                        }
                                                    }
                                                    else {
                                                        if (cdate.details.booking.length > 0) {
                                                           if (cdate.details.booking[0].deduction === "Allocation" && cdate.details.booking[0].group === "PTN") {
                                                                var alloc = document.createTextNode((parseInt((cdate.details.allocation.length > 0 ? cdate.details.allocation[0].high_qty : 0)) - parseInt((cdate.details.booking.length > 0 ? cdate.details.booking[0].numrooms : 0))));
                                                                tdDateData.appendChild(alloc);
                                                                tdDateData.style.textAlign = "center";
                                                                tdDateData.setAttribute("class", "detailgreen");
                                                                tdDateData.style.color = "black";
                                                                tr2.appendChild(tdDateData);
                                                            } else {
                                                                var alloc = document.createTextNode(parseInt((cdate.details.allocation.length > 0 ? cdate.details.allocation[0].high_qty : 0)));
                                                                tdDateData.appendChild(alloc);
                                                                tdDateData.style.textAlign = "center";
                                                                tdDateData.setAttribute("class", "detailgreen");
                                                                tdDateData.style.color = "black";
                                                                tr2.appendChild(tdDateData);
                                                            }
                                                        } else {
                                                            var allocs = document.createTextNode((parseInt((cdate.details.allocation.length > 0 ? cdate.details.allocation[0].high_qty : 0))));
                                                            tdDateData.appendChild(allocs);
                                                            tdDateData.style.textAlign = "center";
                                                            tdDateData.setAttribute("class", "detailgreen");
                                                            tdDateData.style.color = "black";
                                                            tr2.appendChild(tdDateData);
                                                        }
                                                    }
                                                }
                                                if ((cdate.details.availability.length > 0 ? cdate.details.availability[0].classColor : "") === "yellow") {
                                                    if (cdate.details.blocking.length > 0) {
                                                        if (cdate.details.booking.length > 0) {
                                                            if (cdate.details.booking[0].deduction === "Blocking") {
                                                                var alloc = document.createTextNode((parseInt((cdate.details.allocation.length > 0 ? cdate.details.allocation[0].high_qty : 0)) + (parseInt((cdate.details.blocking.length > 0 ? cdate.details.blocking[0].block : 0)) - parseInt((cdate.details.booking.length > 0 ? cdate.details.booking[0].numrooms : 0)))));
                                                                tdDateData.appendChild(alloc);
                                                                tdDateData.style.textAlign = "center";
                                                                tdDateData.setAttribute("class", "detailyellow");
                                                                tdDateData.style.color = "black";
                                                                tr2.appendChild(tdDateData);
                                                            } else if (cdate.details.booking[0].deduction === "Allocation" && cdate.details.booking[0].group === "PTN") {
                                                                var alloc = document.createTextNode(((parseInt((cdate.details.allocation.length > 0 ? cdate.details.allocation[0].high_qty : 0)) - parseInt((cdate.details.booking.length > 0 ? cdate.details.booking[0].numrooms : 0))) + (parseInt((cdate.details.blocking.length > 0 ? cdate.details.blocking[0].block : 0)))));
                                                                tdDateData.appendChild(alloc);
                                                                tdDateData.style.textAlign = "center";
                                                                tdDateData.setAttribute("class", "detailyellow");
                                                                tdDateData.style.color = "black";
                                                                tr2.appendChild(tdDateData);
                                                            }
                                                        } else {
                                                            var alloc = document.createTextNode(parseInt((cdate.details.allocation.length > 0 ? cdate.details.allocation[0].high_qty : 0)) + parseInt((cdate.details.blocking.length > 0 ? cdate.details.blocking[0].block : 0)));
                                                            tdDateData.appendChild(alloc);
                                                            tdDateData.style.textAlign = "center";
                                                            tdDateData.setAttribute("class", "detailyellow");
                                                            tdDateData.style.color = "black";
                                                            tr2.appendChild(tdDateData);
                                                        }
                                                    }
                                                    else {
                                                        if (cdate.details.booking.length > 0) {
                                                            if (cdate.details.booking[0].deduction === "Allocation" && cdate.details.booking[0].group === "PTN") {
                                                                var alloc = document.createTextNode(parseInt((cdate.details.allocation.length > 0 ? cdate.details.allocation[0].high_qty : 0)) - parseInt((cdate.details.booking.length > 0 ? cdate.details.booking[0].numrooms : 0)));
                                                                tdDateData.appendChild(alloc);
                                                                tdDateData.style.textAlign = "center";
                                                                tdDateData.setAttribute("class", "detailyellow");
                                                                tdDateData.style.color = "black";
                                                                tr2.appendChild(tdDateData);
                                                            } else {
                                                                var alloc = document.createTextNode(parseInt((cdate.details.allocation.length > 0 ? cdate.details.allocation[0].high_qty : 0)));
                                                                tdDateData.appendChild(alloc);
                                                                tdDateData.style.textAlign = "center";
                                                                tdDateData.setAttribute("class", "detailyellow");
                                                                tdDateData.style.color = "black";
                                                                tr2.appendChild(tdDateData);
                                                            }
                                                        } else {
                                                            var allocs = document.createTextNode(parseInt((cdate.details.allocation.length > 0 ? cdate.details.allocation[0].high_qty : 0)));
                                                            tdDateData.appendChild(allocs);
                                                            tdDateData.style.textAlign = "center";
                                                            tdDateData.setAttribute("class", "detailyellow");
                                                            tdDateData.style.color = "black";
                                                            tr2.appendChild(tdDateData);
                                                        }
                                                    }
                                                }
                                                if ((cdate.details.availability.length > 0 ? cdate.details.availability[0].classColor : "") === "red") {
                                                    if (cdate.details.blocking.length > 0) {
                                                        if (cdate.details.booking.length > 0) {
                                                            if (cdate.details.booking[0].deduction === "Blocking") {
                                                                var alloc = document.createTextNode((parseInt((cdate.details.allocation.length > 0 ? cdate.details.allocation[0].high_qty : 0)) + (parseInt((cdate.details.blocking.length > 0 ? cdate.details.blocking[0].block : 0)) - parseInt((cdate.details.booking.length > 0 ? cdate.details.booking[0].numrooms : 0)))));
                                                                tdDateData.appendChild(alloc);
                                                                tdDateData.style.textAlign = "center";
                                                                tdDateData.setAttribute("class", "detailred");
                                                                tdDateData.style.color = "black";
                                                                tr2.appendChild(tdDateData);
                                                            } else if (cdate.details.booking[0].deduction === "Allocation" && cdate.details.booking[0].group === "PTN") {
                                                                var alloc = document.createTextNode(((parseInt((cdate.details.allocation.length > 0 ? cdate.details.allocation[0].high_qty : 0)) - parseInt((cdate.details.booking.length > 0 ? cdate.details.booking[0].numrooms : 0))) + (parseInt((cdate.details.blocking.length > 0 ? cdate.details.blocking[0].block : 0)))));
                                                                tdDateData.appendChild(alloc);
                                                                tdDateData.style.textAlign = "center";
                                                                tdDateData.setAttribute("class", "detailred");
                                                                tdDateData.style.color = "black";
                                                                tr2.appendChild(tdDateData);
                                                            }
                                                        } else {
                                                            var alloc = document.createTextNode((parseInt((cdate.details.allocation.length > 0 ? cdate.details.allocation[0].high_qty : 0)) + parseInt((cdate.details.blocking.length > 0 ? cdate.details.blocking[0].block : 0))));
                                                            tdDateData.appendChild(alloc);
                                                            tdDateData.style.textAlign = "center";
                                                            tdDateData.setAttribute("class", "detailred");
                                                            tdDateData.style.color = "black";
                                                            tr2.appendChild(tdDateData);
                                                        }
                                                    }
                                                    else {
                                                        if (cdate.details.booking.length > 0) {
                                                            if (cdate.details.booking[0].deduction === "Allocation" && cdate.details.booking[0].group === "PTN") {
                                                                var alloc = document.createTextNode((parseInt((cdate.details.allocation.length > 0 ? cdate.details.allocation[0].high_qty : 0)) - parseInt((cdate.details.booking.length > 0 ? cdate.details.booking[0].numrooms : 0))));
                                                                tdDateData.appendChild(alloc);
                                                                tdDateData.style.textAlign = "center";
                                                                tdDateData.setAttribute("class", "detailred");
                                                                tdDateData.style.color = "black";
                                                                tr2.appendChild(tdDateData);
                                                            } else {
                                                                var alloc = document.createTextNode((parseInt((cdate.details.allocation.length > 0 ? cdate.details.allocation[0].high_qty : 0))));
                                                                tdDateData.appendChild(alloc);
                                                                tdDateData.style.textAlign = "center";
                                                                tdDateData.setAttribute("class", "detailred");
                                                                tdDateData.style.color = "black";
                                                                tr2.appendChild(tdDateData);
                                                            }
                                                        } else {
                                                            var allocs = document.createTextNode((parseInt((cdate.details.allocation.length > 0 ? cdate.details.allocation[0].high_qty : 0))));
                                                            tdDateData.appendChild(allocs);
                                                            tdDateData.style.textAlign = "center";
                                                            tdDateData.setAttribute("class", "detailred");
                                                            tdDateData.style.color = "black";
                                                            tr2.appendChild(tdDateData);
                                                        }
                                                    }
                                                }
                                            }
                                        }
                                        else {
                                            if ((cdate.details.availability.length > 0 ? cdate.details.availability[0].classColor : "") === "green") {
                                                if (cdate.details.blocking.length > 0) {
                                                    if (cdate.details.booking.length > 0) {
                                                        if (cdate.details.booking[0].deduction === "Blocking") {
                                                            var alloc = document.createTextNode((parseInt((cdate.details.allocation.length > 0 ? cdate.details.allocation[0].npk_qty : 0)) + (parseInt((cdate.details.blocking.length > 0 ? cdate.details.blocking[0].block : 0)) - parseInt((cdate.details.booking.length > 0 ? cdate.details.booking[0].numrooms : 0)))));
                                                            tdDateData.appendChild(alloc);
                                                            tdDateData.style.textAlign = "center";
                                                            tdDateData.setAttribute("class", "detailgreen");
                                                            tdDateData.style.color = "black";
                                                            tr2.appendChild(tdDateData);
                                                        } else if (cdate.details.booking[0].deduction === "Allocation" && cdate.details.booking[0].group === "PTN") {
                                                            var alloc = document.createTextNode(((parseInt((cdate.details.allocation.length > 0 ? cdate.details.allocation[0].npk_qty : 0)) - parseInt((cdate.details.booking.length > 0 ? cdate.details.booking[0].numrooms : 0))) + (parseInt((cdate.details.blocking.length > 0 ? cdate.details.blocking[0].block : 0)))));
                                                            tdDateData.appendChild(alloc);
                                                            tdDateData.style.textAlign = "center";
                                                            tdDateData.setAttribute("class", "detailgreen");
                                                            tdDateData.style.color = "black";
                                                            tr2.appendChild(tdDateData);
                                                        }
                                                    } else {
                                                        var alloc = document.createTextNode(parseInt((cdate.details.allocation.length > 0 ? cdate.details.allocation[0].npk_qty : 0)) + parseInt((cdate.details.blocking.length > 0 ? cdate.details.blocking[0].block : 0)));
                                                        tdDateData.appendChild(alloc);
                                                        tdDateData.style.textAlign = "center";
                                                        tdDateData.setAttribute("class", "detailgreen");
                                                        tdDateData.style.color = "black";
                                                        tr2.appendChild(tdDateData);
                                                    }
                                                }
                                                else {
                                                    if (cdate.details.booking.length > 0) {
                                                        if (cdate.details.booking[0].deduction === "Allocation" && cdate.details.booking[0].group === "PTN") {
                                                            var alloc = document.createTextNode((parseInt((cdate.details.allocation.length > 0 ? cdate.details.allocation[0].npk_qty : 0)) - parseInt((cdate.details.booking.length > 0 ? cdate.details.booking[0].numrooms : 0))));
                                                            tdDateData.appendChild(alloc);
                                                            tdDateData.style.textAlign = "center";
                                                            tdDateData.setAttribute("class", "detailgreen");
                                                            tdDateData.style.color = "black";
                                                            tr2.appendChild(tdDateData);
                                                        } else {
                                                            var alloc = document.createTextNode(parseInt((cdate.details.allocation.length > 0 ? cdate.details.allocation[0].npk_qty : 0)));
                                                            tdDateData.appendChild(alloc);
                                                            tdDateData.style.textAlign = "center";
                                                            tdDateData.setAttribute("class", "detailgreen");
                                                            tdDateData.style.color = "black";
                                                            tr2.appendChild(tdDateData);
                                                        }
                                                    } else {
                                                        var allocs = document.createTextNode(parseInt((cdate.details.allocation.length > 0 ? cdate.details.allocation[0].npk_qty : 0)));
                                                        tdDateData.appendChild(allocs);
                                                        tdDateData.style.textAlign = "center";
                                                        tdDateData.setAttribute("class", "detailgreen");
                                                        tdDateData.style.color = "black";
                                                        tr2.appendChild(tdDateData);
                                                    }
                                                }
                                            }
                                            if ((cdate.details.availability.length > 0 ? cdate.details.availability[0].classColor : "") === "yellow") {
                                                if (cdate.details.blocking.length > 0) {
                                                    if (cdate.details.booking.length > 0) {
                                                        if (cdate.details.booking[0].deduction === "Blocking") {
                                                            var alloc = document.createTextNode((parseInt((cdate.details.allocation.length > 0 ? cdate.details.allocation[0].npk_qty : 0)) + (parseInt((cdate.details.blocking.length > 0 ? cdate.details.blocking[0].block : 0)) - parseInt((cdate.details.booking.length > 0 ? cdate.details.booking[0].numrooms : 0)))));
                                                            tdDateData.appendChild(alloc);
                                                            tdDateData.style.textAlign = "center";
                                                            tdDateData.setAttribute("class", "detailyellow");
                                                            tdDateData.style.color = "black";
                                                            tr2.appendChild(tdDateData);
                                                        } else if (cdate.details.booking[0].deduction === "Allocation" && cdate.details.booking[0].group === "PTN") {
                                                            var alloc = document.createTextNode(((parseInt((cdate.details.allocation.length > 0 ? cdate.details.allocation[0].npk_qty : 0)) - parseInt((cdate.details.booking.length > 0 ? cdate.details.booking[0].numrooms : 0))) + (parseInt((cdate.details.blocking.length > 0 ? cdate.details.blocking[0].block : 0)))));
                                                            tdDateData.appendChild(alloc);
                                                            tdDateData.style.textAlign = "center";
                                                            tdDateData.setAttribute("class", "detailyellow");
                                                            tdDateData.style.color = "black";
                                                            tr2.appendChild(tdDateData);
                                                        }
                                                    } else {
                                                        var alloc = document.createTextNode(parseInt((cdate.details.allocation.length > 0 ? cdate.details.allocation[0].npk_qty : 0)) + parseInt((cdate.details.blocking.length > 0 ? cdate.details.blocking[0].block : 0)));
                                                        tdDateData.appendChild(alloc);
                                                        tdDateData.style.textAlign = "center";
                                                        tdDateData.setAttribute("class", "detailyellow");
                                                        tdDateData.style.color = "black";
                                                        tr2.appendChild(tdDateData);
                                                    }
                                                }
                                                else {
                                                    if (cdate.details.booking.length > 0) {
                                                        if (cdate.details.booking[0].deduction === "Allocation" && cdate.details.booking[0].group === "PTN") {
                                                            var alloc = document.createTextNode(parseInt((cdate.details.allocation.length > 0 ? cdate.details.allocation[0].npk_qty : 0)) - parseInt((cdate.details.booking.length > 0 ? cdate.details.booking[0].numrooms : 0)));
                                                            tdDateData.appendChild(alloc);
                                                            tdDateData.style.textAlign = "center";
                                                            tdDateData.setAttribute("class", "detailyellow");
                                                            tdDateData.style.color = "black";
                                                            tr2.appendChild(tdDateData);
                                                        } else {
                                                            var alloc = document.createTextNode(parseInt((cdate.details.allocation.length > 0 ? cdate.details.allocation[0].npk_qty : 0)));
                                                            tdDateData.appendChild(alloc);
                                                            tdDateData.style.textAlign = "center";
                                                            tdDateData.setAttribute("class", "detailyellow");
                                                            tdDateData.style.color = "black";
                                                            tr2.appendChild(tdDateData);
                                                        }
                                                    } else {
                                                        var allocs = document.createTextNode(parseInt((cdate.details.allocation.length > 0 ? cdate.details.allocation[0].npk_qty : 0)));
                                                        tdDateData.appendChild(allocs);
                                                        tdDateData.style.textAlign = "center";
                                                        tdDateData.setAttribute("class", "detailyellow");
                                                        tdDateData.style.color = "black";
                                                        tr2.appendChild(tdDateData);
                                                    }
                                                }
                                            }
                                            if ((cdate.details.availability.length > 0 ? cdate.details.availability[0].classColor : "") === "red") {
                                                if (cdate.details.blocking.length > 0) {
                                                    if (cdate.details.booking.length > 0) {
                                                        if (cdate.details.booking[0].deduction === "Blocking") {
                                                            var alloc = document.createTextNode((parseInt((cdate.details.allocation.length > 0 ? cdate.details.allocation[0].npk_qty : 0)) + (parseInt((cdate.details.blocking.length > 0 ? cdate.details.blocking[0].block : 0)) - parseInt((cdate.details.booking.length > 0 ? cdate.details.booking[0].numrooms : 0)))));
                                                            tdDateData.appendChild(alloc);
                                                            tdDateData.style.textAlign = "center";
                                                            tdDateData.setAttribute("class", "detailred");
                                                            tdDateData.style.color = "black";
                                                            tr2.appendChild(tdDateData);
                                                        } else if (cdate.details.booking[0].deduction === "Allocation" && cdate.details.booking[0].group === "PTN") {
                                                            var alloc = document.createTextNode(((parseInt((cdate.details.allocation.length > 0 ? cdate.details.allocation[0].npk_qty : 0)) - parseInt((cdate.details.booking.length > 0 ? cdate.details.booking[0].numrooms : 0))) + (parseInt((cdate.details.blocking.length > 0 ? cdate.details.blocking[0].block : 0)))));
                                                            tdDateData.appendChild(alloc);
                                                            tdDateData.style.textAlign = "center";
                                                            tdDateData.setAttribute("class", "detailred");
                                                            tdDateData.style.color = "black";
                                                            tr2.appendChild(tdDateData);
                                                        }
                                                    } else {
                                                        var alloc = document.createTextNode(parseInt((cdate.details.allocation.length > 0 ? cdate.details.allocation[0].npk_qty : 0)) + parseInt((cdate.details.blocking.length > 0 ? cdate.details.blocking[0].block : 0)));
                                                        tdDateData.appendChild(alloc);
                                                        tdDateData.style.textAlign = "center";
                                                        tdDateData.setAttribute("class", "detailred");
                                                        tdDateData.style.color = "black";
                                                        tr2.appendChild(tdDateData);
                                                    }
                                                }
                                                else {
                                                    if (cdate.details.booking.length > 0) {
                                                        if (cdate.details.booking[0].deduction === "Allocation" && cdate.details.booking[0].group === "PTN") {
                                                            var alloc = document.createTextNode(parseInt((cdate.details.allocation.length > 0 ? cdate.details.allocation[0].npk_qty : 0)) - parseInt((cdate.details.booking.length > 0 ? cdate.details.booking[0].numrooms : 0)));
                                                            tdDateData.appendChild(alloc);
                                                            tdDateData.style.textAlign = "center";
                                                            tdDateData.setAttribute("class", "detailred");
                                                            tdDateData.style.color = "black";
                                                            tr2.appendChild(tdDateData);
                                                        } else {
                                                            var alloc = document.createTextNode(parseInt((cdate.details.allocation.length > 0 ? cdate.details.allocation[0].npk_qty : 0)));
                                                            tdDateData.appendChild(alloc);
                                                            tdDateData.style.textAlign = "center";
                                                            tdDateData.setAttribute("class", "detailred");
                                                            tdDateData.style.color = "black";
                                                            tr2.appendChild(tdDateData);
                                                        }
                                                    } else {
                                                        var allocs = document.createTextNode(parseInt((cdate.details.allocation.length > 0 ? cdate.details.allocation[0].npk_qty : 0)));
                                                        tdDateData.appendChild(allocs);
                                                        tdDateData.style.textAlign = "center";
                                                        tdDateData.setAttribute("class", "detailred");
                                                        tdDateData.style.color = "black";
                                                        tr2.appendChild(tdDateData);
                                                    }
                                                }
                                            }
                                        }
                                    }
                                    else {
                                        if ((cdate.details.availability.length > 0 ? cdate.details.availability[0].classColor : "") === "green") {
                                            if (cdate.details.blocking.length > 0) {
                                                if (cdate.details.booking.length > 0) {
                                                    if (cdate.details.booking[0].deduction === "Blocking") {
                                                        var alloc = document.createTextNode(parseInt((cdate.details.blocking.length > 0 ? cdate.details.blocking[0].block : 0)) - parseInt((cdate.details.booking.length > 0 ? cdate.details.booking[0].numrooms : 0)));
                                                        tdDateData.appendChild(alloc);
                                                        tdDateData.style.textAlign = "center";
                                                        tdDateData.setAttribute("class", "detailgreen");
                                                        tdDateData.style.color = "black";
                                                        tr2.appendChild(tdDateData);
                                                    }
                                                } else {
                                                    var alloc = document.createTextNode(parseInt((cdate.details.blocking.length > 0 ? cdate.details.blocking[0].block : 0)));
                                                    tdDateData.appendChild(alloc);
                                                    tdDateData.style.textAlign = "center";
                                                    tdDateData.setAttribute("class", "detailgreen");
                                                    tdDateData.style.color = "black";
                                                    tr2.appendChild(tdDateData);

                                                }
                                            } else {
                                                var allocs = document.createTextNode(0);
                                                tdDateData.appendChild(allocs);
                                                tdDateData.style.textAlign = "center";
                                                tdDateData.setAttribute("class", "detailgreen");
                                                tdDateData.style.color = "black";
                                                tr2.appendChild(tdDateData);
                                            }
                                        }
                                        if ((cdate.details.availability.length > 0 ? cdate.details.availability[0].classColor : "") === "red") {
                                            if (cdate.details.blocking.length > 0) {
                                                if (cdate.details.booking.length > 0) {
                                                    if (cdate.details.booking[0].deduction === "Blocking") {
                                                        var alloc = document.createTextNode(parseInt((cdate.details.blocking.length > 0 ? cdate.details.blocking[0].block : 0)) - parseInt((cdate.details.booking.length > 0 ? cdate.details.booking[0].numrooms : 0)));
                                                        tdDateData.appendChild(alloc);
                                                        tdDateData.style.textAlign = "center";
                                                        tdDateData.setAttribute("class", "detailred");
                                                        tdDateData.style.color = "black";
                                                        tr2.appendChild(tdDateData);
                                                    } else {
                                                        var alloc = document.createTextNode(parseInt((cdate.details.blocking.length > 0 ? cdate.details.blocking[0].block : 0)));
                                                        tdDateData.appendChild(alloc);
                                                        tdDateData.style.textAlign = "center";
                                                        tdDateData.setAttribute("class", "detailred");
                                                        tdDateData.style.color = "black";
                                                        tr2.appendChild(tdDateData);
                                                    }
                                                } else {
                                                    var alloc = document.createTextNode(parseInt((cdate.details.blocking.length > 0 ? cdate.details.blocking[0].block : 0)));
                                                    tdDateData.appendChild(alloc);
                                                    tdDateData.style.textAlign = "center";
                                                    tdDateData.setAttribute("class", "detailred");
                                                    tdDateData.style.color = "black";
                                                    tr2.appendChild(tdDateData);

                                                }
                                            } else {
                                                var allocs = document.createTextNode(0);
                                                tdDateData.appendChild(allocs);
                                                tdDateData.style.textAlign = "center";
                                                tdDateData.setAttribute("class", "detailred");
                                                tdDateData.style.color = "black";
                                                tr2.appendChild(tdDateData);
                                            }
                                        }
                                        if ((cdate.details.availability.length > 0 ? cdate.details.availability[0].classColor : "") === "yellow") {
                                            if (cdate.details.blocking.length > 0) {
                                                if (cdate.details.booking.length > 0) {
                                                    if (cdate.details.booking[0].deduction === "Blocking") {
                                                        var alloc = document.createTextNode(parseInt((cdate.details.blocking.length > 0 ? cdate.details.blocking[0].block : 0)) - parseInt((cdate.details.booking.length > 0 ? cdate.details.booking[0].numrooms : 0)));
                                                        tdDateData.appendChild(alloc);
                                                        tdDateData.style.textAlign = "center";
                                                        tdDateData.setAttribute("class", "detailyellow");
                                                        tdDateData.style.color = "black";
                                                        tr2.appendChild(tdDateData);
                                                    } else {
                                                        var alloc = document.createTextNode(parseInt((cdate.details.blocking.length > 0 ? cdate.details.blocking[0].block : 0)));
                                                        tdDateData.appendChild(alloc);
                                                        tdDateData.style.textAlign = "center";
                                                        tdDateData.setAttribute("class", "detailyellow");
                                                        tdDateData.style.color = "black";
                                                        tr2.appendChild(tdDateData);
                                                    }
                                                } else {
                                                    var alloc = document.createTextNode(parseInt((cdate.details.blocking.length > 0 ? cdate.details.blocking[0].block : 0)));
                                                    tdDateData.appendChild(alloc);
                                                    tdDateData.style.textAlign = "center";
                                                    tdDateData.setAttribute("class", "detailyellow");
                                                    tdDateData.style.color = "black";
                                                    tr2.appendChild(tdDateData);

                                                }
                                            } else {
                                                var allocs = document.createTextNode(0);
                                                tdDateData.appendChild(allocs);
                                                tdDateData.style.textAlign = "center";
                                                tdDateData.setAttribute("class", "detailyellow");
                                                tdDateData.style.color = "black";
                                                tr2.appendChild(tdDateData);
                                            }
                                        }
                                    }
                                    tdDateData.setAttribute('id',
                                        element.hotelname + "~"
                                        + element.roomname + "~"
                                        + (cdate.details.availability.length > 0 ? cdate.details.availability[0].status : "No Update") + "~"
                                        + (cdate.details.availability.length > 0 ? cdate.details.availability[0].updatedAt : "") + "~"
                                        + (cdate.details.allocation.length > 0 ? cdate.details.allocation[0].npk_qty : 0) + "~"
                                        + (cdate.details.allocation.length > 0 ? cdate.details.allocation[0].pk_qty : 0) + "~"
                                        + (cdate.details.allocation.length > 0 ? cdate.details.allocation[0].high_qty : 0) + "~"
                                        + (cdate.details.seasondetails.length > 0 ? cdate.details.seasondetails[0].season : "") + "~"
                                        + (cdate.details.allocation.length > 0 ? cdate.details.allocation[0].updatedAt : 0) + "~"
                                        + (cdate.details.blocking.length > 0 ? cdate.details.blocking[0].block : 0) + "~"
                                        + (cdate.details.blocking.length > 0 ? cdate.details.blocking[0].cancel : "none") + "~"
                                        + (cdate.details.blocking.length > 0 ? cdate.details.blocking[0].updatedAt : "") + "~"
                                        + (cdate.details.booking.length > 0 ? cdate.details.booking[0].numrooms : 0) + "~"
                                        + (cdate.details.booking.length > 0 ? cdate.details.booking[0].deduction : "") + "~"
                                        + (cdate.details.booking.length > 0 ? cdate.details.booking[0].updatedAt : "") + "~"
                                        + (cdate.details.allocation.length > 0 ? cdate.details.allocation[0].pk_coff : 0) + "~"
                                        + (cdate.details.allocation.length > 0 ? cdate.details.allocation[0].npk_coff : 0) + "~"
                                        + (cdate.details.allocation.length > 0 ? cdate.details.allocation[0].high_coff : 0) + "~"
                                        + cdate.date + "~"
                                        + (cdate.details.seasondetails.length > 0 ? true : false) + "~"
                                        + 0 + "~"
                                        + 0 + "~"
                                        + 0 + "~"
                                        + 0 + "~"
                                        + 0 + "~"
                                        + 0 + "~"
                                        + 0);
                                    var self = this;
                                    tdDateData.addEventListener('mouseover', function (e) {
                                        self.tapped = e.target.id;
                                    });
                                    tdDateData.addEventListener('mouseout', function (f) {
                                        self.opened = f.target.id;
                                    });
                                }
                                else {
                                    var tdDateData = document.createElement('td');
                                    if (cdate.details.allocation.length > 0) {
                                        if (cdate.details.seasondetails.length > 0) {
                                            if ((cdate.details.seasondetails.length > 0 ? cdate.details.seasondetails[0].season : "") === "Peak Season") {
                                                if (cdate.details.blocking.length > 0) {
                                                    if (cdate.details.booking.length > 0) {
                                                        if (cdate.details.booking[0].deduction === "Blocking") {
                                                            var alloca = document.createTextNode((parseInt((cdate.details.allocation.length > 0 ? cdate.details.allocation[0].pk_qty : 0)) + (parseInt((cdate.details.blocking.length > 0 ? cdate.details.blocking[0].block : 0)) - parseInt((cdate.details.booking.length > 0 ? cdate.details.booking[0].numrooms : 0)))));
                                                            tdDateData.appendChild(alloca);
                                                            tdDateData.style.textAlign = "center";
                                                            tdDateData.style.color = "black";
                                                            tr2.appendChild(tdDateData);
                                                        } else if (cdate.details.booking[0].deduction === "Allocation" && cdate.details.booking[0].group === "PTN") {
                                                            var alloca = document.createTextNode(((parseInt((cdate.details.allocation.length > 0 ? cdate.details.allocation[0].pk_qty : 0)) - parseInt((cdate.details.booking.length > 0 ? cdate.details.booking[0].numrooms : 0))) + parseInt((cdate.details.blocking.length > 0 ? cdate.details.blocking[0].block : 0))));
                                                            tdDateData.appendChild(alloca);
                                                            tdDateData.style.textAlign = "center";
                                                            tdDateData.style.color = "black";
                                                            tr2.appendChild(tdDateData);
                                                        }
                                                    } else {
                                                        var alloca = document.createTextNode(parseInt((cdate.details.allocation.length > 0 ? cdate.details.allocation[0].pk_qty : 0)) + parseInt((cdate.details.blocking.length > 0 ? cdate.details.blocking[0].block : 0)));
                                                        tdDateData.appendChild(alloca);
                                                        tdDateData.style.textAlign = "center";
                                                        tdDateData.style.color = "black";
                                                        tr2.appendChild(tdDateData);
                                                    }
                                                } else {
                                                    if (cdate.details.booking.length > 0) {
                                                        if (cdate.details.booking[0].deduction === "Allocation" && cdate.details.booking[0].group === "PTN") {
                                                            var allocas = document.createTextNode(parseInt((cdate.details.allocation.length > 0 ? cdate.details.allocation[0].pk_qty : 0)) - parseInt((cdate.details.booking.length > 0 ? cdate.details.booking[0].numrooms : 0)));
                                                            tdDateData.appendChild(allocas);
                                                            tdDateData.style.textAlign = "center";
                                                            tdDateData.style.color = "black";
                                                            tr2.appendChild(tdDateData);
                                                        } else {
                                                            var allocas = document.createTextNode(parseInt((cdate.details.allocation.length > 0 ? cdate.details.allocation[0].pk_qty : 0)));
                                                            tdDateData.appendChild(allocas);
                                                            tdDateData.style.textAlign = "center";
                                                            tdDateData.style.color = "black";
                                                            tr2.appendChild(tdDateData);
                                                        }
                                                    } else {
                                                        var allocas = document.createTextNode(parseInt((cdate.details.allocation.length > 0 ? cdate.details.allocation[0].pk_qty : 0)));
                                                        tdDateData.appendChild(allocas);
                                                        tdDateData.style.textAlign = "center";
                                                        tdDateData.style.color = "black";
                                                        tr2.appendChild(tdDateData);
                                                    }
                                                }
                                            }
                                            else {
                                                if (cdate.details.blocking.length > 0) {
                                                    if (cdate.details.booking.length > 0) {
                                                        if (cdate.details.booking[0].deduction === "Blocking") {
                                                            var alloca = document.createTextNode((parseInt((cdate.details.allocation.length > 0 ? cdate.details.allocation[0].high_qty : 0)) + (parseInt((cdate.details.blocking.length > 0 ? cdate.details.blocking[0].block : 0)) - parseInt((cdate.details.booking.length > 0 ? cdate.details.booking[0].numrooms : 0)))));
                                                            tdDateData.appendChild(alloca);
                                                            tdDateData.style.textAlign = "center";
                                                            tdDateData.style.color = "black";
                                                            tr2.appendChild(tdDateData);
                                                        } else if (cdate.details.booking[0].deduction === "Allocation" && cdate.details.booking[0].group === "PTN") {
                                                            var alloca = document.createTextNode(((parseInt((cdate.details.allocation.length > 0 ? cdate.details.allocation[0].high_qty : 0)) - parseInt((cdate.details.booking.length > 0 ? cdate.details.booking[0].numrooms : 0))) + parseInt((cdate.details.blocking.length > 0 ? cdate.details.blocking[0].block : 0))));
                                                            tdDateData.appendChild(alloca);
                                                            tdDateData.style.textAlign = "center";
                                                            tdDateData.style.color = "black";
                                                            tr2.appendChild(tdDateData);
                                                        }
                                                    } else {
                                                        var alloca = document.createTextNode(parseInt((cdate.details.allocation.length > 0 ? cdate.details.allocation[0].high_qty : 0)) + parseInt((cdate.details.blocking.length > 0 ? cdate.details.blocking[0].block : 0)));
                                                        tdDateData.appendChild(alloca);
                                                        tdDateData.style.textAlign = "center";
                                                        tdDateData.style.color = "black";
                                                        tr2.appendChild(tdDateData);
                                                    }
                                                } else {
                                                    if (cdate.details.booking.length > 0) {
                                                        if (cdate.details.booking[0].deduction === "Allocation" && cdate.details.booking[0].group === "PTN") {
                                                            var allocas = document.createTextNode(parseInt(cdate.details.allocation.length > 0 ? cdate.details.allocation[0].high_qty : 0) - parseInt((cdate.details.booking.length > 0 ? cdate.details.booking[0].numrooms : 0)));
                                                            tdDateData.appendChild(allocas);
                                                            tdDateData.style.textAlign = "center";
                                                            tdDateData.style.color = "black";
                                                            tr2.appendChild(tdDateData);
                                                        } else {
                                                            var allocas = document.createTextNode(parseInt((cdate.details.allocation.length > 0 ? cdate.details.allocation[0].high_qty : 0)));
                                                            tdDateData.appendChild(allocas);
                                                            tdDateData.style.textAlign = "center";
                                                            tdDateData.style.color = "black";
                                                            tr2.appendChild(tdDateData);
                                                        }
                                                    } else {
                                                        var allocas = document.createTextNode(parseInt((cdate.details.allocation.length > 0 ? cdate.details.allocation[0].high_qty : 0)));
                                                        tdDateData.appendChild(allocas);
                                                        tdDateData.style.textAlign = "center";
                                                        tdDateData.style.color = "black";
                                                        tr2.appendChild(tdDateData);
                                                    }
                                                }

                                            }
                                        }
                                        else {
                                            if (cdate.details.blocking.length > 0) {
                                                if (cdate.details.booking.length > 0) {
                                                    if (cdate.details.booking[0].deduction === "Blocking") {
                                                        var alloca = document.createTextNode((parseInt((cdate.details.allocation.length > 0 ? cdate.details.allocation[0].npk_qty : 0)) + (parseInt((cdate.details.blocking.length > 0 ? cdate.details.blocking[0].block : 0)) - parseInt((cdate.details.booking.length > 0 ? cdate.details.booking[0].numrooms : 0)))));
                                                        tdDateData.appendChild(alloca);
                                                        tdDateData.style.textAlign = "center";
                                                        tdDateData.style.color = "black";
                                                        tr2.appendChild(tdDateData);
                                                    } else if (cdate.details.booking[0].deduction === "Allocation" && cdate.details.booking[0].group === "PTN") {
                                                        var alloca = document.createTextNode(((parseInt((cdate.details.allocation.length > 0 ? cdate.details.allocation[0].npk_qty : 0)) - parseInt((cdate.details.booking.length > 0 ? cdate.details.booking[0].numrooms : 0))) + parseInt((cdate.details.blocking.length > 0 ? cdate.details.blocking[0].block : 0))));
                                                        tdDateData.appendChild(alloca);
                                                        tdDateData.style.textAlign = "center";
                                                        tdDateData.style.color = "black";
                                                        tr2.appendChild(tdDateData);
                                                    }
                                                } else {
                                                    var alloca = document.createTextNode(parseInt((cdate.details.allocation.length > 0 ? cdate.details.allocation[0].npk_qty : 0)) + parseInt((cdate.details.blocking.length > 0 ? cdate.details.blocking[0].block : 0)));
                                                    tdDateData.appendChild(alloca);
                                                    tdDateData.style.textAlign = "center";
                                                    tdDateData.style.color = "black";
                                                    tr2.appendChild(tdDateData);
                                                }
                                            } else {
                                                if (cdate.details.booking.length > 0) {
                                                    if (cdate.details.booking[0].deduction === "Allocation" && cdate.details.booking[0].group === "PTN") {
                                                        var allocas = document.createTextNode(parseInt(cdate.details.allocation.length > 0 ? cdate.details.allocation[0].npk_qty : 0) - parseInt((cdate.details.booking.length > 0 ? cdate.details.booking[0].numrooms : 0)));
                                                        tdDateData.appendChild(allocas);
                                                        tdDateData.style.textAlign = "center";
                                                        tdDateData.style.color = "black";
                                                        tr2.appendChild(tdDateData);
                                                    } else {
                                                        var allocas = document.createTextNode(parseInt((cdate.details.allocation.length > 0 ? cdate.details.allocation[0].npk_qty : 0)));
                                                        tdDateData.appendChild(allocas);
                                                        tdDateData.style.textAlign = "center";
                                                        tdDateData.style.color = "black";
                                                        tr2.appendChild(tdDateData);
                                                    }
                                                } else {
                                                    var allocas = document.createTextNode(parseInt(cdate.details.allocation.length > 0 ? cdate.details.allocation[0].npk_qty : 0));
                                                    tdDateData.appendChild(allocas);
                                                    tdDateData.style.textAlign = "center";
                                                    tdDateData.style.color = "black";
                                                    tr2.appendChild(tdDateData);
                                                }
                                            }
                                        }
                                    }
                                    else {
                                        if (cdate.details.blocking.length > 0) {
                                            if (cdate.details.booking.length > 0) {
                                                if (cdate.details.booking[0].deduction === "Blocking") {
                                                    var alloca = document.createTextNode(parseInt((cdate.details.blocking.length > 0 ? cdate.details.blocking[0].block : 0)) - parseInt((cdate.details.booking.length > 0 ? cdate.details.booking[0].numrooms : 0)));
                                                    tdDateData.appendChild(alloca);
                                                    tdDateData.style.textAlign = "center";
                                                    tdDateData.style.color = "black";
                                                    tr2.appendChild(tdDateData);
                                                } else {
                                                    var alloca = document.createTextNode(parseInt((cdate.details.blocking.length > 0 ? cdate.details.blocking[0].block : 0)));
                                                    tdDateData.appendChild(alloca);
                                                    tdDateData.style.textAlign = "center";
                                                    tdDateData.style.color = "black";
                                                    tr2.appendChild(tdDateData);
                                                }
                                            } else {
                                                var alloca = document.createTextNode(parseInt((cdate.details.blocking.length > 0 ? cdate.details.blocking[0].block : 0)));
                                                tdDateData.appendChild(alloca);
                                                tdDateData.style.textAlign = "center";
                                                tdDateData.style.color = "black";
                                                tr2.appendChild(tdDateData);
                                            }
                                        } else {
                                            var allocas = document.createTextNode(0);
                                            tdDateData.appendChild(allocas);
                                            tdDateData.style.textAlign = "center";
                                            tdDateData.style.color = "black";
                                            tr2.appendChild(tdDateData);
                                        }
                                    }
                                    tdDateData.setAttribute('id',
                                        element.hotelname + "~"
                                        + element.roomname + "~"
                                        + (cdate.details.availability.length > 0 ? cdate.details.availability[0].status : "No Update") + "~"
                                        + (cdate.details.availability.length > 0 ? cdate.details.availability[0].updatedAt : "") + "~"
                                        + (cdate.details.allocation.length > 0 ? cdate.details.allocation[0].npk_qty : 0) + "~"
                                        + (cdate.details.allocation.length > 0 ? cdate.details.allocation[0].pk_qty : 0) + "~"
                                        + (cdate.details.allocation.length > 0 ? cdate.details.allocation[0].high_qty : 0) + "~"
                                        + (cdate.details.seasondetails.length > 0 ? cdate.details.seasondetails[0].season : "") + "~"
                                        + (cdate.details.allocation.length > 0 ? cdate.details.allocation[0].updatedAt : 0) + "~"
                                        + (cdate.details.blocking.length > 0 ? cdate.details.blocking[0].block : 0) + "~"
                                        + (cdate.details.blocking.length > 0 ? cdate.details.blocking[0].cancel : "none") + "~"
                                        + (cdate.details.blocking.length > 0 ? cdate.details.blocking[0].updatedAt : "") + "~"
                                        + (cdate.details.booking.length > 0 ? cdate.details.booking[0].numrooms : 0) + "~"
                                        + (cdate.details.booking.length > 0 ? cdate.details.booking[0].deduction : "") + "~"
                                        + (cdate.details.booking.length > 0 ? cdate.details.booking[0].updatedAt : "") + "~"
                                        + (cdate.details.allocation.length > 0 ? cdate.details.allocation[0].pk_coff : 0) + "~"
                                        + (cdate.details.allocation.length > 0 ? cdate.details.allocation[0].npk_coff : 0) + "~"
                                        + (cdate.details.allocation.length > 0 ? cdate.details.allocation[0].high_coff : 0) + "~"
                                        + cdate.date + "~"
                                        + (cdate.details.seasondetails.length > 0 ? true : false) + "~"
                                        + 0 + "~"
                                        + 0 + "~"
                                        + 0 + "~"
                                        + 0 + "~"
                                        + 0 + "~"
                                        + 0 + "~"
                                        + 0);
                                    var self = this;
                                    tdDateData.addEventListener('mouseover', function (e) {
                                        self.tapped = e.target.id;
                                    });
                                    tdDateData.addEventListener('mouseout', function (f) {
                                        self.opened = f.target.id;
                                    });
                                }

                            }
                            else if (!ptngroup && tabigroup) {
                                if (cdate.details.availability.length > 0) {
                                    var tdDateData = document.createElement('td');
                                    if (cdate.details.allocation.length > 0) {
                                        if (cdate.details.seasondetails.length > 0) {
                                            // if ((cdate.details.seasondetails.length > 0 ? cdate.details.seasondetails[0].season : "") || (cdate.details.seasondetails.length > 0 ? cdate.details.seasondetails[1].season : "") === "Peak Season") {
                                            if ((cdate.details.seasondetails.length > 0 ? cdate.details.seasondetails[0].season : "") == "Peak Season") {
                                                if ((cdate.details.availability.length > 0 ? cdate.details.availability[0].classColor : "") === "green") {
                                                    if (cdate.details.blocking.length > 0) {
                                                        if (cdate.details.booking.length > 0) {
                                                            if (cdate.details.booking[0].deduction === "Blocking") {
                                                                var alloc = document.createTextNode((parseInt((cdate.details.allocation.length > 1 ? cdate.details.allocation[1].pk_qty : 0)) + (parseInt((cdate.details.blocking.length > 0 ? cdate.details.blocking[0].block : 0)) - parseInt((cdate.details.booking.length > 0 ? cdate.details.booking[0].numrooms : 0)))));
                                                                tdDateData.appendChild(alloc);
                                                                tdDateData.style.textAlign = "center";
                                                                tdDateData.setAttribute("class", "detailgreen");
                                                                tdDateData.style.color = "black";
                                                                tr2.appendChild(tdDateData);
                                                            } else if (cdate.details.booking[0].deduction === "Allocation" && cdate.details.booking[0].group === "Tabikobo") {
                                                                var alloc = document.createTextNode(((parseInt((cdate.details.allocation.length > 1 ? cdate.details.allocation[1].pk_qty : 0)) - parseInt((cdate.details.booking.length > 0 ? cdate.details.booking[0].numrooms : 0))) + (parseInt((cdate.details.blocking.length > 0 ? cdate.details.blocking[0].block : 0)))));
                                                                tdDateData.appendChild(alloc);
                                                                tdDateData.style.textAlign = "center";
                                                                tdDateData.setAttribute("class", "detailgreen");
                                                                tdDateData.style.color = "black";
                                                                tr2.appendChild(tdDateData);
                                                            }
                                                        } else {
                                                            var alloc = document.createTextNode(parseInt((cdate.details.allocation.length > 1 ? cdate.details.allocation[1].pk_qty : 0)) + parseInt((cdate.details.blocking.length > 0 ? cdate.details.blocking[0].block : 0)));
                                                            tdDateData.appendChild(alloc);
                                                            tdDateData.style.textAlign = "center";
                                                            tdDateData.setAttribute("class", "detailgreen");
                                                            tdDateData.style.color = "black";
                                                            tr2.appendChild(tdDateData);
                                                        }
                                                    }
                                                    else {
                                                        if (cdate.details.booking.length > 0) {
                                                            if (cdate.details.booking[0].deduction === "Allocation" && cdate.details.booking[0].group === "Tabikobo") {
                                                                var alloc = document.createTextNode((parseInt((cdate.details.allocation.length > 1 ? cdate.details.allocation[1].pk_qty : 0)) - parseInt((cdate.details.booking.length > 0 ? cdate.details.booking[0].numrooms : 0))));
                                                                tdDateData.appendChild(alloc);
                                                                tdDateData.style.textAlign = "center";
                                                                tdDateData.setAttribute("class", "detailgreen");
                                                                tdDateData.style.color = "black";
                                                                tr2.appendChild(tdDateData);
                                                            } else {
                                                                var alloc = document.createTextNode(parseInt((cdate.details.allocation.length > 1 ? cdate.details.allocation[1].pk_qty : 0)));
                                                                tdDateData.appendChild(alloc);
                                                                tdDateData.style.textAlign = "center";
                                                                tdDateData.setAttribute("class", "detailgreen");
                                                                tdDateData.style.color = "black";
                                                                tr2.appendChild(tdDateData);
                                                            }
                                                        } else {
                                                            var allocs = document.createTextNode(parseInt((cdate.details.allocation.length > 1 ? cdate.details.allocation[1].pk_qty : 0)));
                                                            tdDateData.appendChild(allocs);
                                                            tdDateData.style.textAlign = "center";
                                                            tdDateData.setAttribute("class", "detailgreen");
                                                            tdDateData.style.color = "black";
                                                            tr2.appendChild(tdDateData);
                                                        }
                                                    }
                                                }
                                                if ((cdate.details.availability.length > 0 ? cdate.details.availability[0].classColor : "") === "yellow") {
                                                    if (cdate.details.blocking.length > 0) {
                                                        if (cdate.details.booking.length > 0) {
                                                            if (cdate.details.booking[0].deduction === "Blocking") {
                                                                var alloc = document.createTextNode((parseInt((cdate.details.allocation.length > 1 ? cdate.details.allocation[1].pk_qty : 0)) + (parseInt((cdate.details.blocking.length > 0 ? cdate.details.blocking[0].block : 0)) - parseInt((cdate.details.booking.length > 0 ? cdate.details.booking[0].numrooms : 0)))));
                                                                tdDateData.appendChild(alloc);
                                                                tdDateData.style.textAlign = "center";
                                                                tdDateData.setAttribute("class", "detailyellow");
                                                                tdDateData.style.color = "black";
                                                                tr2.appendChild(tdDateData);
                                                            } else if (cdate.details.booking[0].deduction === "Allocation" && cdate.details.booking[0].group === "Tabikobo") {
                                                                var alloc = document.createTextNode(((parseInt((cdate.details.allocation.length > 1 ? cdate.details.allocation[1].pk_qty : 0)) - parseInt((cdate.details.booking.length > 0 ? cdate.details.booking[0].numrooms : 0))) + (parseInt((cdate.details.blocking.length > 0 ? cdate.details.blocking[0].block : 0)))));
                                                                tdDateData.appendChild(alloc);
                                                                tdDateData.style.textAlign = "center";
                                                                tdDateData.setAttribute("class", "detailyellow");
                                                                tdDateData.style.color = "black";
                                                                tr2.appendChild(tdDateData);
                                                            }
                                                        } else {
                                                            var alloc = document.createTextNode(parseInt((cdate.details.allocation.length > 1 ? cdate.details.allocation[1].pk_qty : 0)) + parseInt((cdate.details.blocking.length > 0 ? cdate.details.blocking[0].block : 0)));
                                                            tdDateData.appendChild(alloc);
                                                            tdDateData.style.textAlign = "center";
                                                            tdDateData.setAttribute("class", "detailyellow");
                                                            tdDateData.style.color = "black";
                                                            tr2.appendChild(tdDateData);
                                                        }
                                                    }
                                                    else {
                                                        if (cdate.details.booking.length > 0) {
                                                            if (cdate.details.booking[0].deduction === "Allocation" && cdate.details.booking[0].group === "Tabikobo") {
                                                                var alloc = document.createTextNode(parseInt((cdate.details.allocation.length > 1 ? cdate.details.allocation[1].pk_qty : 0)) - parseInt((cdate.details.booking.length > 0 ? cdate.details.booking[0].numrooms : 0)));
                                                                tdDateData.appendChild(alloc);
                                                                tdDateData.style.textAlign = "center";
                                                                tdDateData.setAttribute("class", "detailyellow");
                                                                tdDateData.style.color = "black";
                                                                tr2.appendChild(tdDateData);
                                                            } else {
                                                                var alloc = document.createTextNode(parseInt((cdate.details.allocation.length > 1 ? cdate.details.allocation[1].pk_qty : 0)));
                                                                tdDateData.appendChild(alloc);
                                                                tdDateData.style.textAlign = "center";
                                                                tdDateData.setAttribute("class", "detailyellow");
                                                                tdDateData.style.color = "black";
                                                                tr2.appendChild(tdDateData);
                                                            }
                                                        } else {
                                                            var allocs = document.createTextNode(parseInt((cdate.details.allocation.length > 1 ? cdate.details.allocation[1].pk_qty : 0)));
                                                            tdDateData.appendChild(allocs);
                                                            tdDateData.style.textAlign = "center";
                                                            tdDateData.setAttribute("class", "detailyellow");
                                                            tdDateData.style.color = "black";
                                                            tr2.appendChild(tdDateData);
                                                        }
                                                    }
                                                }
                                                if ((cdate.details.availability.length > 0 ? cdate.details.availability[0].classColor : "") === "red") {
                                                    if (cdate.details.blocking.length > 0) {
                                                        if (cdate.details.booking.length > 0) {
                                                            if (cdate.details.booking[0].deduction === "Blocking") {
                                                                var alloc = document.createTextNode((parseInt((cdate.details.allocation.length > 1 ? cdate.details.allocation[1].pk_qty : 0)) + (parseInt((cdate.details.blocking.length > 0 ? cdate.details.blocking[0].block : 0)) - parseInt((cdate.details.booking.length > 0 ? cdate.details.booking[0].numrooms : 0)))));
                                                                tdDateData.appendChild(alloc);
                                                                tdDateData.style.textAlign = "center";
                                                                tdDateData.setAttribute("class", "detailred");
                                                                tdDateData.style.color = "black";
                                                                tr2.appendChild(tdDateData);
                                                            } else if (cdate.details.booking[0].deduction === "Allocation" && cdate.details.booking[0].group === "Tabikobo") {
                                                                var alloc = document.createTextNode(((parseInt((cdate.details.allocation.length > 1 ? cdate.details.allocation[1].pk_qty : 0)) - parseInt((cdate.details.booking.length > 0 ? cdate.details.booking[0].numrooms : 0))) + (parseInt((cdate.details.blocking.length > 0 ? cdate.details.blocking[0].block : 0)))));
                                                                tdDateData.appendChild(alloc);
                                                                tdDateData.style.textAlign = "center";
                                                                tdDateData.setAttribute("class", "detailred");
                                                                tdDateData.style.color = "black";
                                                                tr2.appendChild(tdDateData);
                                                            }
                                                        } else {
                                                            var alloc = document.createTextNode(parseInt((cdate.details.allocation.length > 1 ? cdate.details.allocation[1].pk_qty : 0)) + parseInt((cdate.details.blocking.length > 0 ? cdate.details.blocking[0].block : 0)));
                                                            tdDateData.appendChild(alloc);
                                                            tdDateData.style.textAlign = "center";
                                                            tdDateData.setAttribute("class", "detailred");
                                                            tdDateData.style.color = "black";
                                                            tr2.appendChild(tdDateData);
                                                        }
                                                    }
                                                    else {
                                                        if (cdate.details.booking.length > 0) {
                                                            if (cdate.details.booking[0].deduction === "Allocation" && cdate.details.booking[0].group === "Tabikobo") {
                                                                var alloc = document.createTextNode(parseInt((cdate.details.allocation.length > 1 ? cdate.details.allocation[1].pk_qty : 0)) - parseInt((cdate.details.booking.length > 0 ? cdate.details.booking[0].numrooms : 0)));
                                                                tdDateData.appendChild(alloc);
                                                                tdDateData.style.textAlign = "center";
                                                                tdDateData.setAttribute("class", "detailred");
                                                                tdDateData.style.color = "black";
                                                                tr2.appendChild(tdDateData);
                                                            } else {
                                                                var alloc = document.createTextNode(parseInt((cdate.details.allocation.length > 1 ? cdate.details.allocation[1].pk_qty : 0)));
                                                                tdDateData.appendChild(alloc);
                                                                tdDateData.style.textAlign = "center";
                                                                tdDateData.setAttribute("class", "detailred");
                                                                tdDateData.style.color = "black";
                                                                tr2.appendChild(tdDateData);
                                                            }
                                                        } else {
                                                            var allocs = document.createTextNode(parseInt((cdate.details.allocation.length > 1 ? cdate.details.allocation[1].pk_qty : 0)));
                                                            tdDateData.appendChild(allocs);
                                                            tdDateData.style.textAlign = "center";
                                                            tdDateData.setAttribute("class", "detailred");
                                                            tdDateData.style.color = "black";
                                                            tr2.appendChild(tdDateData);
                                                        }
                                                    }
                                                }
                                            }
                                            else {
                                                if ((cdate.details.availability.length > 0 ? cdate.details.availability[0].classColor : "") === "green") {
                                                    if (cdate.details.blocking.length > 0) {
                                                        if (cdate.details.booking.length > 0) {
                                                            if (cdate.details.booking[0].deduction === "Blocking") {
                                                                var alloc = document.createTextNode(((parseInt((cdate.details.blocking.length > 0 ? cdate.details.blocking[0].block : 0)) - parseInt((cdate.details.booking.length > 0 ? cdate.details.booking[0].numrooms : 0)))) + parseInt((cdate.details.allocation.length > 1 ? cdate.details.allocation[1].high_qty : 0)));
                                                                tdDateData.appendChild(alloc);
                                                                tdDateData.style.textAlign = "center";
                                                                tdDateData.setAttribute("class", "detailgreen");
                                                                tdDateData.style.color = "black";
                                                                tr2.appendChild(tdDateData);
                                                            } else if (cdate.details.booking[0].deduction === "Allocation" && cdate.details.booking[0].group === "Tabikobo") {
                                                                var alloc = document.createTextNode(((parseInt((cdate.details.allocation.length > 1 ? cdate.details.allocation[1].high_qty : 0)) - parseInt((cdate.details.booking.length > 0 ? cdate.details.booking[0].numrooms : 0))) + (parseInt((cdate.details.blocking.length > 0 ? cdate.details.blocking[0].block : 0)))));
                                                                tdDateData.appendChild(alloc);
                                                                tdDateData.style.textAlign = "center";
                                                                tdDateData.setAttribute("class", "detailgreen");
                                                                tdDateData.style.color = "black";
                                                                tr2.appendChild(tdDateData);
                                                            }
                                                        } else {
                                                            var alloc = document.createTextNode(parseInt((cdate.details.blocking.length > 0 ? cdate.details.blocking[0].block : 0)) + parseInt((cdate.details.allocation.length > 1 ? cdate.details.allocation[1].high_qty : 0)));
                                                            tdDateData.appendChild(alloc);
                                                            tdDateData.style.textAlign = "center";
                                                            tdDateData.setAttribute("class", "detailgreen");
                                                            tdDateData.style.color = "black";
                                                            tr2.appendChild(tdDateData);
                                                        }
                                                    }
                                                    else {
                                                        if (cdate.details.booking.length > 0) {
                                                            if (cdate.details.booking[0].deduction === "Allocation" && cdate.details.booking[0].group === "Tabikobo") {
                                                                var alloc = document.createTextNode(( parseInt((cdate.details.allocation.length > 1 ? cdate.details.allocation[1].high_qty : 0)) - parseInt((cdate.details.booking.length > 0 ? cdate.details.booking[0].numrooms : 0))));
                                                                tdDateData.appendChild(alloc);
                                                                tdDateData.style.textAlign = "center";
                                                                tdDateData.setAttribute("class", "detailgreen");
                                                                tdDateData.style.color = "black";
                                                                tr2.appendChild(tdDateData);
                                                            } else {
                                                                var alloc = document.createTextNode(parseInt((cdate.details.allocation.length > 1 ? cdate.details.allocation[1].high_qty : 0)));
                                                                tdDateData.appendChild(alloc);
                                                                tdDateData.style.textAlign = "center";
                                                                tdDateData.setAttribute("class", "detailgreen");
                                                                tdDateData.style.color = "black";
                                                                tr2.appendChild(tdDateData);
                                                            }
                                                        } else {
                                                            var allocs = document.createTextNode((parseInt((cdate.details.allocation.length > 1 ? cdate.details.allocation[1].high_qty : 0))));
                                                            tdDateData.appendChild(allocs);
                                                            tdDateData.style.textAlign = "center";
                                                            tdDateData.setAttribute("class", "detailgreen");
                                                            tdDateData.style.color = "black";
                                                            tr2.appendChild(tdDateData);
                                                        }
                                                    }
                                                }
                                                if ((cdate.details.availability.length > 0 ? cdate.details.availability[0].classColor : "") === "yellow") {
                                                    if (cdate.details.blocking.length > 0) {
                                                        if (cdate.details.booking.length > 0) {
                                                            if (cdate.details.booking[0].deduction === "Blocking") {
                                                                var alloc = document.createTextNode(((parseInt((cdate.details.blocking.length > 0 ? cdate.details.blocking[0].block : 0)) - parseInt((cdate.details.booking.length > 0 ? cdate.details.booking[0].numrooms : 0)))) + parseInt((cdate.details.allocation.length > 1 ? cdate.details.allocation[1].high_qty : 0)));
                                                                tdDateData.appendChild(alloc);
                                                                tdDateData.style.textAlign = "center";
                                                                tdDateData.setAttribute("class", "detailyellow");
                                                                tdDateData.style.color = "black";
                                                                tr2.appendChild(tdDateData);
                                                            } else if (cdate.details.booking[0].deduction === "Allocation" && cdate.details.booking[0].group === "Tabikobo") {
                                                                var alloc = document.createTextNode((parseInt((cdate.details.allocation.length > 1 ? cdate.details.allocation[1].high_qty : 0) - parseInt((cdate.details.booking.length > 0 ? cdate.details.booking[0].numrooms : 0))) + (parseInt((cdate.details.blocking.length > 0 ? cdate.details.blocking[0].block : 0)))));
                                                                tdDateData.appendChild(alloc);
                                                                tdDateData.style.textAlign = "center";
                                                                tdDateData.setAttribute("class", "detailyellow");
                                                                tdDateData.style.color = "black";
                                                                tr2.appendChild(tdDateData);
                                                            }
                                                        } else {
                                                            var alloc = document.createTextNode(parseInt((cdate.details.allocation.length > 1 ? cdate.details.allocation[1].high_qty : 0)) + parseInt((cdate.details.blocking.length > 0 ? cdate.details.blocking[0].block : 0)));
                                                            tdDateData.appendChild(alloc);
                                                            tdDateData.style.textAlign = "center";
                                                            tdDateData.setAttribute("class", "detailyellow");
                                                            tdDateData.style.color = "black";
                                                            tr2.appendChild(tdDateData);
                                                        }
                                                    }
                                                    else {
                                                        if (cdate.details.booking.length > 0) {
                                                            if (cdate.details.booking[0].deduction === "Allocation" && cdate.details.booking[0].group === "Tabikobo") {
                                                                var alloc = document.createTextNode(parseInt((cdate.details.allocation.length > 1 ? cdate.details.allocation[1].high_qty : 0)) - parseInt((cdate.details.booking.length > 0 ? cdate.details.booking[0].numrooms : 0)));
                                                                tdDateData.appendChild(alloc);
                                                                tdDateData.style.textAlign = "center";
                                                                tdDateData.setAttribute("class", "detailyellow");
                                                                tdDateData.style.color = "black";
                                                                tr2.appendChild(tdDateData);
                                                            } else {
                                                                var alloc = document.createTextNode(parseInt((cdate.details.allocation.length > 1 ? cdate.details.allocation[1].high_qty : 0)));
                                                                tdDateData.appendChild(alloc);
                                                                tdDateData.style.textAlign = "center";
                                                                tdDateData.setAttribute("class", "detailyellow");
                                                                tdDateData.style.color = "black";
                                                                tr2.appendChild(tdDateData);
                                                            }
                                                        } else {
                                                            var allocs = document.createTextNode(parseInt((cdate.details.allocation.length > 1 ? cdate.details.allocation[1].high_qty : 0)));
                                                            tdDateData.appendChild(allocs);
                                                            tdDateData.style.textAlign = "center";
                                                            tdDateData.setAttribute("class", "detailyellow");
                                                            tdDateData.style.color = "black";
                                                            tr2.appendChild(tdDateData);
                                                        }
                                                    }
                                                }
                                                if ((cdate.details.availability.length > 0 ? cdate.details.availability[0].classColor : "") === "red") {
                                                    if (cdate.details.blocking.length > 0) {
                                                        if (cdate.details.booking.length > 0) {
                                                            if (cdate.details.booking[0].deduction === "Blocking") {
                                                                var alloc = document.createTextNode(((parseInt((cdate.details.blocking.length > 0 ? cdate.details.blocking[0].block : 0)) - parseInt((cdate.details.booking.length > 0 ? cdate.details.booking[0].numrooms : 0)))) + parseInt((cdate.details.allocation.length > 1 ? cdate.details.allocation[1].high_qty : 0)));
                                                                tdDateData.appendChild(alloc);
                                                                tdDateData.style.textAlign = "center";
                                                                tdDateData.setAttribute("class", "detailred");
                                                                tdDateData.style.color = "black";
                                                                tr2.appendChild(tdDateData);
                                                            } else if (cdate.details.booking[0].deduction === "Allocation" && cdate.details.booking[0].group === "Tabikobo") {
                                                                var alloc = document.createTextNode(((parseInt((cdate.details.allocation.length > 1 ? cdate.details.allocation[1].high_qty : 0)) - parseInt((cdate.details.booking.length > 0 ? cdate.details.booking[0].numrooms : 0))) + (parseInt((cdate.details.blocking.length > 0 ? cdate.details.blocking[0].block : 0)))));
                                                                tdDateData.appendChild(alloc);
                                                                tdDateData.style.textAlign = "center";
                                                                tdDateData.setAttribute("class", "detailred");
                                                                tdDateData.style.color = "black";
                                                                tr2.appendChild(tdDateData);
                                                            }
                                                        } else {
                                                            var alloc = document.createTextNode((parseInt((cdate.details.blocking.length > 0 ? cdate.details.blocking[0].block : 0))) + parseInt((cdate.details.allocation.length > 1 ? cdate.details.allocation[1].high_qty : 0)));
                                                            tdDateData.appendChild(alloc);
                                                            tdDateData.style.textAlign = "center";
                                                            tdDateData.setAttribute("class", "detailred");
                                                            tdDateData.style.color = "black";
                                                            tr2.appendChild(tdDateData);
                                                        }
                                                    }
                                                    else {
                                                        if (cdate.details.booking.length > 0) {
                                                            if (cdate.details.booking[0].deduction === "Allocation" && cdate.details.booking[0].group === "Tabikobo") {
                                                                var alloc = document.createTextNode((parseInt((cdate.details.allocation.length > 1 ? cdate.details.allocation[1].high_qty : 0)) - parseInt((cdate.details.booking.length > 0 ? cdate.details.booking[0].numrooms : 0))));
                                                                tdDateData.appendChild(alloc);
                                                                tdDateData.style.textAlign = "center";
                                                                tdDateData.setAttribute("class", "detailred");
                                                                tdDateData.style.color = "black";
                                                                tr2.appendChild(tdDateData);
                                                            } else {
                                                                var alloc = document.createTextNode((parseInt((cdate.details.allocation.length > 1 ? cdate.details.allocation[1].high_qty : 0))));
                                                                tdDateData.appendChild(alloc);
                                                                tdDateData.style.textAlign = "center";
                                                                tdDateData.setAttribute("class", "detailred");
                                                                tdDateData.style.color = "black";
                                                                tr2.appendChild(tdDateData);
                                                            }
                                                        } else {
                                                            var allocs = document.createTextNode((parseInt((cdate.details.allocation.length > 1 ? cdate.details.allocation[1].high_qty : 0))));
                                                            tdDateData.appendChild(allocs);
                                                            tdDateData.style.textAlign = "center";
                                                            tdDateData.setAttribute("class", "detailred");
                                                            tdDateData.style.color = "black";
                                                            tr2.appendChild(tdDateData);
                                                        }
                                                    }
                                                }
                                            }
                                        }
                                        else {
                                            if ((cdate.details.availability.length > 0 ? cdate.details.availability[0].classColor : "") === "green") {
                                                if (cdate.details.blocking.length > 0) {
                                                    if (cdate.details.booking.length > 0) {
                                                        if (cdate.details.booking[0].deduction === "Blocking") {
                                                            var alloc = document.createTextNode((parseInt((cdate.details.allocation.length > 1 ? cdate.details.allocation[1].npk_qty : 0)) + (parseInt((cdate.details.blocking.length > 0 ? cdate.details.blocking[0].block : 0)) - parseInt((cdate.details.booking.length > 0 ? cdate.details.booking[0].numrooms : 0)))));
                                                            tdDateData.appendChild(alloc);
                                                            tdDateData.style.textAlign = "center";
                                                            tdDateData.setAttribute("class", "detailgreen");
                                                            tdDateData.style.color = "black";
                                                            tr2.appendChild(tdDateData);
                                                        } else if (cdate.details.booking[0].deduction === "Allocation" && cdate.details.booking[0].group === "Tabikobo") {
                                                            var alloc = document.createTextNode(((parseInt((cdate.details.allocation.length > 1 ? cdate.details.allocation[1].npk_qty : 0)) - parseInt((cdate.details.booking.length > 0 ? cdate.details.booking[0].numrooms : 0))) + (parseInt((cdate.details.blocking.length > 0 ? cdate.details.blocking[0].block : 0)))));
                                                            tdDateData.appendChild(alloc);
                                                            tdDateData.style.textAlign = "center";
                                                            tdDateData.setAttribute("class", "detailgreen");
                                                            tdDateData.style.color = "black";
                                                            tr2.appendChild(tdDateData);
                                                        }
                                                    } else {
                                                        var alloc = document.createTextNode(parseInt((cdate.details.allocation.length > 1 ? cdate.details.allocation[1].npk_qty : 0)) + parseInt((cdate.details.blocking.length > 0 ? cdate.details.blocking[0].block : 0)));
                                                        tdDateData.appendChild(alloc);
                                                        tdDateData.style.textAlign = "center";
                                                        tdDateData.setAttribute("class", "detailgreen");
                                                        tdDateData.style.color = "black";
                                                        tr2.appendChild(tdDateData);
                                                    }
                                                }
                                                else {
                                                    if (cdate.details.booking.length > 0) {
                                                        if (cdate.details.booking[0].deduction === "Allocation" && cdate.details.booking[0].group === "Tabikobo") {
                                                            var alloc = document.createTextNode((parseInt((cdate.details.allocation.length > 1 ? cdate.details.allocation[1].npk_qty : 0)) - parseInt((cdate.details.booking.length > 0 ? cdate.details.booking[0].numrooms : 0))));
                                                            tdDateData.appendChild(alloc);
                                                            tdDateData.style.textAlign = "center";
                                                            tdDateData.setAttribute("class", "detailgreen");
                                                            tdDateData.style.color = "black";
                                                            tr2.appendChild(tdDateData);
                                                        } else {
                                                            var alloc = document.createTextNode(parseInt((cdate.details.allocation.length > 1 ? cdate.details.allocation[1].npk_qty : 0)));
                                                            tdDateData.appendChild(alloc);
                                                            tdDateData.style.textAlign = "center";
                                                            tdDateData.setAttribute("class", "detailgreen");
                                                            tdDateData.style.color = "black";
                                                            tr2.appendChild(tdDateData);
                                                        }
                                                    } else {
                                                        var allocs = document.createTextNode(parseInt((cdate.details.allocation.length > 1 ? cdate.details.allocation[1].npk_qty : 0)));
                                                        tdDateData.appendChild(allocs);
                                                        tdDateData.style.textAlign = "center";
                                                        tdDateData.setAttribute("class", "detailgreen");
                                                        tdDateData.style.color = "black";
                                                        tr2.appendChild(tdDateData);
                                                    }
                                                }
                                            }
                                            if ((cdate.details.availability.length > 0 ? cdate.details.availability[0].classColor : "") === "yellow") {
                                                if (cdate.details.blocking.length > 0) {
                                                    if (cdate.details.booking.length > 0) {
                                                        if (cdate.details.booking[0].deduction === "Blocking") {
                                                            var alloc = document.createTextNode((parseInt((cdate.details.allocation.length > 1 ? cdate.details.allocation[1].npk_qty : 0)) + (parseInt((cdate.details.blocking.length > 0 ? cdate.details.blocking[0].block : 0)) - parseInt((cdate.details.booking.length > 0 ? cdate.details.booking[0].numrooms : 0)))));
                                                            tdDateData.appendChild(alloc);
                                                            tdDateData.style.textAlign = "center";
                                                            tdDateData.setAttribute("class", "detailyellow");
                                                            tdDateData.style.color = "black";
                                                            tr2.appendChild(tdDateData);
                                                        } else if (cdate.details.booking[0].deduction === "Allocation" && cdate.details.booking[0].group === "Tabikobo") {
                                                            var alloc = document.createTextNode(((parseInt((cdate.details.allocation.length > 1 ? cdate.details.allocation[1].npk_qty : 0)) - parseInt((cdate.details.booking.length > 0 ? cdate.details.booking[0].numrooms : 0))) + (parseInt((cdate.details.blocking.length > 0 ? cdate.details.blocking[0].block : 0)))));
                                                            tdDateData.appendChild(alloc);
                                                            tdDateData.style.textAlign = "center";
                                                            tdDateData.setAttribute("class", "detailyellow");
                                                            tdDateData.style.color = "black";
                                                            tr2.appendChild(tdDateData);
                                                        }
                                                    } else {
                                                        var alloc = document.createTextNode(parseInt((cdate.details.allocation.length > 1 ? cdate.details.allocation[1].npk_qty : 0)) + parseInt((cdate.details.blocking.length > 0 ? cdate.details.blocking[0].block : 0)));
                                                        tdDateData.appendChild(alloc);
                                                        tdDateData.style.textAlign = "center";
                                                        tdDateData.setAttribute("class", "detailyellow");
                                                        tdDateData.style.color = "black";
                                                        tr2.appendChild(tdDateData);
                                                    }
                                                }
                                                else {
                                                    if (cdate.details.booking.length > 0) {
                                                        if (cdate.details.booking[0].deduction === "Allocation" && cdate.details.booking[0].group === "Tabikobo") {
                                                            var alloc = document.createTextNode(parseInt((cdate.details.allocation.length > 1 ? cdate.details.allocation[1].npk_qty : 0)) - parseInt((cdate.details.booking.length > 0 ? cdate.details.booking[0].numrooms : 0)));
                                                            tdDateData.appendChild(alloc);
                                                            tdDateData.style.textAlign = "center";
                                                            tdDateData.setAttribute("class", "detailyellow");
                                                            tdDateData.style.color = "black";
                                                            tr2.appendChild(tdDateData);
                                                        } else {
                                                            var alloc = document.createTextNode(parseInt((cdate.details.allocation.length > 1 ? cdate.details.allocation[1].npk_qty : 0)));
                                                            tdDateData.appendChild(alloc);
                                                            tdDateData.style.textAlign = "center";
                                                            tdDateData.setAttribute("class", "detailyellow");
                                                            tdDateData.style.color = "black";
                                                            tr2.appendChild(tdDateData);
                                                        }
                                                    } else {
                                                        var allocs = document.createTextNode(parseInt((cdate.details.allocation.length > 1 ? cdate.details.allocation[1].npk_qty : 0)));
                                                        tdDateData.appendChild(allocs);
                                                        tdDateData.style.textAlign = "center";
                                                        tdDateData.setAttribute("class", "detailyellow");
                                                        tdDateData.style.color = "black";
                                                        tr2.appendChild(tdDateData);
                                                    }
                                                }
                                            }
                                            if ((cdate.details.availability.length > 0 ? cdate.details.availability[0].classColor : "") === "red") {
                                                if (cdate.details.blocking.length > 0) {
                                                    if (cdate.details.booking.length > 0) {
                                                        if (cdate.details.booking[0].deduction === "Blocking") {
                                                            var alloc = document.createTextNode((parseInt((cdate.details.allocation.length > 1 ? cdate.details.allocation[1].npk_qty : 0)) + (parseInt((cdate.details.blocking.length > 0 ? cdate.details.blocking[0].block : 0)) - parseInt((cdate.details.booking.length > 0 ? cdate.details.booking[0].numrooms : 0)))));
                                                            tdDateData.appendChild(alloc);
                                                            tdDateData.style.textAlign = "center";
                                                            tdDateData.setAttribute("class", "detailred");
                                                            tdDateData.style.color = "black";
                                                            tr2.appendChild(tdDateData);
                                                        } else if (cdate.details.booking[0].deduction === "Allocation" && cdate.details.booking[0].group === "Tabikobo") {
                                                            var alloc = document.createTextNode(((parseInt((cdate.details.allocation.length > 1 ? cdate.details.allocation[1].npk_qty : 0)) - parseInt((cdate.details.booking.length > 0 ? cdate.details.booking[0].numrooms : 0))) + (parseInt((cdate.details.blocking.length > 0 ? cdate.details.blocking[0].block : 0)))));
                                                            tdDateData.appendChild(alloc);
                                                            tdDateData.style.textAlign = "center";
                                                            tdDateData.setAttribute("class", "detailred");
                                                            tdDateData.style.color = "black";
                                                            tr2.appendChild(tdDateData);
                                                        }
                                                    } else {
                                                        var alloc = document.createTextNode(parseInt((cdate.details.allocation.length > 1 ? cdate.details.allocation[1].npk_qty : 0)) + parseInt((cdate.details.blocking.length > 0 ? cdate.details.blocking[0].block : 0)));
                                                        tdDateData.appendChild(alloc);
                                                        tdDateData.style.textAlign = "center";
                                                        tdDateData.setAttribute("class", "detailred");
                                                        tdDateData.style.color = "black";
                                                        tr2.appendChild(tdDateData);
                                                    }
                                                }
                                                else {
                                                    if (cdate.details.booking.length > 0) {
                                                        if (cdate.details.booking[0].deduction === "Allocation" && cdate.details.booking[0].group === "Tabikobo") {
                                                            var alloc = document.createTextNode(parseInt((cdate.details.allocation.length > 1 ? cdate.details.allocation[1].npk_qty : 0)) - parseInt((cdate.details.booking.length > 0 ? cdate.details.booking[0].numrooms : 0)));
                                                            tdDateData.appendChild(alloc);
                                                            tdDateData.style.textAlign = "center";
                                                            tdDateData.setAttribute("class", "detailred");
                                                            tdDateData.style.color = "black";
                                                            tr2.appendChild(tdDateData);
                                                        } else {
                                                            var alloc = document.createTextNode(parseInt((cdate.details.allocation.length > 1 ? cdate.details.allocation[1].npk_qty : 0)));
                                                            tdDateData.appendChild(alloc);
                                                            tdDateData.style.textAlign = "center";
                                                            tdDateData.setAttribute("class", "detailred");
                                                            tdDateData.style.color = "black";
                                                            tr2.appendChild(tdDateData);
                                                        }
                                                    } else {
                                                        var allocs = document.createTextNode(parseInt((cdate.details.allocation.length > 1 ? cdate.details.allocation[1].npk_qty : 0)));
                                                        tdDateData.appendChild(allocs);
                                                        tdDateData.style.textAlign = "center";
                                                        tdDateData.setAttribute("class", "detailred");
                                                        tdDateData.style.color = "black";
                                                        tr2.appendChild(tdDateData);
                                                    }
                                                }
                                            }
                                        }
                                    }
                                    else {
                                        if ((cdate.details.availability.length > 0 ? cdate.details.availability[0].classColor : "") === "green") {
                                            if (cdate.details.blocking.length > 0) {
                                                if (cdate.details.booking.length > 0) {
                                                    if (cdate.details.booking[0].deduction === "Blocking") {
                                                        var alloc = document.createTextNode(parseInt((cdate.details.blocking.length > 0 ? cdate.details.blocking[0].block : 0)) - parseInt((cdate.details.booking.length > 0 ? cdate.details.booking[0].numrooms : 0)));
                                                        tdDateData.appendChild(alloc);
                                                        tdDateData.style.textAlign = "center";
                                                        tdDateData.setAttribute("class", "detailgreen");
                                                        tdDateData.style.color = "black";
                                                        tr2.appendChild(tdDateData);
                                                    }
                                                } else {
                                                    var alloc = document.createTextNode(parseInt((cdate.details.blocking.length > 0 ? cdate.details.blocking[0].block : 0)));
                                                    tdDateData.appendChild(alloc);
                                                    tdDateData.style.textAlign = "center";
                                                    tdDateData.setAttribute("class", "detailgreen");
                                                    tdDateData.style.color = "black";
                                                    tr2.appendChild(tdDateData);

                                                }
                                            } else {
                                                var allocs = document.createTextNode(0);
                                                tdDateData.appendChild(allocs);
                                                tdDateData.style.textAlign = "center";
                                                tdDateData.setAttribute("class", "detailgreen");
                                                tdDateData.style.color = "black";
                                                tr2.appendChild(tdDateData);
                                            }
                                        }
                                        if ((cdate.details.availability.length > 0 ? cdate.details.availability[0].classColor : "") === "red") {
                                            if (cdate.details.blocking.length > 0) {
                                                if (cdate.details.booking.length > 0) {
                                                    if (cdate.details.booking[0].deduction === "Blocking") {
                                                        var alloc = document.createTextNode(parseInt((cdate.details.blocking.length > 0 ? cdate.details.blocking[0].block : 0)) - parseInt((cdate.details.booking.length > 0 ? cdate.details.booking[0].numrooms : 0)));
                                                        tdDateData.appendChild(alloc);
                                                        tdDateData.style.textAlign = "center";
                                                        tdDateData.setAttribute("class", "detailred");
                                                        tdDateData.style.color = "black";
                                                        tr2.appendChild(tdDateData);
                                                    } else {
                                                        var alloc = document.createTextNode(parseInt((cdate.details.blocking.length > 0 ? cdate.details.blocking[0].block : 0)));
                                                        tdDateData.appendChild(alloc);
                                                        tdDateData.style.textAlign = "center";
                                                        tdDateData.setAttribute("class", "detailred");
                                                        tdDateData.style.color = "black";
                                                        tr2.appendChild(tdDateData);
                                                    }
                                                } else {
                                                    var alloc = document.createTextNode(parseInt((cdate.details.blocking.length > 0 ? cdate.details.blocking[0].block : 0)));
                                                    tdDateData.appendChild(alloc);
                                                    tdDateData.style.textAlign = "center";
                                                    tdDateData.setAttribute("class", "detailred");
                                                    tdDateData.style.color = "black";
                                                    tr2.appendChild(tdDateData);

                                                }
                                            } else {
                                                var allocs = document.createTextNode(0);
                                                tdDateData.appendChild(allocs);
                                                tdDateData.style.textAlign = "center";
                                                tdDateData.setAttribute("class", "detailred");
                                                tdDateData.style.color = "black";
                                                tr2.appendChild(tdDateData);
                                            }
                                        }
                                        if ((cdate.details.availability.length > 0 ? cdate.details.availability[0].classColor : "") === "yellow") {
                                            if (cdate.details.blocking.length > 0) {
                                                if (cdate.details.booking.length > 0) {
                                                    if (cdate.details.booking[0].deduction === "Blocking") {
                                                        var alloc = document.createTextNode(parseInt((cdate.details.blocking.length > 0 ? cdate.details.blocking[0].block : 0)) - parseInt((cdate.details.booking.length > 0 ? cdate.details.booking[0].numrooms : 0)));
                                                        tdDateData.appendChild(alloc);
                                                        tdDateData.style.textAlign = "center";
                                                        tdDateData.setAttribute("class", "detailyellow");
                                                        tdDateData.style.color = "black";
                                                        tr2.appendChild(tdDateData);
                                                    } else {
                                                        var alloc = document.createTextNode(parseInt((cdate.details.blocking.length > 0 ? cdate.details.blocking[0].block : 0)));
                                                        tdDateData.appendChild(alloc);
                                                        tdDateData.style.textAlign = "center";
                                                        tdDateData.setAttribute("class", "detailyellow");
                                                        tdDateData.style.color = "black";
                                                        tr2.appendChild(tdDateData);
                                                    }
                                                } else {
                                                    var alloc = document.createTextNode(parseInt((cdate.details.blocking.length > 0 ? cdate.details.blocking[0].block : 0)));
                                                    tdDateData.appendChild(alloc);
                                                    tdDateData.style.textAlign = "center";
                                                    tdDateData.setAttribute("class", "detailyellow");
                                                    tdDateData.style.color = "black";
                                                    tr2.appendChild(tdDateData);

                                                }
                                            } else {
                                                var allocs = document.createTextNode(0);
                                                tdDateData.appendChild(allocs);
                                                tdDateData.style.textAlign = "center";
                                                tdDateData.setAttribute("class", "detailyellow");
                                                tdDateData.style.color = "black";
                                                tr2.appendChild(tdDateData);
                                            }
                                        }
                                    }
                                    tdDateData.setAttribute('id',
                                        element.hotelname + "~"
                                        + element.roomname + "~"
                                        + (cdate.details.availability.length > 0 ? cdate.details.availability[0].status : "No Update") + "~"
                                        + (cdate.details.availability.length > 0 ? cdate.details.availability[0].updatedAt : "") + "~"
                                        + 0 + "~"
                                        + 0 + "~"
                                        + 0 + "~"
                                        + (cdate.details.seasondetails.length > 0 ? cdate.details.seasondetails[0].season : "") + "~"
                                        + 0 + "~"
                                        + (cdate.details.blocking.length > 0 ? cdate.details.blocking[0].block : 0) + "~"
                                        + (cdate.details.blocking.length > 0 ? cdate.details.blocking[0].cancel : "none") + "~"
                                        + (cdate.details.blocking.length > 0 ? cdate.details.blocking[0].updatedAt : "") + "~"
                                        + (cdate.details.booking.length > 0 ? cdate.details.booking[0].numrooms : 0) + "~"
                                        + (cdate.details.booking.length > 0 ? cdate.details.booking[0].deduction : "") + "~"
                                        + (cdate.details.booking.length > 0 ? cdate.details.booking[0].updatedAt : "") + "~"
                                        + 0 + "~"
                                        + 0 + "~"
                                        + 0 + "~"
                                        + cdate.date + "~"
                                        + (cdate.details.seasondetails.length > 0 ? true : false) + "~"
                                        + (cdate.details.allocation.length > 1 ? cdate.details.allocation[1].npk_qty : 0) + "~"
                                        + (cdate.details.allocation.length > 1 ? cdate.details.allocation[1].pk_qty : 0) + "~"
                                        + (cdate.details.allocation.length > 1 ? cdate.details.allocation[1].high_qty : 0) + "~"
                                        + (cdate.details.allocation.length > 1 ? cdate.details.allocation[1].updatedAt : 0) + "~"
                                        + (cdate.details.allocation.length > 1 ? cdate.details.allocation[1].pk_coff : 0) + "~"
                                        + (cdate.details.allocation.length > 1 ? cdate.details.allocation[1].npk_coff : 0) + "~"
                                        + (cdate.details.allocation.length > 1 ? cdate.details.allocation[1].high_coff : 0));
                                    var self = this;
                                    tdDateData.addEventListener('mouseover', function (e) {
                                        self.tapped = e.target.id;
                                    });
                                    tdDateData.addEventListener('mouseout', function (f) {
                                        self.opened = f.target.id;
                                    });
                                }
                                else {
                                    var tdDateData = document.createElement('td');
                                    if (cdate.details.allocation.length > 0) {
                                        if (cdate.details.seasondetails.length > 0) {
                                            if ((cdate.details.seasondetails.length > 0 ? cdate.details.seasondetails[0].season : "") === "Peak Season") {
                                                if (cdate.details.blocking.length > 0) {
                                                    if (cdate.details.booking.length > 0) {
                                                        if (cdate.details.booking[0].deduction === "Blocking") {
                                                            var alloca = document.createTextNode((parseInt((cdate.details.allocation.length > 1 ? cdate.details.allocation[1].pk_qty : 0)) + (parseInt((cdate.details.blocking.length > 0 ? cdate.details.blocking[0].block : 0)) - parseInt((cdate.details.booking.length > 0 ? cdate.details.booking[0].numrooms : 0)))));
                                                            tdDateData.appendChild(alloca);
                                                            tdDateData.style.textAlign = "center";
                                                            tdDateData.style.color = "black";
                                                            tr2.appendChild(tdDateData);
                                                        } else if (cdate.details.booking[0].deduction === "Allocation" && cdate.details.booking[0].group === "Tabikobo") {
                                                            var alloca = document.createTextNode(((parseInt((cdate.details.allocation.length > 1 ? cdate.details.allocation[1].pk_qty : 0)) - parseInt((cdate.details.booking.length > 0 ? cdate.details.booking[0].numrooms : 0))) + parseInt((cdate.details.blocking.length > 0 ? cdate.details.blocking[0].block : 0))));
                                                            tdDateData.appendChild(alloca);
                                                            tdDateData.style.textAlign = "center";
                                                            tdDateData.style.color = "black";
                                                            tr2.appendChild(tdDateData);
                                                        }
                                                    } else {
                                                        var alloca = document.createTextNode(parseInt((cdate.details.allocation.length > 1 ? cdate.details.allocation[1].pk_qty : 0)) + parseInt((cdate.details.blocking.length > 0 ? cdate.details.blocking[0].block : 0)));
                                                        tdDateData.appendChild(alloca);
                                                        tdDateData.style.textAlign = "center";
                                                        tdDateData.style.color = "black";
                                                        tr2.appendChild(tdDateData);
                                                    }
                                                } else {
                                                    if (cdate.details.booking.length > 0) {
                                                        if (cdate.details.booking[0].deduction === "Allocation" && cdate.details.booking[0].group === "Tabikobo") {
                                                            var allocas = document.createTextNode(parseInt((cdate.details.allocation.length > 1 ? cdate.details.allocation[1].pk_qty : 0)) - parseInt((cdate.details.booking.length > 0 ? cdate.details.booking[0].numrooms : 0)));
                                                            tdDateData.appendChild(allocas);
                                                            tdDateData.style.textAlign = "center";
                                                            tdDateData.style.color = "black";
                                                            tr2.appendChild(tdDateData);
                                                        } else {
                                                            var allocas = document.createTextNode(parseInt((cdate.details.allocation.length > 1 ? cdate.details.allocation[1].pk_qty : 0)));
                                                            tdDateData.appendChild(allocas);
                                                            tdDateData.style.textAlign = "center";
                                                            tdDateData.style.color = "black";
                                                            tr2.appendChild(tdDateData);
                                                        }
                                                    } else {
                                                        var allocas = document.createTextNode(parseInt((cdate.details.allocation.length > 1 ? cdate.details.allocation[1].pk_qty : 0)));
                                                        tdDateData.appendChild(allocas);
                                                        tdDateData.style.textAlign = "center";
                                                        tdDateData.style.color = "black";
                                                        tr2.appendChild(tdDateData);
                                                    }
                                                }
                                            }
                                            else {
                                                if (cdate.details.blocking.length > 0) {
                                                    if (cdate.details.booking.length > 0) {
                                                        if (cdate.details.booking[0].deduction === "Blocking") {
                                                            var alloca = document.createTextNode(((parseInt((cdate.details.blocking.length > 0 ? cdate.details.blocking[0].block : 0)) - parseInt((cdate.details.booking.length > 0 ? cdate.details.booking[0].numrooms : 0)))) + parseInt((cdate.details.allocation.length > 1 ? cdate.details.allocation[1].high_qty : 0)));
                                                            tdDateData.appendChild(alloca);
                                                            tdDateData.style.textAlign = "center";
                                                            tdDateData.style.color = "black";
                                                            tr2.appendChild(tdDateData);
                                                        } else if (cdate.details.booking[0].deduction === "Allocation" && cdate.details.booking[0].group === "Tabikobo") {
                                                            var alloca = document.createTextNode(((parseInt((cdate.details.allocation.length > 1 ? cdate.details.allocation[1].high_qty : 0)) - parseInt((cdate.details.booking.length > 0 ? cdate.details.booking[0].numrooms : 0))) + parseInt((cdate.details.blocking.length > 0 ? cdate.details.blocking[0].block : 0))));
                                                            tdDateData.appendChild(alloca);
                                                            tdDateData.style.textAlign = "center";
                                                            tdDateData.style.color = "black";
                                                            tr2.appendChild(tdDateData);
                                                        }
                                                    } else {
                                                        var alloca = document.createTextNode(parseInt((cdate.details.allocation.length > 1 ? cdate.details.allocation[1].high_qty : 0)) + parseInt((cdate.details.blocking.length > 0 ? cdate.details.blocking[0].block : 0)));
                                                        tdDateData.appendChild(alloca);
                                                        tdDateData.style.textAlign = "center";
                                                        tdDateData.style.color = "black";
                                                        tr2.appendChild(tdDateData);
                                                    }
                                                } else {
                                                    if (cdate.details.booking.length > 0) {
                                                        if (cdate.details.booking[0].deduction === "Allocation" && cdate.details.booking[0].group === "Tabikobo") {
                                                            var allocas = document.createTextNode(parseInt((cdate.details.allocation.length > 1 ? cdate.details.allocation[1].high_qty : 0)) - parseInt((cdate.details.booking.length > 0 ? cdate.details.booking[0].numrooms : 0)));
                                                            tdDateData.appendChild(allocas);
                                                            tdDateData.style.textAlign = "center";
                                                            tdDateData.style.color = "black";
                                                            tr2.appendChild(tdDateData);
                                                        } else {
                                                            var allocas = document.createTextNode(parseInt((cdate.details.allocation.length > 1 ? cdate.details.allocation[1].high_qty : 0)));
                                                            tdDateData.appendChild(allocas);
                                                            tdDateData.style.textAlign = "center";
                                                            tdDateData.style.color = "black";
                                                            tr2.appendChild(tdDateData);
                                                        }
                                                    } else {
                                                        var allocas = document.createTextNode(parseInt((cdate.details.allocation.length > 1 ? cdate.details.allocation[1].high_qty : 0)));
                                                        tdDateData.appendChild(allocas);
                                                        tdDateData.style.textAlign = "center";
                                                        tdDateData.style.color = "black";
                                                        tr2.appendChild(tdDateData);
                                                    }
                                                }

                                            }
                                        }
                                        else {
                                            if (cdate.details.blocking.length > 0) {
                                                if (cdate.details.booking.length > 0) {
                                                    if (cdate.details.booking[0].deduction === "Blocking") {
                                                        var alloca = document.createTextNode((parseInt((cdate.details.allocation.length > 1 ? cdate.details.allocation[1].npk_qty : 0)) + (parseInt((cdate.details.blocking.length > 0 ? cdate.details.blocking[0].block : 0)) - parseInt((cdate.details.booking.length > 0 ? cdate.details.booking[0].numrooms : 0)))));
                                                        tdDateData.appendChild(alloca);
                                                        tdDateData.style.textAlign = "center";
                                                        tdDateData.style.color = "black";
                                                        tr2.appendChild(tdDateData);
                                                    } else if (cdate.details.booking[0].deduction === "Allocation" && cdate.details.booking[0].group === "Tabikobo") {
                                                        var alloca = document.createTextNode(((parseInt((cdate.details.allocation.length > 1 ? cdate.details.allocation[1].npk_qty : 0)) - parseInt((cdate.details.booking.length > 0 ? cdate.details.booking[0].numrooms : 0))) + parseInt((cdate.details.blocking.length > 0 ? cdate.details.blocking[0].block : 0))));
                                                        tdDateData.appendChild(alloca);
                                                        tdDateData.style.textAlign = "center";
                                                        tdDateData.style.color = "black";
                                                        tr2.appendChild(tdDateData);
                                                    }
                                                } else {
                                                    var alloca = document.createTextNode(parseInt((cdate.details.allocation.length > 1 ? cdate.details.allocation[1].npk_qty : 0)) + parseInt((cdate.details.blocking.length > 0 ? cdate.details.blocking[0].block : 0)));
                                                    tdDateData.appendChild(alloca);
                                                    tdDateData.style.textAlign = "center";
                                                    tdDateData.style.color = "black";
                                                    tr2.appendChild(tdDateData);
                                                }
                                            } else {
                                                if (cdate.details.booking.length > 0) {
                                                    if (cdate.details.booking[0].deduction === "Allocation" && cdate.details.booking[0].group === "Tabikobo") {
                                                        var allocas = document.createTextNode(parseInt((cdate.details.allocation.length > 1 ? cdate.details.allocation[1].npk_qty : 0)) - parseInt((cdate.details.booking.length > 0 ? cdate.details.booking[0].numrooms : 0)));
                                                        tdDateData.appendChild(allocas);
                                                        tdDateData.style.textAlign = "center";
                                                        tdDateData.style.color = "black";
                                                        tr2.appendChild(tdDateData);
                                                    } else {
                                                        var allocas = document.createTextNode(parseInt((cdate.details.allocation.length > 1 ? cdate.details.allocation[1].npk_qty : 0)));
                                                        tdDateData.appendChild(allocas);
                                                        tdDateData.style.textAlign = "center";
                                                        tdDateData.style.color = "black";
                                                        tr2.appendChild(tdDateData);
                                                    }
                                                } else {
                                                    var allocas = document.createTextNode(parseInt((cdate.details.allocation.length > 1 ? cdate.details.allocation[1].npk_qty : 0)));
                                                    tdDateData.appendChild(allocas);
                                                    tdDateData.style.textAlign = "center";
                                                    tdDateData.style.color = "black";
                                                    tr2.appendChild(tdDateData);
                                                }
                                            }
                                        }
                                    }
                                    else {
                                        if (cdate.details.blocking.length > 0) {
                                            if (cdate.details.booking.length > 0) {
                                                if (cdate.details.booking[0].deduction === "Blocking") {
                                                    var alloca = document.createTextNode(parseInt((cdate.details.blocking.length > 0 ? cdate.details.blocking[0].block : 0)) - parseInt((cdate.details.booking.length > 0 ? cdate.details.booking[0].numrooms : 0)));
                                                    tdDateData.appendChild(alloca);
                                                    tdDateData.style.textAlign = "center";
                                                    tdDateData.style.color = "black";
                                                    tr2.appendChild(tdDateData);
                                                } else {
                                                    var alloca = document.createTextNode(parseInt((cdate.details.blocking.length > 0 ? cdate.details.blocking[0].block : 0)));
                                                    tdDateData.appendChild(alloca);
                                                    tdDateData.style.textAlign = "center";
                                                    tdDateData.style.color = "black";
                                                    tr2.appendChild(tdDateData);
                                                }
                                            } else {
                                                var alloca = document.createTextNode(parseInt((cdate.details.blocking.length > 0 ? cdate.details.blocking[0].block : 0)));
                                                tdDateData.appendChild(alloca);
                                                tdDateData.style.textAlign = "center";
                                                tdDateData.style.color = "black";
                                                tr2.appendChild(tdDateData);
                                            }
                                        } else {
                                            var allocas = document.createTextNode(0);
                                            tdDateData.appendChild(allocas);
                                            tdDateData.style.textAlign = "center";
                                            tdDateData.style.color = "black";
                                            tr2.appendChild(tdDateData);
                                        }
                                    }
                                    tdDateData.setAttribute('id',
                                        element.hotelname + "~"
                                        + element.roomname + "~"
                                        + (cdate.details.availability.length > 0 ? cdate.details.availability[0].status : "No Update") + "~"
                                        + (cdate.details.availability.length > 0 ? cdate.details.availability[0].updatedAt : "") + "~"
                                        + 0 + "~"
                                        + 0 + "~"
                                        + 0 + "~"
                                        + (cdate.details.seasondetails.length > 0 ? cdate.details.seasondetails[0].season : "") + "~"
                                        + 0 + "~"
                                        + (cdate.details.blocking.length > 0 ? cdate.details.blocking[0].block : 0) + "~"
                                        + (cdate.details.blocking.length > 0 ? cdate.details.blocking[0].cancel : "none") + "~"
                                        + (cdate.details.blocking.length > 0 ? cdate.details.blocking[0].updatedAt : "") + "~"
                                        + (cdate.details.booking.length > 0 ? cdate.details.booking[0].numrooms : 0) + "~"
                                        + (cdate.details.booking.length > 0 ? cdate.details.booking[0].deduction : "") + "~"
                                        + (cdate.details.booking.length > 0 ? cdate.details.booking[0].updatedAt : "") + "~"
                                        + 0 + "~"
                                        + 0 + "~"
                                        + 0 + "~"
                                        + cdate.date + "~"
                                        + (cdate.details.seasondetails.length > 0 ? true : false) + "~"
                                        + (cdate.details.allocation.length > 1 ? cdate.details.allocation[1].npk_qty : 0) + "~"
                                        + (cdate.details.allocation.length > 1 ? cdate.details.allocation[1].pk_qty : 0) + "~"
                                        + (cdate.details.allocation.length > 1 ? cdate.details.allocation[1].high_qty : 0) + "~"
                                        + (cdate.details.allocation.length > 1 ? cdate.details.allocation[1].updatedAt : 0) + "~"
                                        + (cdate.details.allocation.length > 1 ? cdate.details.allocation[1].pk_coff : 0) + "~"
                                        + (cdate.details.allocation.length > 1 ? cdate.details.allocation[1].npk_coff : 0) + "~"
                                        + (cdate.details.allocation.length > 1 ? cdate.details.allocation[1].high_coff : 0));
                                    var self = this;
                                    tdDateData.addEventListener('mouseover', function (e) {
                                        self.tapped = e.target.id;
                                    });
                                    tdDateData.addEventListener('mouseout', function (f) {
                                        self.opened = f.target.id;
                                    });
                                }

                            }
                        });
                        table.appendChild(tr2);
                    });
                }
            },

            _groupLoaded(data) {
                if (data.detail.response.data) {
                    this.groupItems = data.detail.response.data;
                    Polymer.dom(this.root).querySelector("#hotels").setAttribute("style", "display:none");
                    Polymer.dom(this.root).querySelector("#inquire").disabled = false;
                }
            },
            toggleDrawer() {
                this.dispatchEvent(new CustomEvent('toggleDrawer', {
                    bubbles: true, composed: true, detail: {
                        narrow: this.$.narrow
                    }
                }));
                this.$.narrow = !this.$.narrow;
            },
            _timeStampToDateTime(ts) {
                return new Date(ts);
            },
        });
    </script>
</dom-module>